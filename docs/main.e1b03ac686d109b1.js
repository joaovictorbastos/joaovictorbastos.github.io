"use strict";(self.webpackChunkangularGitHost=self.webpackChunkangularGitHost||[]).push([[179],{2011:(ht,ke,L)=>{L.d(ke,{Dh:()=>fe,GT:()=>_e,cc:()=>Ue,hO:()=>He,on:()=>q,pX:()=>ce,xv:()=>we});var m=L(4650),B=L(127),P=L(5813);ht=L.hmd(ht);const oe=["ngOnDestroy"],ce=(me,et,Xe,Ve={})=>new Proxy(me,{get:(Oe,Ae)=>Xe.runOutsideAngular(()=>{var ze;if(me[Ae])return!(null===(ze=Ve?.spy)||void 0===ze)&&ze.get&&Ve.spy.get(Ae,me[Ae]),me[Ae];if(oe.indexOf(Ae)>-1)return()=>{};const ie=et.toPromise().then(ye=>{const Te=ye&&ye[Ae];return"function"==typeof Te?Te.bind(ye):Te&&Te.then?Te.then(J=>Xe.run(()=>J)):Xe.run(()=>Te)});return new Proxy(()=>{},{get:(ye,Te)=>ie[Te],apply:(ye,Te,J)=>ie.then(se=>{var ae;const ve=se&&se(...J);return!(null===(ae=Ve?.spy)||void 0===ae)&&ae.apply&&Ve.spy.apply(Ae,J,ve),ve})})})}),_e=(me,et)=>{et.forEach(Xe=>{Object.getOwnPropertyNames(Xe.prototype||Xe).forEach(Ve=>{Object.defineProperty(me.prototype,Ve,Object.getOwnPropertyDescriptor(Xe.prototype||Xe,Ve))})})};class ge{constructor(et){return et}}const fe=new m.OlP("angularfire2.app.options"),we=new m.OlP("angularfire2.app.name");function q(me,et,Xe){const Oe="object"==typeof Xe&&Xe||{};Oe.name=Oe.name||"string"==typeof Xe&&Xe||"[DEFAULT]";const ze=B.Z.apps.filter(ie=>ie&&ie.name===Oe.name)[0]||et.runOutsideAngular(()=>B.Z.initializeApp(me,Oe));try{JSON.stringify(me)!==JSON.stringify(ze.options)&&z("error",`${ze.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(ze)}const z=(me,...et)=>{(0,m.X6Q)()&&typeof console<"u"&&console[me](...et)},X={provide:ge,useFactory:q,deps:[fe,m.R0b,[new m.FiY,we]]};let He=(()=>{class me{constructor(Xe){B.Z.registerVersion("angularfire",P.q4.full,"core"),B.Z.registerVersion("angularfire",P.q4.full,"app-compat"),B.Z.registerVersion("angular",m.q4F.full,Xe.toString())}static initializeApp(Xe,Ve){return{ngModule:me,providers:[{provide:fe,useValue:Xe},{provide:we,useValue:Ve}]}}}return me.\u0275fac=function(Xe){return new(Xe||me)(m.LFG(m.Lbi))},me.\u0275mod=m.oAB({type:me}),me.\u0275inj=m.cJS({providers:[X]}),me})();function Ue(me,et,Xe,Ve,Oe){const[,Ae,ze]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===me)||[];if(Ae)return function Se(me,et){try{return me.toString()===et.toString()}catch{return me===et}}(Oe,ze)||(Ce("error",`${et} was already initialized on the ${Xe} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Oe,was:ze})),Ae;{const ie=Ve();return globalThis.\u0275AngularfireInstanceCache.push([me,ie,Oe]),ie}}const it=!!ht.hot,Ce=(me,...et)=>{(0,m.X6Q)()&&typeof console<"u"&&console[me](...et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ht,ke,L)=>{L.d(ke,{q4:()=>Ku,iC:()=>zl,fc:()=>sa,HU:()=>ia,vb:()=>mf,JM:()=>ra});var m=L(4650),B=L(5867),P=L(5861),oe=L(9681),ce=L(2090),_e=L(4859),ge=L(1877),fe=L(8766);const we="@firebase/installations",q="0.5.12",X=`w:${q}`,He="FIS_v2",et=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(b){return b instanceof ce.ZR&&b.code.includes("request-failed")}function Ve({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Oe(b){return{token:b.token,requestStatus:2,expiresIn:se(b.expiresIn),creationTime:Date.now()}}function Ae(b,T){return ze.apply(this,arguments)}function ze(){return(ze=(0,P.Z)(function*(b,T){const U=(yield T.json()).error;return et.create("request-failed",{requestName:b,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function ie({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function ye(b,{refreshToken:T}){const R=ie(b);return R.append("Authorization",function ae(b){return`${He} ${b}`}(T)),R}function Te(b){return J.apply(this,arguments)}function J(){return(J=(0,P.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function se(b){return Number(b.replace("s","000"))}function ve(b,T){return de.apply(this,arguments)}function de(){return(de=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:R}){const U=Ve(b),ee=ie(b),ue=T.getImmediate({optional:!0});if(ue){const Pt=yield ue.getHeartbeatsHeader();Pt&&ee.append("x-firebase-client",Pt)}const Ke={method:"POST",headers:ee,body:JSON.stringify({fid:R,authVersion:He,appId:b.appId,sdkVersion:X})},ft=yield Te(()=>fetch(U,Ke));if(ft.ok){const Pt=yield ft.json();return{fid:Pt.fid||R,registrationStatus:2,refreshToken:Pt.refreshToken,authToken:Oe(Pt.authToken)}}throw yield Ae("Create Installation",ft)})).apply(this,arguments)}function je(b){return new Promise(T=>{setTimeout(T,b)})}const Zt=/^[cdef][\w-]{21}$/;function qe(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const R=function hn(b){return function wt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Zt.test(R)?R:""}catch{return""}}function Bn(b){return`${b.appName}!${b.appId}`}const fn=new Map;function Qt(b,T){const R=Bn(b);En(R,T),function bi(b,T){const R=function xn(){return!Lr&&"BroadcastChannel"in self&&(Lr=new BroadcastChannel("[Firebase] FID Change"),Lr.onmessage=b=>{En(b.data.key,b.data.fid)}),Lr}();R&&R.postMessage({key:b,fid:T}),function is(){0===fn.size&&Lr&&(Lr.close(),Lr=null)}()}(R,T)}function En(b,T){const R=fn.get(b);if(R)for(const U of R)U(T)}let Lr=null;const jn="firebase-installations-store";let $i=null;function pt(){return $i||($i=(0,fe.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(jn)}})),$i}function Fr(b,T){return In.apply(this,arguments)}function In(){return(In=(0,P.Z)(function*(b,T){const R=Bn(b),ee=(yield pt()).transaction(jn,"readwrite"),ue=ee.objectStore(jn),Pe=yield ue.get(R);return yield ue.put(T,R),yield ee.done,(!Pe||Pe.fid!==T.fid)&&Qt(b,T.fid),T})).apply(this,arguments)}function Yt(b){return or.apply(this,arguments)}function or(){return(or=(0,P.Z)(function*(b){const T=Bn(b),U=(yield pt()).transaction(jn,"readwrite");yield U.objectStore(jn).delete(T),yield U.done})).apply(this,arguments)}function Ur(b,T){return ar.apply(this,arguments)}function ar(){return(ar=(0,P.Z)(function*(b,T){const R=Bn(b),ee=(yield pt()).transaction(jn,"readwrite"),ue=ee.objectStore(jn),Pe=yield ue.get(R),Ke=T(Pe);return void 0===Ke?yield ue.delete(R):yield ue.put(Ke,R),yield ee.done,Ke&&(!Pe||Pe.fid!==Ke.fid)&&Qt(b,Ke.fid),Ke})).apply(this,arguments)}function Cn(b){return ur.apply(this,arguments)}function ur(){return(ur=(0,P.Z)(function*(b){let T;const R=yield Ur(b.appConfig,U=>{const ee=ss(U),ue=zt(b,ee);return T=ue.registrationPromise,ue.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function ss(b){return Vr(b||{fid:qe(),registrationStatus:0})}function zt(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(et.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function Ze(b,T){return ct.apply(this,arguments)}(b,R);return{installationEntry:R,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Ti(b)}:{installationEntry:T}}function ct(){return(ct=(0,P.Z)(function*(b,T){try{const R=yield ve(b,T);return Fr(b.appConfig,R)}catch(R){throw Xe(R)&&409===R.customData.serverCode?yield Yt(b.appConfig):yield Fr(b.appConfig,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Ti(b){return lr.apply(this,arguments)}function lr(){return(lr=(0,P.Z)(function*(b){let T=yield Rt(b.appConfig);for(;1===T.registrationStatus;)yield je(100),T=yield Rt(b.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Cn(b);return U||R}return T})).apply(this,arguments)}function Rt(b){return Ur(b,T=>{if(!T)throw et.create("installation-not-found");return Vr(T)})}function Vr(b){return function bn(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Dn(b,T){return on.apply(this,arguments)}function on(){return(on=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:T},R){const U=Xn(b,R),ee=ye(b,R),ue=T.getImmediate({optional:!0});if(ue){const Pt=yield ue.getHeartbeatsHeader();Pt&&ee.append("x-firebase-client",Pt)}const Ke={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:X,appId:b.appId}})},ft=yield Te(()=>fetch(U,Ke));if(ft.ok)return Oe(yield ft.json());throw yield Ae("Generate Auth Token",ft)})).apply(this,arguments)}function Xn(b,{fid:T}){return`${Ve(b)}/${T}/authTokens:generate`}function G(b){return W.apply(this,arguments)}function W(){return(W=(0,P.Z)(function*(b,T=!1){let R;const U=yield Ur(b.appConfig,ue=>{if(!Ct(ue))throw et.create("not-registered");const Pe=ue.authToken;if(!T&&an(Pe))return ue;if(1===Pe.requestStatus)return R=j(b,T),ue;{if(!navigator.onLine)throw et.create("app-offline");const Ke=cr(ue);return R=Le(b,Ke),Ke}});return R?yield R:U.authToken})).apply(this,arguments)}function j(b,T){return K.apply(this,arguments)}function K(){return(K=(0,P.Z)(function*(b,T){let R=yield Z(b.appConfig);for(;1===R.authToken.requestStatus;)yield je(100),R=yield Z(b.appConfig);const U=R.authToken;return 0===U.requestStatus?G(b,T):U})).apply(this,arguments)}function Z(b){return Ur(b,T=>{if(!Ct(T))throw et.create("not-registered");return function te(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Le(b,T){return We.apply(this,arguments)}function We(){return(We=(0,P.Z)(function*(b,T){try{const R=yield Dn(b,T),U=Object.assign(Object.assign({},T),{authToken:R});return yield Fr(b.appConfig,U),R}catch(R){if(!Xe(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Fr(b.appConfig,U)}else yield Yt(b.appConfig);throw R}})).apply(this,arguments)}function Ct(b){return void 0!==b&&2===b.registrationStatus}function an(b){return 2===b.requestStatus&&!function Xt(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function cr(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function H(){return(H=(0,P.Z)(function*(b){const T=b,{installationEntry:R,registrationPromise:U}=yield Cn(T);return U?U.catch(console.error):G(T).catch(console.error),R.fid})).apply(this,arguments)}function Ge(){return(Ge=(0,P.Z)(function*(b,T=!1){const R=b;return yield Et(R),(yield G(R,T)).token})).apply(this,arguments)}function Et(b){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,P.Z)(function*(b){const{registrationPromise:T}=yield Cn(b);T&&(yield T)})).apply(this,arguments)}function Hi(b){return et.create("missing-app-config-values",{valueName:b})}const Lt="installations",ao=b=>{const T=b.getProvider("app").getImmediate(),R=function Vo(b){if(!b||!b.options)throw Hi("App Configuration");if(!b.name)throw Hi("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!b.options[R])throw Hi(R);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,oe._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Ta=b=>{const T=b.getProvider("app").getImmediate(),R=(0,oe._getProvider)(T,Lt).getImmediate();return{getId:()=>function $(b){return H.apply(this,arguments)}(R),getToken:ee=>function Ie(b){return Ge.apply(this,arguments)}(R,ee)}};(function Ns(){(0,oe._registerComponent)(new _e.wA(Lt,ao,"PUBLIC")),(0,oe._registerComponent)(new _e.wA("installations-internal",Ta,"PRIVATE"))})(),(0,oe.registerVersion)(we,q),(0,oe.registerVersion)(we,q,"esm2017");const hr="@firebase/remote-config",Er=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Al{constructor(T,R,U,ee){this.client=T,this.storage=R,this.storageCache=U,this.logger=ee}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,ee=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${ee}.`),ee}fetch(T){var R=this;return(0,P.Z)(function*(){const[U,ee]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(ee&&R.isCachedDataFresh(T.cacheMaxAgeMillis,U))return ee;T.eTag=ee&&ee.eTag;const ue=yield R.client.fetch(T),Pe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Pe.push(R.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Pe),ue})()}}function Du(b=navigator){return b.languages&&b.languages[0]||b.language}class Os{constructor(T,R,U,ee,ue,Pe){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=U,this.projectId=ee,this.apiKey=ue,this.appId=Pe}fetch(T){var R=this;return(0,P.Z)(function*(){var U,ee,ue;const[Pe,Ke]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Pt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ft={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},mt={sdk_version:R.sdkVersion,app_instance_id:Pe,app_instance_id_token:Ke,app_id:R.appId,language_code:Du()},Ln={method:"POST",headers:Ft,body:JSON.stringify(mt)},$r=fetch(Pt,Ln),Ya=new Promise((qs,_i)=>{T.signal.addEventListener(()=>{const Qa=new Error("The operation was aborted.");Qa.name="AbortError",_i(Qa)})});let oa;try{yield Promise.race([$r,Ya]),oa=yield $r}catch(qs){let _i="fetch-client-network";throw"AbortError"===(null===(U=qs)||void 0===U?void 0:U.name)&&(_i="fetch-timeout"),Er.create(_i,{originalErrorMessage:null===(ee=qs)||void 0===ee?void 0:ee.message})}let Mi=oa.status;const aa=oa.headers.get("ETag")||void 0;let To,So;if(200===oa.status){let qs;try{qs=yield oa.json()}catch(_i){throw Er.create("fetch-client-parse",{originalErrorMessage:null===(ue=_i)||void 0===ue?void 0:ue.message})}To=qs.entries,So=qs.state}if("INSTANCE_STATE_UNSPECIFIED"===So?Mi=500:"NO_CHANGE"===So?Mi=304:("NO_TEMPLATE"===So||"EMPTY_CONFIG"===So)&&(To={}),304!==Mi&&200!==Mi)throw Er.create("fetch-status",{httpStatus:Mi});return{status:Mi,eTag:aa,config:To}})()}}class as{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,P.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:U}){var ee=this;return(0,P.Z)(function*(){yield function Xh(b,T){return new Promise((R,U)=>{const ee=Math.max(T-Date.now(),0),ue=setTimeout(R,ee);b.addEventListener(()=>{clearTimeout(ue),U(Er.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const ue=yield ee.client.fetch(T);return yield ee.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function Wi(b){if(!(b instanceof ce.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ue))throw ue;const Pe={throttleEndTimeMillis:Date.now()+(0,ce.$s)(U),backoffCount:U+1};return yield ee.storage.setThrottleMetadata(Pe),ee.attemptFetch(T,Pe)}})()}}class sg{constructor(T,R,U,ee,ue){this.app=T,this._client=R,this._storageCache=U,this._storage=ee,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Aa(b,T){var R;const U=b.target.error||void 0;return Er.create(T,{originalErrorMessage:U&&(null===(R=U)||void 0===R?void 0:R.message)})}const jo="app_namespace_store";class sd{constructor(T,R,U,ee=function ag(){return new Promise((b,T)=>{var R;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=ee=>{T(Aa(ee,"storage-open"))},U.onsuccess=ee=>{b(ee.target.result)},U.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(jo,{keyPath:"compositeKey"})}}catch(U){T(Er.create("storage-open",{originalErrorMessage:null===(R=U)||void 0===R?void 0:R.message}))}})}()){this.appId=T,this.appName=R,this.namespace=U,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,P.Z)(function*(){const U=yield R.openDbPromise;return new Promise((ee,ue)=>{var Pe;const ft=U.transaction([jo],"readonly").objectStore(jo),Pt=R.createCompositeKey(T);try{const Ft=ft.get(Pt);Ft.onerror=mt=>{ue(Aa(mt,"storage-get"))},Ft.onsuccess=mt=>{const Ln=mt.target.result;ee(Ln?Ln.value:void 0)}}catch(Ft){ue(Er.create("storage-get",{originalErrorMessage:null===(Pe=Ft)||void 0===Pe?void 0:Pe.message}))}})})()}set(T,R){var U=this;return(0,P.Z)(function*(){const ee=yield U.openDbPromise;return new Promise((ue,Pe)=>{var Ke;const Pt=ee.transaction([jo],"readwrite").objectStore(jo),Ft=U.createCompositeKey(T);try{const mt=Pt.put({compositeKey:Ft,value:R});mt.onerror=Ln=>{Pe(Aa(Ln,"storage-set"))},mt.onsuccess=()=>{ue()}}catch(mt){Pe(Er.create("storage-set",{originalErrorMessage:null===(Ke=mt)||void 0===Ke?void 0:Ke.message}))}})})()}delete(T){var R=this;return(0,P.Z)(function*(){const U=yield R.openDbPromise;return new Promise((ee,ue)=>{var Pe;const ft=U.transaction([jo],"readwrite").objectStore(jo),Pt=R.createCompositeKey(T);try{const Ft=ft.delete(Pt);Ft.onerror=mt=>{ue(Aa(mt,"storage-delete"))},Ft.onsuccess=()=>{ee()}}catch(Ft){ue(Er.create("storage-delete",{originalErrorMessage:null===(Pe=Ft)||void 0===Pe?void 0:Pe.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Ls{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,P.Z)(function*(){const R=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),ee=T.storage.getActiveConfig(),ue=yield R;ue&&(T.lastFetchStatus=ue);const Pe=yield U;Pe&&(T.lastSuccessfulFetchTimestampMillis=Pe);const Ke=yield ee;Ke&&(T.activeConfig=Ke)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function F_(){return Si.apply(this,arguments)}function Si(){return(Si=(0,P.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function xl(){(0,oe._registerComponent)(new _e.wA("remote-config",function b(T,{instanceIdentifier:R}){const U=T.getProvider("app").getImmediate(),ee=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Er.create("registration-window");if(!(0,ce.hl)())throw Er.create("indexed-db-unavailable");const{projectId:ue,apiKey:Pe,appId:Ke}=U.options;if(!ue)throw Er.create("registration-project-id");if(!Pe)throw Er.create("registration-api-key");if(!Ke)throw Er.create("registration-app-id");const ft=new sd(Ke,U.name,R=R||"firebase"),Pt=new Ls(ft),Ft=new ge.Yd(hr);Ft.logLevel=ge.in.ERROR;const mt=new Os(ee,oe.SDK_VERSION,R,ue,Pe,Ke),Ln=new as(mt,ft),$r=new Al(Ln,ft,Pt,Ft),Ya=new sg(U,$r,Pt,ft,Ft);return function Tl(b){const T=(0,ce.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Ya),Ya},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(hr,"0.3.11"),(0,oe.registerVersion)(hr,"0.3.11","esm2017")}();const us="/firebase-messaging-sw.js",ls="/firebase-cloud-messaging-push-scope",ho="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",od="google.c.a.c_id",Tu="google.c.a.c_l",Su="google.c.a.ts",Ho="google.c.a.e";var cs=(()=>{return(b=cs||(cs={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",cs;var b})();function $n(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Au(b){const R=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),ee=new Uint8Array(U.length);for(let ue=0;ue<U.length;++ue)ee[ue]=U.charCodeAt(ue);return ee}const xa="fcm_token_details_db",ad="fcm_token_object_Store";function nf(b){return Rn.apply(this,arguments)}function Rn(){return Rn=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(xa))return null;let T=null;return(yield(0,fe.X3)(xa,5,{upgrade:(U=(0,P.Z)(function*(ee,ue,Pe,Ke){var ft;if(ue<2||!ee.objectStoreNames.contains(ad))return;const Pt=Ke.objectStore(ad),Ft=yield Pt.index("fcmSenderId").get(b);if(yield Pt.clear(),Ft)if(2===ue){const mt=Ft;if(!mt.auth||!mt.p256dh||!mt.endpoint)return;T={token:mt.fcmToken,createTime:null!==(ft=mt.createTime)&&void 0!==ft?ft:Date.now(),subscriptionOptions:{auth:mt.auth,p256dh:mt.p256dh,endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:"string"==typeof mt.vapidKey?mt.vapidKey:$n(mt.vapidKey)}}}else if(3===ue){const mt=Ft;T={token:mt.fcmToken,createTime:mt.createTime,subscriptionOptions:{auth:$n(mt.auth),p256dh:$n(mt.p256dh),endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:$n(mt.vapidKey)}}}else if(4===ue){const mt=Ft;T={token:mt.fcmToken,createTime:mt.createTime,subscriptionOptions:{auth:$n(mt.auth),p256dh:$n(mt.p256dh),endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:$n(mt.vapidKey)}}}}),function(ue,Pe,Ke,ft){return U.apply(this,arguments)})})).close(),yield(0,fe.Lj)(xa),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Rl(T)?T:null;var U}),Rn.apply(this,arguments)}function Rl(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const fr="firebase-messaging-store";let Go=null;function fo(){return Go||(Go=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(fr)}})),Go}function Fs(b){return pr.apply(this,arguments)}function pr(){return(pr=(0,P.Z)(function*(b){const T=ds(b),U=yield(yield fo()).transaction(fr).objectStore(fr).get(T);if(U)return U;{const ee=yield nf(b.appConfig.senderId);if(ee)return yield Wo(b,ee),ee}})).apply(this,arguments)}function Wo(b,T){return Us.apply(this,arguments)}function Us(){return(Us=(0,P.Z)(function*(b,T){const R=ds(b),ee=(yield fo()).transaction(fr,"readwrite");return yield ee.objectStore(fr).put(T,R),yield ee.done,T})).apply(this,arguments)}function po(b){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,P.Z)(function*(b){const T=ds(b),U=(yield fo()).transaction(fr,"readwrite");yield U.objectStore(fr).delete(T),yield U.done})).apply(this,arguments)}function ds({appConfig:b}){return b.appId}const lt=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ml(b,T){return xu.apply(this,arguments)}function xu(){return(xu=(0,P.Z)(function*(b,T){var R;const U=yield qo(b),ee=Gt(T),ue={method:"POST",headers:U,body:JSON.stringify(ee)};let Pe;try{Pe=yield(yield fetch(Ru(b.appConfig),ue)).json()}catch(Ke){throw lt.create("token-subscribe-failed",{errorInfo:null===(R=Ke)||void 0===R?void 0:R.toString()})}if(Pe.error)throw lt.create("token-subscribe-failed",{errorInfo:Pe.error.message});if(!Pe.token)throw lt.create("token-subscribe-no-token");return Pe.token})).apply(this,arguments)}function ud(b,T){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,P.Z)(function*(b,T){var R;const U=yield qo(b),ee=Gt(T.subscriptionOptions),ue={method:"PATCH",headers:U,body:JSON.stringify(ee)};let Pe;try{Pe=yield(yield fetch(`${Ru(b.appConfig)}/${T.token}`,ue)).json()}catch(Ke){throw lt.create("token-update-failed",{errorInfo:null===(R=Ke)||void 0===R?void 0:R.toString()})}if(Pe.error)throw lt.create("token-update-failed",{errorInfo:Pe.error.message});if(!Pe.token)throw lt.create("token-update-no-token");return Pe.token})).apply(this,arguments)}function Na(b,T){return hs.apply(this,arguments)}function hs(){return(hs=(0,P.Z)(function*(b,T){var R;const ee={method:"DELETE",headers:yield qo(b)};try{const Pe=yield(yield fetch(`${Ru(b.appConfig)}/${T}`,ee)).json();if(Pe.error)throw lt.create("token-unsubscribe-failed",{errorInfo:Pe.error.message})}catch(ue){throw lt.create("token-unsubscribe-failed",{errorInfo:null===(R=ue)||void 0===R?void 0:R.toString()})}})).apply(this,arguments)}function Ru({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function qo(b){return Me.apply(this,arguments)}function Me(){return(Me=(0,P.Z)(function*({appConfig:b,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function Gt({p256dh:b,auth:T,endpoint:R,vapidKey:U}){const ee={web:{endpoint:R,auth:T,p256dh:b}};return U!==ho&&(ee.web.applicationPubKey=U),ee}const go=6048e5;function Mu(b){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,P.Z)(function*(b){const T=yield ld(b.swRegistration,b.vapidKey),R={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:$n(T.getKey("auth")),p256dh:$n(T.getKey("p256dh"))},U=yield Fs(b.firebaseDependencies);if(U){if(Ko(U.subscriptionOptions,R))return Date.now()>=U.createTime+go?zi(b,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield Na(b.firebaseDependencies,U.token)}catch(ee){console.warn(ee)}return Pa(b.firebaseDependencies,R)}return Pa(b.firebaseDependencies,R)})).apply(this,arguments)}function Nu(b){return fs.apply(this,arguments)}function fs(){return(fs=(0,P.Z)(function*(b){const T=yield Fs(b.firebaseDependencies);T&&(yield Na(b.firebaseDependencies,T.token),yield po(b.firebaseDependencies));const R=yield b.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function zi(b,T){return mo.apply(this,arguments)}function mo(){return(mo=(0,P.Z)(function*(b,T){try{const R=yield ud(b.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield Wo(b.firebaseDependencies,U),R}catch(R){throw yield Nu(b),R}})).apply(this,arguments)}function Pa(b,T){return _o.apply(this,arguments)}function _o(){return(_o=(0,P.Z)(function*(b,T){const U={token:yield Ml(b,T),createTime:Date.now(),subscriptionOptions:T};return yield Wo(b,U),U.token})).apply(this,arguments)}function ld(b,T){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,P.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Au(T)})})).apply(this,arguments)}function Ko(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function Wn(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function ps(b,T){if(!T.notification)return;b.notification={};const R=T.notification.title;R&&(b.notification.title=R);const U=T.notification.body;U&&(b.notification.body=U);const ee=T.notification.image;ee&&(b.notification.image=ee)}(T,b),function Pl(b,T){!T.data||(b.data=T.data)}(T,b),function gs(b,T){var R,U,ee,ue,Pe;if(!(T.fcmOptions||null!==(R=T.notification)&&void 0!==R&&R.click_action))return;b.fcmOptions={};const Ke=null!==(ee=null===(U=T.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==ee?ee:null===(ue=T.notification)||void 0===ue?void 0:ue.click_action;Ke&&(b.fcmOptions.link=Ke);const ft=null===(Pe=T.fcmOptions)||void 0===Pe?void 0:Pe.analytics_label;ft&&(b.fcmOptions.analyticsLabel=ft)}(T,b),T}function ms(b){return"object"==typeof b&&!!b&&od in b}function cd(b,T){const R=[];for(let U=0;U<b.length;U++)R.push(b.charAt(U)),U<T.length&&R.push(T.charAt(U));return R.join("")}function ku(b){return lt.create("missing-app-config-values",{valueName:b})}cd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),cd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class kl{constructor(T,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function Pu(b){if(!b||!b.options)throw ku("App Configuration Object");if(!b.name)throw ku("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=b;for(const U of T)if(!R[U])throw ku(U);return{appName:b.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:ee,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Ou(b){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,P.Z)(function*(b){var T;try{b.swRegistration=yield navigator.serviceWorker.register(us,{scope:ls}),b.swRegistration.update().catch(()=>{})}catch(R){throw lt.create("failed-service-worker-registration",{browserErrorMessage:null===(T=R)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function dd(b,T){return yo.apply(this,arguments)}function yo(){return(yo=(0,P.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield Ou(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw lt.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function rf(b,T){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,P.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=ho)})).apply(this,arguments)}function ka(){return(ka=(0,P.Z)(function*(b,T){if(!navigator)throw lt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw lt.create("permission-blocked");return yield rf(b,T?.vapidKey),yield dd(b,T?.serviceWorkerRegistration),Mu(b)})).apply(this,arguments)}function hd(b,T,R){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,P.Z)(function*(b,T,R){const U=fd(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[od],message_name:R[Tu],message_time:R[Su],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function fd(b){switch(b){case cs.NOTIFICATION_CLICKED:return"notification_open";case cs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fu(){return(Fu=(0,P.Z)(function*(b,T){const R=T.data;if(!R.isFirebaseMessaging)return;b.onMessageHandler&&R.messageType===cs.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Wn(R)):b.onMessageHandler.next(Wn(R)));const U=R.data;ms(U)&&"1"===U[Ho]&&(yield hd(b,R.messageType,U))})).apply(this,arguments)}const Oa="@firebase/messaging",Kr=b=>{const T=new kl(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Lu(b,T){return Fu.apply(this,arguments)}(T,R)),T},Mn=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:U=>function Ol(b,T){return ka.apply(this,arguments)}(T,U)}};function pd(){return gd.apply(this,arguments)}function gd(){return(gd=(0,P.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function lg(){(0,oe._registerComponent)(new _e.wA("messaging",Kr,"PUBLIC")),(0,oe._registerComponent)(new _e.wA("messaging-internal",Mn,"PRIVATE")),(0,oe.registerVersion)(Oa,"0.9.16"),(0,oe.registerVersion)(Oa,"0.9.16","esm2017")}();const Ll="analytics",wo="firebase_id",yd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",La="https://www.googletagmanager.com/gtag/js",gr=new ge.Yd("@firebase/analytics");function vd(b){return Promise.all(b.map(T=>T.catch(R=>R)))}function dg(b,T){const R=document.createElement("script");R.src=`${La}?l=${b}&id=${T}`,R.async=!0,document.head.appendChild(R)}function uf(b,T,R,U,ee,ue){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,P.Z)(function*(b,T,R,U,ee,ue){const Pe=U[ee];try{if(Pe)yield T[Pe];else{const ft=(yield vd(R)).find(Pt=>Pt.measurementId===ee);ft&&(yield T[ft.appId])}}catch(Ke){gr.error(Ke)}b("config",ee,ue)})).apply(this,arguments)}function Bu(b,T,R,U,ee){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,P.Z)(function*(b,T,R,U,ee){try{let ue=[];if(ee&&ee.send_to){let Pe=ee.send_to;Array.isArray(Pe)||(Pe=[Pe]);const Ke=yield vd(R);for(const ft of Pe){const Pt=Ke.find(mt=>mt.measurementId===ft),Ft=Pt&&T[Pt.appId];if(!Ft){ue=[];break}ue.push(Ft)}}0===ue.length&&(ue=Object.values(T)),yield Promise.all(ue),b("event",U,ee||{})}catch(ue){gr.error(ue)}})).apply(this,arguments)}function cf(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(La))return T;return null}const si=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),df=new class Ul{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Va(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function dn(b){return mn.apply(this,arguments)}function mn(){return(mn=(0,P.Z)(function*(b){var T;const{appId:R,apiKey:U}=b,ee={method:"GET",headers:Va(U)},ue=yd.replace("{app-id}",R),Pe=yield fetch(ue,ee);if(200!==Pe.status&&304!==Pe.status){let Ke="";try{const ft=yield Pe.json();null!==(T=ft.error)&&void 0!==T&&T.message&&(Ke=ft.error.message)}catch{}throw si.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:Ke})}return Pe.json()})).apply(this,arguments)}function rt(b){return oi.apply(this,arguments)}function oi(){return(oi=(0,P.Z)(function*(b,T=df,R){const{appId:U,apiKey:ee,measurementId:ue}=b.options;if(!U)throw si.create("no-app-id");if(!ee){if(ue)return{measurementId:ue,appId:U};throw si.create("no-api-key")}const Pe=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new Ba;return setTimeout((0,P.Z)(function*(){Ke.abort()}),void 0!==R?R:6e4),Ar({appId:U,apiKey:ee,measurementId:ue},Pe,Ke,T)})).apply(this,arguments)}function Ar(b,T,R){return xr.apply(this,arguments)}function xr(){return(xr=(0,P.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:R},U,ee=df){var ue,Pe;const{appId:Ke,measurementId:ft}=b;try{yield Vl(U,T)}catch(Pt){if(ft)return gr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${null===(ue=Pt)||void 0===ue?void 0:ue.message}]`),{appId:Ke,measurementId:ft};throw Pt}try{const Pt=yield dn(b);return ee.deleteThrottleMetadata(Ke),Pt}catch(Pt){const Ft=Pt;if(!Gu(Ft)){if(ee.deleteThrottleMetadata(Ke),ft)return gr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${Ft?.message}]`),{appId:Ke,measurementId:ft};throw Pt}const mt=503===Number(null===(Pe=Ft?.customData)||void 0===Pe?void 0:Pe.httpStatus)?(0,ce.$s)(R,ee.intervalMillis,30):(0,ce.$s)(R,ee.intervalMillis),Ln={throttleEndTimeMillis:Date.now()+mt,backoffCount:R+1};return ee.setThrottleMetadata(Ke,Ln),gr.debug(`Calling attemptFetch again in ${mt} millis`),Ar(b,Ln,U,ee)}})).apply(this,arguments)}function Vl(b,T){return new Promise((R,U)=>{const ee=Math.max(T-Date.now(),0),ue=setTimeout(R,ee);b.addEventListener(()=>{clearTimeout(ue),U(si.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Gu(b){if(!(b instanceof ce.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Ba{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Bl,qi;function $a(){return($a=(0,P.Z)(function*(b,T,R,U,ee){if(ee&&ee.global)b("event",R,U);else{const ue=yield T;b("event",R,Object.assign(Object.assign({},U),{send_to:ue}))}})).apply(this,arguments)}function Ed(b){qi=b}function jl(b){Bl=b}function Jo(){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,P.Z)(function*(){var b;if(!(0,ce.hl)())return gr.warn(si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(T){return gr.warn(si.create("indexeddb-unavailable",{errorInfo:null===(b=T)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function Hs(){return(Hs=(0,P.Z)(function*(b,T,R,U,ee,ue,Pe){var Ke;const ft=rt(b);ft.then($r=>{R[$r.measurementId]=$r.appId,b.options.measurementId&&$r.measurementId!==b.options.measurementId&&gr.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${$r.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($r=>gr.error($r)),T.push(ft);const Pt=Jo().then($r=>{if($r)return U.getId()}),[Ft,mt]=yield Promise.all([ft,Pt]);cf()||dg(ue,Ft.measurementId),qi&&(ee("consent","default",qi),Ed(void 0)),ee("js",new Date);const Ln=null!==(Ke=Pe?.config)&&void 0!==Ke?Ke:{};return Ln.origin="firebase",Ln.update=!0,null!=mt&&(Ln[wo]=mt),ee("config",Ft.measurementId,Ln),Bl&&(ee("set",Bl),jl(void 0)),Ft.measurementId})).apply(this,arguments)}class Eo{constructor(T){this.app=T}_delete(){return delete Rr[this.app.options.appId],Promise.resolve()}}let Rr={},ys=[];const Gs={};let Co,ai,Io="dataLayer",Mt=!1;function Pn(b,T,R){!function ff(){const b=[];if((0,ce.ru)()&&b.push("This is a browser extension environment."),(0,ce.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((U,ee)=>`(${ee+1}) ${U}`).join(" "),R=si.create("invalid-analytics-context",{errorInfo:T});gr.warn(R.message)}}();const U=b.options.appId;if(!U)throw si.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw si.create("no-api-key");gr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Rr[U])throw si.create("already-exists",{id:U});if(!Mt){!function wd(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(Io);const{wrappedGtag:ue,gtagCore:Pe}=function lf(b,T,R,U,ee){let ue=function(...Pe){window[U].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(ue=window[ee]),window[ee]=function Fl(b,T,R,U){function ue(){return(ue=(0,P.Z)(function*(Pe,Ke,ft){try{"event"===Pe?yield Bu(b,T,R,Ke,ft):"config"===Pe?yield uf(b,T,R,U,Ke,ft):"consent"===Pe?b("consent","update",ft):b("set",Ke)}catch(Pt){gr.error(Pt)}})).apply(this,arguments)}return function ee(Pe,Ke,ft){return ue.apply(this,arguments)}}(ue,b,T,R),{gtagCore:ue,wrappedGtag:window[ee]}}(Rr,ys,Gs,Io,"gtag");ai=ue,Co=Pe,Mt=!0}return Rr[U]=function zu(b,T,R,U,ee,ue,Pe){return Hs.apply(this,arguments)}(b,ys,Gs,T,Co,Io,R),new Eo(b)}function Ki(){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,P.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const qu="@firebase/analytics";!function ui(){(0,oe._registerComponent)(new _e.wA(Ll,(T,{options:R})=>Pn(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,oe._registerComponent)(new _e.wA("analytics-internal",function b(T){try{const R=T.getProvider(Ll).getImmediate();return{logEvent:(U,ee,ue)=>function kn(b,T,R,U){b=(0,ce.m9)(b),function ja(b,T,R,U,ee){return $a.apply(this,arguments)}(ai,Rr[b.app.options.appId],T,R,U).catch(ee=>gr.error(ee))}(R,U,ee,ue)}}catch(R){throw si.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,oe.registerVersion)(qu,"0.8.0"),(0,oe.registerVersion)(qu,"0.8.0","esm2017")}();var Gl=L(4408),zs=L(7565);const Bt=new class ta extends zs.v{}(class ea extends Gl.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,R,U):T.flush(this)}});var Ga=L(4986),na=L(8505),Wa=L(5363),On=L(9468);const Ku=new m.GfV("7.4.1"),vs="__angularfire_symbol__analyticsIsSupportedValue",za="__angularfire_symbol__analyticsIsSupported",Zu="__angularfire_symbol__remoteConfigIsSupportedValue",rr="__angularfire_symbol__remoteConfigIsSupported",Ri="__angularfire_symbol__messagingIsSupportedValue",Do="__angularfire_symbol__messagingIsSupported";function ra(b,T,R){if(T){if(1===T.length)return T[0];const ue=T.filter(Pe=>Pe.app===R);if(1===ue.length)return ue[0]}return R.container.getProvider(b).getImmediate({optional:!0})}globalThis[za]||(globalThis[za]=Ki().then(b=>globalThis[vs]=b).catch(()=>globalThis[vs]=!1)),globalThis[Do]||(globalThis[Do]=pd().then(b=>globalThis[Ri]=b).catch(()=>globalThis[Ri]=!1)),globalThis[rr]||(globalThis[rr]=F_().then(b=>globalThis[Zu]=b).catch(()=>globalThis[Zu]=!1));const mf=(b,T)=>{const R=T?[T]:(0,B.C6)(),U=[];return R.forEach(ee=>{ee.container.getProvider(b).instances.forEach(Pe=>{U.includes(Pe)||U.push(Pe)})}),U};function Zr(){}class Ka{constructor(T,R=Bt){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,U){const ee=this.zone;return this.delegate.schedule(function(Pe){ee.runGuarded(()=>{T.apply(this,[Pe])})},R,U)}}class Za{constructor(T){this.zone=T,this.task=null}call(T,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zr,{},Zr,Zr)),R.pipe((0,na.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ia=(()=>{class b{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Ka(Zone.current)),this.insideAngular=R.run(()=>new Ka(Zone.current,Ga.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(R){return new(R||b)(m.LFG(m.R0b))},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function jr(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function sa(b){return b.pipe((0,Wa.Q)(jr().outsideAngular))}function zl(b){return jr(),function Hn(b){return function(R){return(R=R.lift(new Za(b.ngZone))).pipe((0,On.R)(b.outsideAngular),(0,Wa.Q)(b.insideAngular))}}(jr())(b)}},6457:(ht,ke,L)=>{L.d(ke,{$:()=>Ru,A:()=>z,B:()=>Ue,G:()=>Ta,H:()=>tr,J:()=>as,L:()=>an,M:()=>Si,N:()=>ef,P:()=>Ga,Q:()=>od,R:()=>_n,T:()=>Tu,U:()=>ho,V:()=>cs,W:()=>$n,X:()=>nf,Y:()=>zo,Z:()=>Ml,_:()=>ud,a:()=>Hu,a0:()=>Mu,a1:()=>Nu,a2:()=>zi,a3:()=>Pa,a4:()=>ld,a5:()=>Ko,a6:()=>ps,a7:()=>Pl,a8:()=>ms,a9:()=>cd,aA:()=>$r,aB:()=>ft,aC:()=>sa,aD:()=>gi,aE:()=>er,aI:()=>Va,aL:()=>Ho,aa:()=>Ou,ab:()=>dd,ac:()=>rf,af:()=>hd,ag:()=>fd,ah:()=>Lu,ak:()=>fr,al:()=>Uu,an:()=>La,ao:()=>Fa,ap:()=>cn,aq:()=>Te,ar:()=>Dt,as:()=>Et,at:()=>Xe,au:()=>Zs,av:()=>aa,aw:()=>Ve,ax:()=>ie,ay:()=>se,az:()=>Xt,b:()=>si,c:()=>Ri,d:()=>gf,e:()=>Wl,f:()=>Hn,g:()=>U,h:()=>b,i:()=>Wu,j:()=>Pe,k:()=>gg,l:()=>qn,m:()=>Jl,o:()=>fe,r:()=>Gl,s:()=>Xo,u:()=>Bt});var m=L(5861),B=L(2090),P=L(9681),oe=L(655),ce=L(1877),_e=L(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ue=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Se=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),me=new ce.Yd("@firebase/auth");function et(w,...p){me.logLevel<=ce.in.ERROR&&me.error(`Auth (${P.SDK_VERSION}): ${w}`,...p)}function Xe(w,...p){throw ze(w,...p)}function Ve(w,...p){return ze(w,...p)}function Oe(w,p,_){const I=Object.assign(Object.assign({},Se()),{[p]:_});return new B.LL("auth","Firebase",I).create(p,{appName:w.name})}function Ae(w,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Xe(w,"argument-error"),Oe(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(w,...p){if("string"!=typeof w){const _=p[0],I=[...p.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return it.create(w,...p)}function ie(w,p,..._){if(!w)throw ze(p,..._)}function ye(w){const p="INTERNAL ASSERTION FAILED: "+w;throw et(p),new Error(p)}function Te(w,p){w||ye(p)}const J=new Map;function se(w){Te(w instanceof Function,"Expected a class definition");let p=J.get(w);return p?(Te(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,J.set(w,p),p)}function de(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function je(){return"http:"===wt()||"https:"===wt()}function wt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class qe{constructor(p,_){this.shortDelay=p,this.longDelay=_,Te(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Zt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hn(w,p){Te(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Bn{static initialize(p,_,I){this.fetchImpl=p,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qt=new qe(3e4,6e4);function Ht(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function Jt(w,p,_,I){return En.apply(this,arguments)}function En(){return(En=(0,m.Z)(function*(w,p,_,I,x={}){return bi(w,x,(0,m.Z)(function*(){let O={},ne={};I&&("GET"===p?ne=I:O={body:JSON.stringify(I)});const Re=(0,B.xO)(Object.assign({key:w.config.apiKey},ne)).slice(1),nt=yield w._getAdditionalHeaders();return nt["Content-Type"]="application/json",w.languageCode&&(nt["X-Firebase-Locale"]=w.languageCode),Bn.fetch()(hi(w,w.config.apiHost,_,Re),Object.assign({method:p,headers:nt,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function bi(w,p,_){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,m.Z)(function*(w,p,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},fn),p);try{const x=new Di(w),O=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const ne=yield O.json();if("needConfirmation"in ne)throw jn(w,"account-exists-with-different-credential",ne);if(O.ok&&!("errorMessage"in ne))return ne;{const Re=O.ok?ne.errorMessage:ne.error.message,[nt,dt]=Re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw jn(w,"credential-already-in-use",ne);if("EMAIL_EXISTS"===nt)throw jn(w,"email-already-in-use",ne);if("USER_DISABLED"===nt)throw jn(w,"user-disabled",ne);const At=I[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(dt)throw Oe(w,At,dt);Xe(w,At)}}catch(x){if(x instanceof B.ZR)throw x;Xe(w,"network-request-failed")}})).apply(this,arguments)}function xn(w,p,_,I){return is.apply(this,arguments)}function is(){return(is=(0,m.Z)(function*(w,p,_,I,x={}){const O=yield Jt(w,p,_,I,x);return"mfaPendingCredential"in O&&Xe(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function hi(w,p,_,I){const x=`${p}${_}?${I}`;return w.config.emulator?hn(w.config,x):`${w.config.apiScheme}://${x}`}class Di{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Ve(this.auth,"network-request-failed")),Qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jn(w,p,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const x=Ve(w,p,I);return x.customData._tokenResponse=_,x}function pt(){return(pt=(0,m.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Fr(w,p){return In.apply(this,arguments)}function In(){return(In=(0,m.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Yt(w,p){return or.apply(this,arguments)}function or(){return(or=(0,m.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Ur(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function ur(){return(ur=(0,m.Z)(function*(w,p=!1){const _=(0,B.m9)(w),I=yield _.getIdToken(p),x=zt(I);ie(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,ne=O?.sign_in_provider;return{claims:x,token:I,authTime:Ur(ss(x.auth_time)),issuedAtTime:Ur(ss(x.iat)),expirationTime:Ur(ss(x.exp)),signInProvider:ne||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function ss(w){return 1e3*Number(w)}function zt(w){var p;const[_,I,x]=w.split(".");if(void 0===_||void 0===I||void 0===x)return et("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,B.tV)(I);return O?JSON.parse(O):(et("Failed to decode base64 JWT payload"),null)}catch(O){return et("Caught error parsing JWT payload as JSON",null===(p=O)||void 0===p?void 0:p.toString()),null}}function ct(w,p){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,m.Z)(function*(w,p,_=!1){if(_)return p;try{return yield p}catch(I){throw I instanceof B.ZR&&lr(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function lr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Rt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(p);this.timerId=setTimeout((0,m.Z)(function*(){yield _.iteration()}),I)}iteration(){var p=this;return(0,m.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null===(_=I)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class Vr{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ur(this.lastLoginAt),this.creationTime=Ur(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function bn(w){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,m.Z)(function*(w){var p;const _=w.auth,I=yield w.getIdToken(),x=yield ct(w,Yt(_,{idToken:I}));ie(x?.users.length,_,"internal-error");const O=x.users[0];w._notifyReloadListener(O);const ne=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?W(O.providerUserInfo):[],Re=G(w.providerData,ne),At=!!w.isAnonymous&&!(w.email&&O.passwordHash||Re?.length),Sn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:Re,metadata:new Vr(O.createdAt,O.lastLoginAt),isAnonymous:At};Object.assign(w,Sn)})).apply(this,arguments)}function Xn(){return(Xn=(0,m.Z)(function*(w){const p=(0,B.m9)(w);yield bn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function G(w,p){return[...w.filter(I=>!p.some(x=>x.providerId===I.providerId)),...p]}function W(w){return w.map(p=>{var{providerId:_}=p,I=(0,oe._T)(p,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function K(){return(K=(0,m.Z)(function*(w,p){const _=yield bi(w,{},(0,m.Z)(function*(){const I=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:O}=w.config,ne=hi(w,x,"/v1/token",`key=${O}`),Re=yield w._getAdditionalHeaders();return Re["Content-Type"]="application/x-www-form-urlencoded",Bn.fetch()(ne,{method:"POST",headers:Re,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ie(p.idToken,"internal-error"),ie(typeof p.idToken<"u","internal-error"),ie(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Ze(w){const p=zt(w);return ie(p,"internal-error"),ie(typeof p.exp<"u","internal-error"),ie(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var I=this;return(0,m.Z)(function*(){return ie(!I.accessToken||I.refreshToken,p,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(p,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var I=this;return(0,m.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:ne}=yield function j(w,p){return K.apply(this,arguments)}(p,_);I.updateTokensAndExpiration(x,O,Number(ne))})()}updateTokensAndExpiration(p,_,I){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(p,_){const{refreshToken:I,accessToken:x,expirationTime:O}=_,ne=new Z;return I&&(ie("string"==typeof I,"internal-error",{appName:p}),ne.refreshToken=I),x&&(ie("string"==typeof x,"internal-error",{appName:p}),ne.accessToken=x),O&&(ie("number"==typeof O,"internal-error",{appName:p}),ne.expirationTime=O),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Le(w,p){ie("string"==typeof w||typeof w>"u","internal-error",{appName:p})}class We{constructor(p){var{uid:_,auth:I,stsTokenManager:x}=p,O=(0,oe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Vr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,m.Z)(function*(){const I=yield ct(_,_.stsTokenManager.getToken(_.auth,p));return ie(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(p){return function Cn(w){return ur.apply(this,arguments)}(this,p)}reload(){return function on(w){return Xn.apply(this,arguments)}(this)}_assign(p){this!==p&&(ie(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new We(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var I=this;return(0,m.Z)(function*(){let x=!1;p.idToken&&p.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(p),x=!0),_&&(yield bn(I)),yield I.auth._persistUserIfCurrent(I),x&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var p=this;return(0,m.Z)(function*(){const _=yield p.getIdToken();return yield ct(p,function $i(w,p){return pt.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var I,x,O,ne,Re,nt,dt,At;const Sn=null!==(I=_.displayName)&&void 0!==I?I:void 0,ws=null!==(x=_.email)&&void 0!==x?x:void 0,Zi=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Rd=null!==(ne=_.photoURL)&&void 0!==ne?ne:void 0,wf=null!==(Re=_.tenantId)&&void 0!==Re?Re:void 0,Ef=null!==(nt=_._redirectEventId)&&void 0!==nt?nt:void 0,Yu=null!==(dt=_.createdAt)&&void 0!==dt?dt:void 0,Qu=null!==(At=_.lastLoginAt)&&void 0!==At?At:void 0,{uid:Xl,emailVerified:ec,isAnonymous:q_,providerData:Md,stsTokenManager:Nd}=_;ie(Xl&&Nd,p,"internal-error");const _g=Z.fromJSON(this.name,Nd);ie("string"==typeof Xl,p,"internal-error"),Le(Sn,p.name),Le(ws,p.name),ie("boolean"==typeof ec,p,"internal-error"),ie("boolean"==typeof q_,p,"internal-error"),Le(Zi,p.name),Le(Rd,p.name),Le(wf,p.name),Le(Ef,p.name),Le(Yu,p.name),Le(Qu,p.name);const Pd=new We({uid:Xl,auth:p,email:ws,emailVerified:ec,displayName:Sn,isAnonymous:q_,photoURL:Rd,phoneNumber:Zi,tenantId:wf,stsTokenManager:_g,createdAt:Yu,lastLoginAt:Qu});return Md&&Array.isArray(Md)&&(Pd.providerData=Md.map(yg=>Object.assign({},yg))),Ef&&(Pd._redirectEventId=Ef),Pd}static _fromIdTokenResponse(p,_,I=!1){return(0,m.Z)(function*(){const x=new Z;x.updateFromServerResponse(_);const O=new We({uid:_.localId,auth:p,stsTokenManager:x,isAnonymous:I});return yield bn(O),O})()}}const an=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(_,I){var x=this;return(0,m.Z)(function*(){x.storage[_]=I})()}_get(_){var I=this;return(0,m.Z)(function*(){const x=I.storage[_];return void 0===x?null:x})()}_remove(_){var I=this;return(0,m.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function Xt(w,p,_){return`firebase:${w}:${p}:${_}`}class cr{constructor(p,_,I){this.persistence=p,this.auth=_,this.userKey=I;const{config:x,name:O}=this.auth;this.fullUserKey=Xt(this.userKey,x.apiKey,O),this.fullPersistenceKey=Xt("persistence",x.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,m.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?We._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,m.Z)(function*(){if(_.persistence===p)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,I="authUser"){return(0,m.Z)(function*(){if(!_.length)return new cr(se(an),p,I);const x=(yield Promise.all(_.map(function(){var dt=(0,m.Z)(function*(At){if(yield At._isAvailable())return At});return function(At){return dt.apply(this,arguments)}}()))).filter(dt=>dt);let O=x[0]||se(an);const ne=Xt(I,p.config.apiKey,p.name);let Re=null;for(const dt of _)try{const At=yield dt._get(ne);if(At){const Sn=We._fromJSON(p,At);dt!==O&&(Re=Sn),O=dt;break}}catch{}const nt=x.filter(dt=>dt._shouldAllowMigration);return O._shouldAllowMigration&&nt.length?(O=nt[0],Re&&(yield O._set(ne,Re.toJSON())),yield Promise.all(_.map(function(){var dt=(0,m.Z)(function*(At){if(At!==O)try{yield At._remove(ne)}catch{}});return function(At){return dt.apply(this,arguments)}}())),new cr(O,p,I)):new cr(O,p,I)})()}}function te(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ge(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if($(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ne(p))return"Blackberry";if(tt(p))return"Webos";if(H(p))return"Safari";if((p.includes("chrome/")||Ie(p))&&!p.includes("edge/"))return"Chrome";if(Et(p))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function $(w=(0,B.z$)()){return/firefox\//i.test(w)}function H(w=(0,B.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ie(w=(0,B.z$)()){return/crios\//i.test(w)}function Ge(w=(0,B.z$)()){return/iemobile/i.test(w)}function Et(w=(0,B.z$)()){return/android/i.test(w)}function Ne(w=(0,B.z$)()){return/blackberry/i.test(w)}function tt(w=(0,B.z$)()){return/webos/i.test(w)}function Dt(w=(0,B.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function cn(w=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function dr(w=(0,B.z$)()){return Dt(w)||Et(w)||tt(w)||Ne(w)||/windows phone/i.test(w)||Ge(w)}function Vo(w,p=[]){let _;switch(w){case"Browser":_=te((0,B.z$)());break;case"Worker":_=`${te((0,B.z$)())}-${w}`;break;default:_=w}const I=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${P.SDK_VERSION}/${I}`}class Hi{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const I=O=>new Promise((ne,Re)=>{try{ne(p(O))}catch(nt){Re(nt)}});I.onAbort=_,this.queue.push(I);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,m.Z)(function*(){var I;if(_.auth.currentUser===p)return;const x=[];try{for(const O of _.queue)yield O(p),O.onAbort&&x.push(O.onAbort)}catch(O){x.reverse();for(const ne of x)try{ne()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=O)||void 0===I?void 0:I.message})}})()}}class Lt{constructor(p,_,I){this.app=p,this.heartbeatServiceProvider=_,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ao(this),this.idTokenSubscription=new ao(this),this.beforeStateQueue=new Hi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(p,_){var I=this;return _&&(this._popupRedirectResolver=se(_)),this._initializationPromise=this.queue((0,m.Z)(function*(){var x,O;if(!I._deleted&&(I.persistenceManager=yield cr.create(I,p),!I._deleted)){if(null!==(x=I._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(O=I.currentUser)||void 0===O?void 0:O.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,m.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,m.Z)(function*(){var I;const x=yield _.assertedPersistence.getCurrentUser();let O=x,ne=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Re=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,nt=O?._redirectEventId,dt=yield _.tryRedirectSignIn(p);(!Re||Re===nt)&&dt?.user&&(O=dt.user,ne=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(ne)try{yield _.beforeStateQueue.runMiddleware(O)}catch(Re){O=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Re))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return ie(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var _=this;return(0,m.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,m.Z)(function*(){var I;try{yield bn(p)}catch(x){if("auth/network-request-failed"!==(null===(I=x)||void 0===I?void 0:I.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function $t(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,m.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,m.Z)(function*(){const I=p?(0,B.m9)(p):null;return I&&ie(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(p,_=!1){var I=this;return(0,m.Z)(function*(){if(!I._deleted)return p&&ie(I.tenantId===p.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(p)),I.queue((0,m.Z)(function*(){yield I.directlySetCurrentUser(p),I.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,m.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,m.Z)(function*(){yield _.assertedPersistence.setPersistence(se(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,_,I){return this.registerStateListener(this.authStateSubscription,p,_,I)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,I){return this.registerStateListener(this.idTokenSubscription,p,_,I)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var I=this;return(0,m.Z)(function*(){const x=yield I.getOrInitRedirectPersistenceManager(_);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,m.Z)(function*(){if(!_.redirectPersistenceManager){const I=p&&se(p)||_._popupRedirectResolver;ie(I,_,"argument-error"),_.redirectPersistenceManager=yield cr.create(_,[se(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,m.Z)(function*(){var I,x;return _._isInitialized&&(yield _.queue((0,m.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===p?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,m.Z)(function*(){if(p===_.currentUser)return _.queue((0,m.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,I,x){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(ne,this,"internal-error"),ne.then(()=>O(this.currentUser)),"function"==typeof _?p.addObserver(_,I,x):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,m.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Vo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,m.Z)(function*(){var _;const I={"X-Client-Version":p.clientVersion};p.app.options.appId&&(I["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(I["X-Firebase-Client"]=x),I})()}}function er(w){return(0,B.m9)(w)}class ao{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(_=>this.observer=_)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ta(w,p,_){const I=er(w);ie(I._canInitEmulator,I,"emulator-config-failed"),ie(/^https?:\/\//.test(p),I,"invalid-emulator-scheme");const x=!!_?.disableWarnings,O=Ns(p),{host:ne,port:Re}=function hr(w){const p=Ns(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(I);if(x){const O=x[1];return{host:O,port:uo(I.substr(O.length+1))}}{const[O,ne]=I.split(":");return{host:O,port:uo(ne)}}}(p);I.config.emulator={url:`${O}//${ne}${null===Re?"":`:${Re}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ne,port:Re,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Ps(){function w(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Ns(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function uo(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class tr{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return ye("not implemented")}_getIdTokenResponse(p){return ye("not implemented")}_linkToIdToken(p,_){return ye("not implemented")}_getReauthenticationResolver(p){return ye("not implemented")}}function ks(w,p){return Er.apply(this,arguments)}function Er(){return(Er=(0,m.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:resetPassword",Ht(w,p))})).apply(this,arguments)}function gn(w,p){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,m.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Jh(w,p){return lo.apply(this,arguments)}function lo(){return(lo=(0,m.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:update",Ht(w,p))})).apply(this,arguments)}function Gi(){return(Gi=(0,m.Z)(function*(w,p){return xn(w,"POST","/v1/accounts:signInWithPassword",Ht(w,p))})).apply(this,arguments)}function Bo(w,p){return os.apply(this,arguments)}function os(){return(os=(0,m.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:sendOobCode",Ht(w,p))})).apply(this,arguments)}function nr(w,p){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,m.Z)(function*(w,p){return Bo(w,p)})).apply(this,arguments)}function Sr(w,p){return Br.apply(this,arguments)}function Br(){return(Br=(0,m.Z)(function*(w,p){return Bo(w,p)})).apply(this,arguments)}function Sl(w,p){return co.apply(this,arguments)}function co(){return(co=(0,m.Z)(function*(w,p){return Bo(w,p)})).apply(this,arguments)}function Sa(w,p){return fi.apply(this,arguments)}function fi(){return(fi=(0,m.Z)(function*(w,p){return Bo(w,p)})).apply(this,arguments)}function rg(){return(rg=(0,m.Z)(function*(w,p){return xn(w,"POST","/v1/accounts:signInWithEmailLink",Ht(w,p))})).apply(this,arguments)}function Al(){return(Al=(0,m.Z)(function*(w,p){return xn(w,"POST","/v1/accounts:signInWithEmailLink",Ht(w,p))})).apply(this,arguments)}class Du extends tr{constructor(p,_,I,x=null){super("password",I),this._email=p,this._password=_,this._tenantId=x}static _fromEmailAndPassword(p,_){return new Du(p,_,"password")}static _fromEmailAndCode(p,_,I=null){return new Du(p,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,m.Z)(function*(){switch(_.signInMethod){case"password":return function Cu(w,p){return Gi.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function bu(w,p){return rg.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Xe(p,"internal-error")}})()}_linkToIdToken(p,_){var I=this;return(0,m.Z)(function*(){switch(I.signInMethod){case"password":return gn(p,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function nd(w,p){return Al.apply(this,arguments)}(p,{idToken:_,email:I._email,oobCode:I._password});default:Xe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Os(w,p){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,m.Z)(function*(w,p){return xn(w,"POST","/v1/accounts:signInWithIdp",Ht(w,p))})).apply(this,arguments)}class as extends tr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new as(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Xe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:x}=_,O=(0,oe._T)(_,["providerId","signInMethod"]);if(!I||!x)return null;const ne=new as(I,x);return ne.idToken=O.idToken||void 0,ne.accessToken=O.accessToken||void 0,ne.secret=O.secret,ne.nonce=O.nonce,ne.pendingToken=O.pendingToken||null,ne}_getIdTokenResponse(p){return Os(p,this.buildRequest())}_linkToIdToken(p,_){const I=this.buildRequest();return I.idToken=_,Os(p,I)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Os(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,B.xO)(_)}return p}}function ig(w,p){return rd.apply(this,arguments)}function rd(){return(rd=(0,m.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:sendVerificationCode",Ht(w,p))})).apply(this,arguments)}function Aa(){return(Aa=(0,m.Z)(function*(w,p){return xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ht(w,p))})).apply(this,arguments)}function id(){return(id=(0,m.Z)(function*(w,p){const _=yield xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ht(w,p));if(_.temporaryProof)throw jn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const og={USER_NOT_FOUND:"user-not-found"};function sd(){return(sd=(0,m.Z)(function*(w,p){return xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ht(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),og)})).apply(this,arguments)}class Ls extends tr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Ls({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Ls({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function sg(w,p){return Aa.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function jo(w,p){return id.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ag(w,p){return sd.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:I,verificationCode:x}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:I,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:O}=p;return I||_||x||O?new Ls({verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:O}):null}}class $o{constructor(p){var _,I,x,O,ne,Re;const nt=(0,B.zd)((0,B.pd)(p)),dt=null!==(_=nt.apiKey)&&void 0!==_?_:null,At=null!==(I=nt.oobCode)&&void 0!==I?I:null,Sn=function xl(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=nt.mode)&&void 0!==x?x:null);ie(dt&&At&&Sn,"argument-error"),this.apiKey=dt,this.operation=Sn,this.code=At,this.continueUrl=null!==(O=nt.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(ne=nt.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(Re=nt.tenantId)&&void 0!==Re?Re:null}static parseLink(p){const _=function L_(w){const p=(0,B.zd)((0,B.pd)(w)).link,_=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,I=(0,B.zd)((0,B.pd)(w)).deep_link_id;return(I?(0,B.zd)((0,B.pd)(I)).link:null)||I||_||p||w}(p);try{return new $o(_)}catch{return null}}}let Si=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return Du._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const x=$o.parseLink(I);return ie(x,"argument-error"),Du._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class us{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class ls extends us{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ho extends ls{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return ie("providerId"in _&&"signInMethod"in _,"argument-error"),as._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ie(p.idToken||p.accessToken,"argument-error"),as._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ho.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ho.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:x,pendingToken:O,nonce:ne,providerId:Re}=p;if(!I&&!x&&!_&&!O||!Re)return null;try{return new ho(Re)._credential({idToken:_,accessToken:I,nonce:ne,pendingToken:O})}catch{return null}}}let ef=(()=>{class w extends ls{constructor(){super("facebook.com")}static credential(_){return as._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),od=(()=>{class w extends ls{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return as._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:x}=_;if(!I&&!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Tu=(()=>{class w extends ls{constructor(){super("github.com")}static credential(_){return as._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Ho extends tr{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Os(p,this.buildRequest())}_linkToIdToken(p,_){const I=this.buildRequest();return I.idToken=_,Os(p,I)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Os(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:I,signInMethod:x,pendingToken:O}=_;return I&&x&&O&&I===x?new Ho(I,O):null}static _create(p,_){return new Ho(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class cs extends us{constructor(p){ie(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return cs.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return cs.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=Ho.fromJSON(p);return ie(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:I}=p;if(!_||!I)return null;try{return Ho._create(I,_)}catch{return null}}}let $n=(()=>{class w extends ls{constructor(){super("twitter.com")}static credential(_,I){return as._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:x}=_;if(!I||!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Au(w,p){return xa.apply(this,arguments)}function xa(){return(xa=(0,m.Z)(function*(w,p){return xn(w,"POST","/v1/accounts:signUp",Ht(w,p))})).apply(this,arguments)}class qr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,I,x=!1){return(0,m.Z)(function*(){const O=yield We._fromIdTokenResponse(p,I,x),ne=ad(I);return new qr({user:O,providerId:ne,_tokenResponse:I,operationType:_})})()}static _forOperation(p,_,I){return(0,m.Z)(function*(){yield p._updateTokensIfNecessary(I,!0);const x=ad(I);return new qr({user:p,providerId:x,_tokenResponse:I,operationType:_})})()}}function ad(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function nf(w){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,m.Z)(function*(w){var p;const _=er(w);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new qr({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield Au(_,{returnSecureToken:!0}),x=yield qr._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Rl extends B.ZR{constructor(p,_,I,x){var O;super(_.code,_.message),this.operationType=I,this.user=x,Object.setPrototypeOf(this,Rl.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(p,_,I,x){return new Rl(p,_,I,x)}}function ug(w,p,_,I){return("reauthenticate"===p?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Rl._fromErrorAndOperation(w,O,p,I):O})}function Ra(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function fr(w,p){return Go.apply(this,arguments)}function Go(){return(Go=(0,m.Z)(function*(w,p){const _=(0,B.m9)(w);yield pr(!0,_,p);const{providerUserInfo:I}=yield Fr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),x=Ra(I||[]);return _.providerData=_.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function fo(w,p){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,m.Z)(function*(w,p,_=!1){const I=yield ct(w,p._linkToIdToken(w.auth,yield w.getIdToken()),_);return qr._forOperation(w,"link",I)})).apply(this,arguments)}function pr(w,p,_){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,m.Z)(function*(w,p,_){yield bn(p);const x=!1===w?"provider-already-linked":"no-such-provider";ie(Ra(p.providerData).has(_)===w,p.auth,x)})).apply(this,arguments)}function Us(w,p){return po.apply(this,arguments)}function po(){return(po=(0,m.Z)(function*(w,p,_=!1){var I;const{auth:x}=w,O="reauthenticate";try{const ne=yield ct(w,ug(x,O,p,w),_);ie(ne.idToken,x,"internal-error");const Re=zt(ne.idToken);ie(Re,x,"internal-error");const{sub:nt}=Re;return ie(w.uid===nt,x,"user-mismatch"),qr._forOperation(w,O,ne)}catch(ne){throw"auth/user-not-found"===(null===(I=ne)||void 0===I?void 0:I.code)&&Xe(x,"user-mismatch"),ne}})).apply(this,arguments)}function Ai(w,p){return ds.apply(this,arguments)}function ds(){return(ds=(0,m.Z)(function*(w,p,_=!1){const I="signIn",x=yield ug(w,I,p),O=yield qr._fromIdTokenResponse(w,I,x);return _||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function zo(w,p){return lt.apply(this,arguments)}function lt(){return(lt=(0,m.Z)(function*(w,p){return Ai(er(w),p)})).apply(this,arguments)}function Ml(w,p){return xu.apply(this,arguments)}function xu(){return(xu=(0,m.Z)(function*(w,p){const _=(0,B.m9)(w);return yield pr(!1,_,p.providerId),fo(_,p)})).apply(this,arguments)}function ud(w,p){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,m.Z)(function*(w,p){return Us((0,B.m9)(w),p)})).apply(this,arguments)}function Na(w,p){return hs.apply(this,arguments)}function hs(){return(hs=(0,m.Z)(function*(w,p){return xn(w,"POST","/v1/accounts:signInWithCustomToken",Ht(w,p))})).apply(this,arguments)}function Ru(w,p){return qo.apply(this,arguments)}function qo(){return(qo=(0,m.Z)(function*(w,p){const _=er(w),I=yield Na(_,{token:p,returnSecureToken:!0}),x=yield qr._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Me{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Gt._fromServerResponse(p,_):Xe(p,"internal-error")}}class Gt extends Me{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Gt(_)}}function go(w,p,_){var I;ie((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),ie(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ie(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(ie(_.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Mu(w,p,_){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,m.Z)(function*(w,p,_){const I=(0,B.m9)(w),x={requestType:"PASSWORD_RESET",email:p};_&&go(I,x,_),yield Sr(I,x)})).apply(this,arguments)}function Nu(w,p,_){return fs.apply(this,arguments)}function fs(){return(fs=(0,m.Z)(function*(w,p,_){yield ks((0,B.m9)(w),{oobCode:p,newPassword:_})})).apply(this,arguments)}function zi(w,p){return mo.apply(this,arguments)}function mo(){return(mo=(0,m.Z)(function*(w,p){yield Jh((0,B.m9)(w),{oobCode:p})})).apply(this,arguments)}function Pa(w,p){return _o.apply(this,arguments)}function _o(){return(_o=(0,m.Z)(function*(w,p){const _=(0,B.m9)(w),I=yield ks(_,{oobCode:p}),x=I.requestType;switch(ie(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(I.mfaInfo,_,"internal-error");default:ie(I.email,_,"internal-error")}let O=null;return I.mfaInfo&&(O=Me._fromServerResponse(er(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function ld(w,p){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,m.Z)(function*(w,p){const{data:_}=yield Pa((0,B.m9)(w),p);return _.email})).apply(this,arguments)}function Ko(w,p,_){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,m.Z)(function*(w,p,_){const I=er(w),x=yield Au(I,{returnSecureToken:!0,email:p,password:_}),O=yield qr._fromIdTokenResponse(I,"signIn",x);return yield I._updateCurrentUser(O.user),O})).apply(this,arguments)}function ps(w,p,_){return zo((0,B.m9)(w),Si.credential(p,_))}function Pl(w,p,_){return gs.apply(this,arguments)}function gs(){return(gs=(0,m.Z)(function*(w,p,_){const I=(0,B.m9)(w),x={requestType:"EMAIL_SIGNIN",email:p};ie(_.handleCodeInApp,I,"argument-error"),_&&go(I,x,_),yield Sl(I,x)})).apply(this,arguments)}function ms(w,p){return"EMAIL_SIGNIN"===$o.parseLink(p)?.operation}function cd(w,p,_){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,m.Z)(function*(w,p,_){const I=(0,B.m9)(w),x=Si.credentialWithLink(p,_||de());return ie(x._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),zo(I,x)})).apply(this,arguments)}function ku(w,p){return kl.apply(this,arguments)}function kl(){return(kl=(0,m.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:createAuthUri",Ht(w,p))})).apply(this,arguments)}function Ou(w,p){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,m.Z)(function*(w,p){const I={identifier:p,continueUri:je()?de():"http://localhost"},{signinMethods:x}=yield ku((0,B.m9)(w),I);return x||[]})).apply(this,arguments)}function dd(w,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,m.Z)(function*(w,p){const _=(0,B.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&go(_.auth,x,p);const{email:O}=yield nr(_.auth,x);O!==w.email&&(yield w.reload())})).apply(this,arguments)}function rf(w,p,_){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,m.Z)(function*(w,p,_){const I=(0,B.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};_&&go(I.auth,O,_);const{email:ne}=yield Sa(I.auth,O);ne!==w.email&&(yield w.reload())})).apply(this,arguments)}function Ol(w,p){return ka.apply(this,arguments)}function ka(){return(ka=(0,m.Z)(function*(w,p){return Jt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function hd(w,p){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,m.Z)(function*(w,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const I=(0,B.m9)(w),O={idToken:yield I.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},ne=yield ct(I,Ol(I.auth,O));I.displayName=ne.displayName||null,I.photoURL=ne.photoUrl||null;const Re=I.providerData.find(({providerId:nt})=>"password"===nt);Re&&(Re.displayName=I.displayName,Re.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ne)})).apply(this,arguments)}function fd(w,p){return Fu((0,B.m9)(w),p,null)}function Lu(w,p){return Fu((0,B.m9)(w),null,p)}function Fu(w,p,_){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(w,p,_){const{auth:I}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(O.email=p),_&&(O.password=_);const ne=yield ct(w,gn(I,O));yield w._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class Kr{constructor(p,_,I={}){this.isNewUser=p,this.providerId=_,this.profile=I}}class Mn extends Kr{constructor(p,_,I,x){super(p,_,I),this.username=x}}class lg extends Kr{constructor(p,_){super(p,"facebook.com",_)}}class pd extends Mn{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class gd extends Kr{constructor(p,_){super(p,"google.com",_)}}class sf extends Mn{constructor(p,_,I){super(p,"twitter.com",_,I)}}function Uu(w){const{user:p,_tokenResponse:_}=w;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Ir(w){var p,_;if(!w)return null;const{providerId:I}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const ne=null===(_=null===(p=zt(w.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(ne)return new Kr(O,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!I)return null;switch(I){case"facebook.com":return new lg(O,x);case"github.com":return new pd(O,x);case"google.com":return new gd(O,x);case"twitter.com":return new sf(O,x,w.screenName||null);case"custom":case"anonymous":return new Kr(O,null);default:return new Kr(O,I,x)}}(_)}class js{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new js("enroll",p)}static _fromMfaPendingCredential(p){return new js("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,I;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return js._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(I=p.multiFactorSession)&&void 0!==I&&I.idToken)return js._fromIdtoken(p.multiFactorSession.idToken)}return null}}class yd{constructor(p,_,I){this.session=p,this.hints=_,this.signInResolver=I}static _fromError(p,_){const I=er(p),x=_.customData._serverResponse,O=(x.mfaInfo||[]).map(Re=>Me._fromServerResponse(I,Re));ie(x.mfaPendingCredential,I,"internal-error");const ne=js._fromMfaPendingCredential(x.mfaPendingCredential);return new yd(ne,O,function(){var Re=(0,m.Z)(function*(nt){const dt=yield nt._process(I,ne);delete x.mfaInfo,delete x.mfaPendingCredential;const At=Object.assign(Object.assign({},x),{idToken:dt.idToken,refreshToken:dt.refreshToken});switch(_.operationType){case"signIn":const Sn=yield qr._fromIdTokenResponse(I,_.operationType,At);return yield I._updateCurrentUser(Sn.user),Sn;case"reauthenticate":return ie(_.user,I,"internal-error"),qr._forOperation(_.user,_.operationType,At);default:Xe(I,"internal-error")}});return function(nt){return Re.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,m.Z)(function*(){return _.signInResolver(p)})()}}function La(w,p){var _;const I=(0,B.m9)(w),x=p;return ie(p.customData.operationType,I,"argument-error"),ie(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),yd._fromError(I,x)}function gr(w,p){return Jt(w,"POST","/v2/accounts/mfaEnrollment:start",Ht(w,p))}class wd{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>Me._fromServerResponse(p.auth,I)))})}static _fromUser(p){return new wd(p)}getSession(){var p=this;return(0,m.Z)(function*(){return js._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var I=this;return(0,m.Z)(function*(){const x=p,O=yield I.getSession(),ne=yield ct(I.user,x._process(I.user.auth,O,_));return yield I.user._updateTokensIfNecessary(ne),I.user.reload()})()}unenroll(p){var _=this;return(0,m.Z)(function*(){var I;const x="string"==typeof p?p:p.uid,O=yield _.user.getIdToken(),ne=yield ct(_.user,function dg(w,p){return Jt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(w,p))}(_.user.auth,{idToken:O,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Re})=>Re!==x),yield _.user._updateTokensIfNecessary(ne);try{yield _.user.reload()}catch(Re){if("auth/user-token-expired"!==(null===(I=Re)||void 0===I?void 0:I.code))throw Re}})()}}const uf=new WeakMap;function Fa(w){const p=(0,B.m9)(w);return uf.has(p)||uf.set(p,wd._fromUser(p)),uf.get(p)}const Bu="__sak";class Ua{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Bu,"1"),this.storage.removeItem(Bu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const si=(()=>{class w extends Ua{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fl(){const w=(0,B.z$)();return H(w)||Dt(w)}()&&function vn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=dr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const x=this.storage.getItem(I),O=this.localCache[I];x!==O&&_(I,O,x)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((Re,nt,dt)=>{this.notifyListeners(Re,dt)});const x=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Re=this.storage.getItem(x);if(_.newValue!==Re)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!I)return}const O=()=>{const Re=this.storage.getItem(x);!I&&this.localCache[x]===Re||this.notifyListeners(x,Re)},ne=this.storage.getItem(x);!function bt(){return(0,B.w1)()&&10===document.documentMode}()||ne===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var x=()=>super._set,O=this;return(0,m.Z)(function*(){yield x().call(O,_,I),O.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,x=this;return(0,m.Z)(function*(){const O=yield I().call(x,_);return x.localCache[_]=JSON.stringify(O),O})()}_remove(_){var I=()=>super._remove,x=this;return(0,m.Z)(function*(){yield I().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),Hu=(()=>{class w extends Ua{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let df=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(O=>O.isListeningto(_));if(I)return I;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,m.Z)(function*(){const x=_,{eventId:O,eventType:ne,data:Re}=x.data,nt=I.handlersMap[ne];if(!nt?.size)return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:ne});const dt=Array.from(nt).map(function(){var Sn=(0,m.Z)(function*(ws){return ws(x.origin,Re)});return function(ws){return Sn.apply(this,arguments)}}()),At=yield function Ul(w){return Promise.all(w.map(function(){var p=(0,m.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return p.apply(this,arguments)}}()))}(dt);x.ports[0].postMessage({status:"done",eventId:O,eventType:ne,response:At})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Va(w="",p=10){let _="";for(let I=0;I<p;I++)_+=Math.floor(10*Math.random());return w+_}class dn{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,I=50){var x=this;return(0,m.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let ne,Re;return new Promise((nt,dt)=>{const At=Va("",20);O.port1.start();const Sn=setTimeout(()=>{dt(new Error("unsupported_event"))},I);Re={messageChannel:O,onMessage(ws){const Zi=ws;if(Zi.data.eventId===At)switch(Zi.data.status){case"ack":clearTimeout(Sn),ne=setTimeout(()=>{dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),nt(Zi.data.response);break;default:clearTimeout(Sn),clearTimeout(ne),dt(new Error("invalid_response"))}}},x.handlers.add(Re),O.port1.addEventListener("message",Re.onMessage),x.target.postMessage({eventType:p,eventId:At,data:_},[O.port2])}).finally(()=>{Re&&x.removeMessageHandler(Re)})})()}}function mn(){return window}function oi(){return typeof mn().WorkerGlobalScope<"u"&&"function"==typeof mn().importScripts}function xr(){return(xr=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ba="firebaseLocalStorageDb",ja="firebaseLocalStorage",$a="fbase_key";class xi{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function gt(w,p){return w.transaction([ja],p?"readwrite":"readonly").objectStore(ja)}function $s(){const w=indexedDB.open(Ba,1);return new Promise((p,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(ja,{keyPath:$a})}catch(x){_(x)}}),w.addEventListener("success",(0,m.Z)(function*(){const I=w.result;I.objectStoreNames.contains(ja)?p(I):(I.close(),yield function hf(){const w=indexedDB.deleteDatabase(Ba);return new xi(w).toPromise()}(),p(yield $s()))}))})}function Yo(w,p,_){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,m.Z)(function*(w,p,_){const I=gt(w,!0).put({[$a]:p,value:_});return new xi(I).toPromise()})).apply(this,arguments)}function Qo(){return(Qo=(0,m.Z)(function*(w,p){const _=gt(w,!1).get(p),I=yield new xi(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function qi(w,p){const _=gt(w,!0).delete(p);return new xi(_).toPromise()}const Wu=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,m.Z)(function*(){return _.db||(_.db=yield $s()),_.db})()}_withRetries(_){var I=this;return(0,m.Z)(function*(){let x=0;for(;;)try{const O=yield I._openDb();return yield _(O)}catch(O){if(x++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,m.Z)(function*(){return oi()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,m.Z)(function*(){_.receiver=df._getInstance(function Gu(){return oi()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,m.Z)(function*(x,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(x,O){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,m.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,m.Z)(function*(){var I,x;if(_.activeServiceWorker=yield function Ar(){return xr.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new dn(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(I=O[0])||void 0===I?void 0:I.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,m.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Vl(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const _=yield $s();return yield Yo(_,Bu,"1"),yield qi(_,Bu),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,m.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var x=this;return(0,m.Z)(function*(){return x._withPendingWrite((0,m.Z)(function*(){return yield x._withRetries(O=>Yo(O,_,I)),x.localCache[_]=I,x.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,m.Z)(function*(){const x=yield I._withRetries(O=>function zn(w,p){return Qo.apply(this,arguments)}(O,_));return I.localCache[_]=x,x})()}_remove(_){var I=this;return(0,m.Z)(function*(){return I._withPendingWrite((0,m.Z)(function*(){return yield I._withRetries(x=>qi(x,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,m.Z)(function*(){const I=yield _._withRetries(ne=>{const Re=gt(ne,!1).getAll();return new xi(Re).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:ne,value:Re}of I)O.add(ne),JSON.stringify(_.localCache[ne])!==JSON.stringify(Re)&&(_.notifyListeners(ne,Re),x.push(ne));for(const ne of Object.keys(_.localCache))_.localCache[ne]&&!O.has(ne)&&(_.notifyListeners(ne,null),x.push(ne));return x})()}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function zu(w,p){return Jt(w,"POST","/v2/accounts/mfaSignIn:start",Ht(w,p))}function Rr(){return(Rr=(0,m.Z)(function*(w){return(yield Jt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Gs(w){return new Promise((p,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=p,I.onerror=x=>{const O=Ve("internal-error");O.customData=x,_(O)},I.type="text/javascript",I.charset="UTF-8",function ys(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(I)})}function Io(w){return`__${w}${Math.floor(1e6*Math.random())}`}const ai=1e12;class Mt{constructor(p){this.auth=p,this.counter=ai,this._widgets=new Map}render(p,_){const I=this.counter;return this._widgets.set(I,new Id(p,this.auth.name,_||{})),this.counter++,I}reset(p){var _;const I=p||ai;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(p){var _;return(null===(_=this._widgets.get(p||ai))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,m.Z)(function*(){var I;return null===(I=_._widgets.get(p||ai))||void 0===I||I.execute(),""})()}}class Id{constructor(p,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;ie(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ff(w){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Pn=Io("rcb"),$l=new qe(3e4,6e4);class Ki{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=mn().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return ie(function Mr(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(mn().grecaptcha):new Promise((I,x)=>{const O=mn().setTimeout(()=>{x(Ve(p,"network-request-failed"))},$l.get());mn()[Pn]=()=>{mn().clearTimeout(O),delete mn()[Pn];const Re=mn().grecaptcha;if(!Re)return void x(Ve(p,"internal-error"));const nt=Re.render;Re.render=(dt,At)=>{const Sn=nt(dt,At);return this.counter++,Sn},this.hostLanguage=_,I(Re)},Gs(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Pn,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),x(Ve(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=mn().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bo{load(p){return(0,m.Z)(function*(){return new Mt(p)})()}clearedOneInstance(){}}const pf="recaptcha",U_={theme:"light",type:"image"};class _n{constructor(p,_=Object.assign({},U_),I){this.parameters=_,this.type=pf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=er(I),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;ie(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bo:new Ki,this.validateStartingState()}verify(){var p=this;return(0,m.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),I=p.getAssertedRecaptcha();return I.getResponse(_)||new Promise(O=>{const ne=Re=>{!Re||(p.tokenChangeListeners.delete(ne),O(Re))};p.tokenChangeListeners.add(ne),p.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof p)p(_);else if("string"==typeof p){const I=mn()[p];"function"==typeof I&&I(_)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,m.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,m.Z)(function*(){ie(je()&&!oi(),p.auth,"internal-error"),yield function Ws(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Eo(w){return Rr.apply(this,arguments)}(p.auth);ie(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class kn{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Ls._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Xo(w,p,_){return qu.apply(this,arguments)}function qu(){return(qu=(0,m.Z)(function*(w,p,_){const I=er(w),x=yield zs(I,p,(0,B.m9)(_));return new kn(x,O=>zo(I,O))})).apply(this,arguments)}function qn(w,p,_){return ui.apply(this,arguments)}function ui(){return(ui=(0,m.Z)(function*(w,p,_){const I=(0,B.m9)(w);yield pr(!1,I,"phone");const x=yield zs(I.auth,p,(0,B.m9)(_));return new kn(x,O=>Ml(I,O))})).apply(this,arguments)}function Gl(w,p,_){return ea.apply(this,arguments)}function ea(){return(ea=(0,m.Z)(function*(w,p,_){const I=(0,B.m9)(w),x=yield zs(I.auth,p,(0,B.m9)(_));return new kn(x,O=>ud(I,O))})).apply(this,arguments)}function zs(w,p,_){return ta.apply(this,arguments)}function ta(){return(ta=(0,m.Z)(function*(w,p,_){var I;const x=yield _.verify();try{let O;if(ie("string"==typeof x,w,"argument-error"),ie(_.type===pf,w,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const ne=O.session;if("phoneNumber"in O)return ie("enroll"===ne.type,w,"internal-error"),(yield gr(w,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ie("signin"===ne.type,w,"internal-error");const Re=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return ie(Re,w,"missing-multi-factor-info"),(yield zu(w,{mfaPendingCredential:ne.credential,mfaEnrollmentId:Re,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield ig(w,{phoneNumber:O.phoneNumber,recaptchaToken:x});return ne}}finally{_._reset()}})).apply(this,arguments)}function Bt(w,p){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,m.Z)(function*(w,p){yield fo((0,B.m9)(w),p)})).apply(this,arguments)}let Ga=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=er(_)}verifyPhoneNumber(_,I){return zs(this.auth,_,(0,B.m9)(I))}static credential(_,I){return Ls._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:x}=_;return I&&x?Ls._fromTokenResponse(I,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function na(w,p){return p?se(p):(ie(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Wa extends tr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Os(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Os(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Os(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function On(w){return Ai(w.auth,new Wa(w),w.bypassAuthState)}function Ku(w){const{auth:p,user:_}=w;return ie(_,p,"internal-error"),Us(_,new Wa(w),w.bypassAuthState)}function vs(w){return za.apply(this,arguments)}function za(){return(za=(0,m.Z)(function*(w){const{auth:p,user:_}=w;return ie(_,p,"internal-error"),fo(_,new Wa(w),w.bypassAuthState)})).apply(this,arguments)}class Zu{constructor(p,_,I,x,O=!1){this.auth=p,this.resolver=I,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,m.Z)(function*(I,x){p.pendingPromise={resolve:I,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(I,x){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,m.Z)(function*(){const{urlResponse:I,sessionId:x,postBody:O,tenantId:ne,error:Re,type:nt}=p;if(Re)return void _.reject(Re);const dt={auth:_.auth,requestUri:I,sessionId:x,tenantId:ne||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(nt)(dt))}catch(At){_.reject(At)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return On;case"linkViaPopup":case"linkViaRedirect":return vs;case"reauthViaPopup":case"reauthViaRedirect":return Ku;default:Xe(this.auth,"internal-error")}}resolve(p){Te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rr=new qe(2e3,1e4);function Ri(w,p,_){return Do.apply(this,arguments)}function Do(){return(Do=(0,m.Z)(function*(w,p,_){const I=er(w);Ae(w,p,us);const x=na(I,_);return new ra(I,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function Wl(w,p,_){return bd.apply(this,arguments)}function bd(){return(bd=(0,m.Z)(function*(w,p,_){const I=(0,B.m9)(w);Ae(I.auth,p,us);const x=na(I.auth,_);return new ra(I.auth,"reauthViaPopup",p,x,I).executeNotNull()})).apply(this,arguments)}function gf(w,p,_){return qa.apply(this,arguments)}function qa(){return(qa=(0,m.Z)(function*(w,p,_){const I=(0,B.m9)(w);Ae(I.auth,p,us);const x=na(I.auth,_);return new ra(I.auth,"linkViaPopup",p,x,I).executeNotNull()})).apply(this,arguments)}let ra=(()=>{class w extends Zu{constructor(_,I,x,O,ne){super(_,I,O,ne),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,m.Z)(function*(){const I=yield _.execute();return ie(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,m.Z)(function*(){Te(1===_.filter.length,"Popup operations only handle one event");const I=Va();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Ve(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,x;this.pollId=null!==(x=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,rr.get())};_()}}return w.currentPopupAction=null,w})();const Zr=new Map;class Ka extends Zu{constructor(p,_,I=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,m.Z)(function*(){let I=Zr.get(_.auth._key());if(!I){try{const O=(yield function Za(w,p){return ia.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;I=()=>Promise.resolve(O)}catch(x){I=()=>Promise.reject(x)}Zr.set(_.auth._key(),I)}return _.bypassAuthState||Zr.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,I=this;return(0,m.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(I,p);if("unknown"!==p.type){if(p.eventId){const x=yield I.auth._redirectUserForId(p.eventId);if(x)return I.user=x,_().call(I,p);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function ia(){return(ia=(0,m.Z)(function*(w,p){const _=zl(p),I=mi(w);if(!(yield I._isAvailable()))return!1;const x="true"===(yield I._get(_));return yield I._remove(_),x})).apply(this,arguments)}function jr(w,p){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,m.Z)(function*(w,p){return mi(w)._set(zl(p),"true")})).apply(this,arguments)}function gi(){Zr.clear()}function sa(w,p){Zr.set(w._key(),p)}function mi(w){return se(w._redirectPersistence)}function zl(w){return Xt("pendingRedirect",w.config.apiKey,w.name)}function Hn(w,p,_){return function ql(w,p,_){return Kl.apply(this,arguments)}(w,p,_)}function Kl(){return(Kl=(0,m.Z)(function*(w,p,_){const I=er(w);Ae(w,p,us);const x=na(I,_);return yield jr(x,I),x._openRedirect(I,p,"signInViaRedirect")})).apply(this,arguments)}function b(w,p,_){return function T(w,p,_){return R.apply(this,arguments)}(w,p,_)}function R(){return(R=(0,m.Z)(function*(w,p,_){const I=(0,B.m9)(w);Ae(I.auth,p,us);const x=na(I.auth,_);yield jr(x,I.auth);const O=yield Ft(I);return x._openRedirect(I.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function U(w,p,_){return function ee(w,p,_){return ue.apply(this,arguments)}(w,p,_)}function ue(){return(ue=(0,m.Z)(function*(w,p,_){const I=(0,B.m9)(w);Ae(I.auth,p,us);const x=na(I.auth,_);yield pr(!1,I,p.providerId),yield jr(x,I.auth);const O=yield Ft(I);return x._openRedirect(I.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function Pe(w,p){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,m.Z)(function*(w,p){return yield er(w)._initializationPromise,ft(w,p,!1)})).apply(this,arguments)}function ft(w,p){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,m.Z)(function*(w,p,_=!1){const I=er(w),x=na(I,p),ne=yield new Ka(I,x,_).execute();return ne&&!_&&(delete ne.user._redirectEventId,yield I._persistUserIfCurrent(ne.user),yield I._setRedirectUser(null,p)),ne})).apply(this,arguments)}function Ft(w){return mt.apply(this,arguments)}function mt(){return(mt=(0,m.Z)(function*(w){const p=Va(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class $r{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(p,I)&&(_=!0,this.sendToConsumer(p,I),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Mi(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oa(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var I;if(p.error&&!oa(p)){const x=(null===(I=p.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Ve(this.auth,x))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const I=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&I}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ya(p))}saveEventToCache(p){this.cachedEventUids.add(Ya(p)),this.lastProcessedEventTime=Date.now()}}function Ya(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function oa({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===p?.code}function aa(w){return To.apply(this,arguments)}function To(){return(To=(0,m.Z)(function*(w,p={}){return Jt(w,"GET","/v1/projects",p)})).apply(this,arguments)}const So=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qs=/^https?/;function Qa(){return(Qa=(0,m.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield aa(w);for(const _ of p)try{if(lE(_))return}catch{}Xe(w,"unauthorized-domain")})).apply(this,arguments)}function lE(w){const p=de(),{protocol:_,hostname:I}=new URL(p);if(w.startsWith("chrome-extension://")){const ne=new URL(w);return""===ne.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&ne.hostname===I}if(!qs.test(_))return!1;if(So.test(w))return I===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(I)}const V_=new qe(3e4,6e4);function hg(){const w=mn().___jsl;if(w?.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Ao=null;function Zl(w){return Ao=Ao||function Dd(w){return new Promise((p,_)=>{var I,x,O;function ne(){hg(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{hg(),_(Ve(w,"network-request-failed"))},timeout:V_.get()})}if(null!==(x=null===(I=mn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==x&&x.Iframe)p(gapi.iframes.getContext());else{if(null===(O=mn().gapi)||void 0===O||!O.load){const Re=Io("iframefcb");return mn()[Re]=()=>{gapi.load?ne():_(Ve(w,"network-request-failed"))},Gs(`https://apis.google.com/js/api.js?onload=${Re}`).catch(nt=>_(nt))}ne()}}).catch(p=>{throw Ao=null,p})}(w),Ao}const Ja=new qe(5e3,15e3),j_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ua=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $_(w){const p=w.config;ie(p.authDomain,w,"auth-domain-config-required");const _=p.emulator?hn(p,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:p.apiKey,appName:w.name,v:P.SDK_VERSION},x=ua.get(w.config.apiHost);x&&(I.eid=x);const O=w._getFrameworks();return O.length&&(I.fw=O.join(",")),`${_}?${(0,B.xO)(I).slice(1)}`}function Xa(){return Xa=(0,m.Z)(function*(w){const p=yield Zl(w),_=mn().gapi;return ie(_,w,"internal-error"),p.open({where:document.body,url:$_(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:j_,dontclear:!0},I=>new Promise(function(){var x=(0,m.Z)(function*(O,ne){yield I.restyle({setHideOnLeave:!1});const Re=Ve(w,"network-request-failed"),nt=mn().setTimeout(()=>{ne(Re)},Ja.get());function dt(){mn().clearTimeout(nt),O(I)}I.ping(dt).then(dt,()=>{ne(Re)})});return function(O,ne){return x.apply(this,arguments)}}()))}),Xa.apply(this,arguments)}const yf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ql{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zs(w,p,_,I,x,O){ie(w.config.authDomain,w,"auth-domain-config-required"),ie(w.config.apiKey,w,"invalid-api-key");const ne={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:P.SDK_VERSION,eventId:x};if(p instanceof us){p.setDefaultLanguage(w.languageCode),ne.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(ne.customParameters=JSON.stringify(p.getCustomParameters()));for(const[nt,dt]of Object.entries(O||{}))ne[nt]=dt}if(p instanceof ls){const nt=p.getScopes().filter(dt=>""!==dt);nt.length>0&&(ne.scopes=nt.join(","))}w.tenantId&&(ne.tid=w.tenantId);const Re=ne;for(const nt of Object.keys(Re))void 0===Re[nt]&&delete Re[nt];return`${function Ad({config:w}){return w.emulator?hn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,B.xO)(Re).slice(1)}`}const xd="webStorageSupport",gg=class G_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hu,this._completeRedirectFn=ft,this._overrideRedirectResult=sa}_openPopup(p,_,I,x){var O=this;return(0,m.Z)(function*(){var ne;Te(null===(ne=O.eventManagers[p._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const Re=Zs(p,_,I,de(),x);return function Td(w,p,_,I=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),ne=Math.max((window.screen.availWidth-I)/2,0).toString();let Re="";const nt=Object.assign(Object.assign({},yf),{width:I.toString(),height:x.toString(),top:O,left:ne}),dt=(0,B.z$)().toLowerCase();_&&(Re=Ie(dt)?"_blank":_),$(dt)&&(p=p||"http://localhost",nt.scrollbars="yes");const At=Object.entries(nt).reduce((ws,[Zi,Rd])=>`${ws}${Zi}=${Rd},`,"");if(function wr(w=(0,B.z$)()){var p;return Dt(w)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(dt)&&"_self"!==Re)return function vf(w,p){const _=document.createElement("a");_.href=w,_.target=p;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(p||"",Re),new Ql(null);const Sn=window.open(p||"",Re,At);ie(Sn,w,"popup-blocked");try{Sn.focus()}catch{}return new Ql(Sn)}(p,Re,Va())})()}_openRedirect(p,_,I,x){var O=this;return(0,m.Z)(function*(){return yield O._originValidation(p),function rt(w){mn().location.href=w}(Zs(p,_,I,de(),x)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:x,promise:O}=this.eventManagers[_];return x?Promise.resolve(x):(Te(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(p);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(p){var _=this;return(0,m.Z)(function*(){const I=yield function fg(w){return Xa.apply(this,arguments)}(p),x=new $r(p);return I.register("authEvent",O=>(ie(O?.authEvent,p,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:x},_.iframes[p._key()]=I,x})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(xd,{type:xd},x=>{var O;const ne=null===(O=x?.[0])||void 0===O?void 0:O[xd];void 0!==ne&&_(!!ne),Xe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function _i(w){return Qa.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return dr()||H()||Dt()}};class Ys extends class W_{constructor(p){this.factorId=p}_process(p,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,I);case"signin":return this._finalizeSignIn(p,_.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Ys(p)}_finalizeEnroll(p,_,I){return function vd(w,p){return Jt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(w,p))}(p,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function Hs(w,p){return Jt(w,"POST","/v2/accounts/mfaSignIn:finalize",Ht(w,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Jl=(()=>{class w{constructor(){}static assertion(_){return Ys._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var mg="@firebase/auth";class cE{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,m.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(I=>{var x;p((null===(x=I)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function hE(w){(0,P._registerComponent)(new _e.wA("auth",(p,{options:_})=>{const I=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:O,authDomain:ne}=I.options;return((Re,nt)=>{ie(O&&!O.includes(":"),"invalid-api-key",{appName:Re.name}),ie(!ne?.includes(":"),"argument-error",{appName:Re.name});const dt={apiKey:O,authDomain:ne,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vo(w)},At=new Lt(Re,nt,dt);return function ve(w,p){const _=p?.persistence||[],I=(Array.isArray(_)?_:[_]).map(se);p?.errorMap&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(I,p?.popupRedirectResolver)}(At,_),At})(I,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,I)=>{p.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new _e.wA("auth-internal",p=>{const _=er(p.getProvider("auth").getImmediate());return new cE(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(mg,"0.20.5",function dE(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,P.registerVersion)(mg,"0.20.5","esm2017")}("Browser")},2090:(ht,ke,L)=>{L.d(ke,{$s:()=>bn,BH:()=>He,DV:()=>Jt,Dv:()=>Ur,G6:()=>ie,GJ:()=>Qt,L:()=>fe,LL:()=>de,Mn:()=>Ae,Pz:()=>$t,Sg:()=>Ue,UG:()=>Ce,UI:()=>bi,US:()=>_e,Wj:()=>ur,Yr:()=>ze,ZB:()=>z,ZR:()=>ve,b$:()=>Xe,cI:()=>Zt,d:()=>Ve,dS:()=>zt,eu:()=>Te,g5:()=>P,gK:()=>ar,gQ:()=>$i,h$:()=>ge,hl:()=>ye,hu:()=>B,jU:()=>me,lb:()=>ss,m9:()=>Xn,ne:()=>pt,p$:()=>q,pd:()=>jn,r3:()=>Ht,ru:()=>et,tV:()=>we,uI:()=>it,ug:()=>Ze,vZ:()=>Lr,w1:()=>Oe,w9:()=>fn,xO:()=>hi,xb:()=>En,z$:()=>Se,zI:()=>J,zd:()=>Di});const B=function(G,W){if(!G)throw P(W)},P=function(G){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+G)},oe=function(G){const W=[];let j=0;for(let K=0;K<G.length;K++){let Z=G.charCodeAt(K);Z<128?W[j++]=Z:Z<2048?(W[j++]=Z>>6|192,W[j++]=63&Z|128):55296==(64512&Z)&&K+1<G.length&&56320==(64512&G.charCodeAt(K+1))?(Z=65536+((1023&Z)<<10)+(1023&G.charCodeAt(++K)),W[j++]=Z>>18|240,W[j++]=Z>>12&63|128,W[j++]=Z>>6&63|128,W[j++]=63&Z|128):(W[j++]=Z>>12|224,W[j++]=Z>>6&63|128,W[j++]=63&Z|128)}return W},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,W){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let Z=0;Z<G.length;Z+=3){const Le=G[Z],We=Z+1<G.length,Ct=We?G[Z+1]:0,an=Z+2<G.length,Xt=an?G[Z+2]:0;let $=(15&Ct)<<2|Xt>>6,H=63&Xt;an||(H=64,We||($=64)),K.push(j[Le>>2],j[(3&Le)<<4|Ct>>4],j[$],j[H])}return K.join("")},encodeString(G,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(G):this.encodeByteArray(oe(G),W)},decodeString(G,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(G):function(G){const W=[];let j=0,K=0;for(;j<G.length;){const Z=G[j++];if(Z<128)W[K++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const Le=G[j++];W[K++]=String.fromCharCode((31&Z)<<6|63&Le)}else if(Z>239&&Z<365){const an=((7&Z)<<18|(63&G[j++])<<12|(63&G[j++])<<6|63&G[j++])-65536;W[K++]=String.fromCharCode(55296+(an>>10)),W[K++]=String.fromCharCode(56320+(1023&an))}else{const Le=G[j++],We=G[j++];W[K++]=String.fromCharCode((15&Z)<<12|(63&Le)<<6|63&We)}}return W.join("")}(this.decodeStringToByteArray(G,W))},decodeStringToByteArray(G,W){this.init_();const j=W?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let Z=0;Z<G.length;){const Le=j[G.charAt(Z++)],Ct=Z<G.length?j[G.charAt(Z)]:0;++Z;const Xt=Z<G.length?j[G.charAt(Z)]:64;++Z;const te=Z<G.length?j[G.charAt(Z)]:64;if(++Z,null==Le||null==Ct||null==Xt||null==te)throw Error();K.push(Le<<2|Ct>>4),64!==Xt&&(K.push(Ct<<4&240|Xt>>2),64!==te&&K.push(Xt<<6&192|te))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},ge=function(G){const W=oe(G);return _e.encodeByteArray(W,!0)},fe=function(G){return ge(G).replace(/\./g,"")},we=function(G){try{return _e.decodeString(G,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function q(G){return z(void 0,G)}function z(G,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return W}for(const j in W)!W.hasOwnProperty(j)||!X(j)||(G[j]=z(G[j],W[j]));return G}function X(G){return"__proto__"!==G}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,j)=>{this.resolve=W,this.reject=j})}wrapCallback(W){return(j,K)=>{j?this.reject(j):this.resolve(K),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(j):W(j,K))}}}function Ue(G,W){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const K=W||"demo-project",Z=G.iat||0,Le=G.sub||G.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${K}`,aud:K,iat:Z,exp:Z+3600,auth_time:Z,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},G);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(We)),""].join(".")}function Se(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function it(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function Ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function me(){return"object"==typeof self&&self.self===self}function et(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function Xe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ve(){return Se().indexOf("Electron/")>=0}function Oe(){const G=Se();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function Ae(){return Se().indexOf("MSAppHost/")>=0}function ze(){return!1}function ie(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ye(){return"object"==typeof indexedDB}function Te(){return new Promise((G,W)=>{try{let j=!0;const K="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(K);Z.onsuccess=()=>{Z.result.close(),j||self.indexedDB.deleteDatabase(K),G(!0)},Z.onupgradeneeded=()=>{j=!1},Z.onerror=()=>{var Le;W((null===(Le=Z.error)||void 0===Le?void 0:Le.message)||"")}}catch(j){W(j)}})}function J(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ve extends Error{constructor(W,j,K){super(j),this.code=W,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,de.prototype.create)}}class de{constructor(W,j,K){this.service=W,this.serviceName=j,this.errors=K}create(W,...j){const K=j[0]||{},Z=`${this.service}/${W}`,Le=this.errors[W],We=Le?function je(G,W){return G.replace(wt,(j,K)=>{const Z=W[K];return null!=Z?String(Z):`<${K}?>`})}(Le,K):"Error";return new ve(Z,`${this.serviceName}: ${We} (${Z}).`,K)}}const wt=/\{\$([^}]+)}/g;function Zt(G){return JSON.parse(G)}function $t(G){return JSON.stringify(G)}const qe=function(G){let W={},j={},K={},Z="";try{const Le=G.split(".");W=Zt(we(Le[0])||""),j=Zt(we(Le[1])||""),Z=Le[2],K=j.d||{},delete j.d}catch{}return{header:W,claims:j,data:K,signature:Z}},fn=function(G){const j=qe(G).claims;return!!j&&"object"==typeof j&&j.hasOwnProperty("iat")},Qt=function(G){const W=qe(G).claims;return"object"==typeof W&&!0===W.admin};function Ht(G,W){return Object.prototype.hasOwnProperty.call(G,W)}function Jt(G,W){if(Object.prototype.hasOwnProperty.call(G,W))return G[W]}function En(G){for(const W in G)if(Object.prototype.hasOwnProperty.call(G,W))return!1;return!0}function bi(G,W,j){const K={};for(const Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(K[Z]=W.call(j,G[Z],Z,G));return K}function Lr(G,W){if(G===W)return!0;const j=Object.keys(G),K=Object.keys(W);for(const Z of j){if(!K.includes(Z))return!1;const Le=G[Z],We=W[Z];if(xn(Le)&&xn(We)){if(!Lr(Le,We))return!1}else if(Le!==We)return!1}for(const Z of K)if(!j.includes(Z))return!1;return!0}function xn(G){return null!==G&&"object"==typeof G}function hi(G){const W=[];for(const[j,K]of Object.entries(G))Array.isArray(K)?K.forEach(Z=>{W.push(encodeURIComponent(j)+"="+encodeURIComponent(Z))}):W.push(encodeURIComponent(j)+"="+encodeURIComponent(K));return W.length?"&"+W.join("&"):""}function Di(G){const W={};return G.replace(/^\?/,"").split("&").forEach(K=>{if(K){const[Z,Le]=K.split("=");W[decodeURIComponent(Z)]=decodeURIComponent(Le)}}),W}function jn(G){const W=G.indexOf("?");if(!W)return"";const j=G.indexOf("#",W);return G.substring(W,j>0?j:void 0)}class $i{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,j){j||(j=0);const K=this.W_;if("string"==typeof W)for(let te=0;te<16;te++)K[te]=W.charCodeAt(j)<<24|W.charCodeAt(j+1)<<16|W.charCodeAt(j+2)<<8|W.charCodeAt(j+3),j+=4;else for(let te=0;te<16;te++)K[te]=W[j]<<24|W[j+1]<<16|W[j+2]<<8|W[j+3],j+=4;for(let te=16;te<80;te++){const $=K[te-3]^K[te-8]^K[te-14]^K[te-16];K[te]=4294967295&($<<1|$>>>31)}let Xt,cr,Z=this.chain_[0],Le=this.chain_[1],We=this.chain_[2],Ct=this.chain_[3],an=this.chain_[4];for(let te=0;te<80;te++){te<40?te<20?(Xt=Ct^Le&(We^Ct),cr=1518500249):(Xt=Le^We^Ct,cr=1859775393):te<60?(Xt=Le&We|Ct&(Le|We),cr=2400959708):(Xt=Le^We^Ct,cr=3395469782);const $=(Z<<5|Z>>>27)+Xt+an+cr+K[te]&4294967295;an=Ct,Ct=We,We=4294967295&(Le<<30|Le>>>2),Le=Z,Z=$}this.chain_[0]=this.chain_[0]+Z&4294967295,this.chain_[1]=this.chain_[1]+Le&4294967295,this.chain_[2]=this.chain_[2]+We&4294967295,this.chain_[3]=this.chain_[3]+Ct&4294967295,this.chain_[4]=this.chain_[4]+an&4294967295}update(W,j){if(null==W)return;void 0===j&&(j=W.length);const K=j-this.blockSize;let Z=0;const Le=this.buf_;let We=this.inbuf_;for(;Z<j;){if(0===We)for(;Z<=K;)this.compress_(W,Z),Z+=this.blockSize;if("string"==typeof W){for(;Z<j;)if(Le[We]=W.charCodeAt(Z),++We,++Z,We===this.blockSize){this.compress_(Le),We=0;break}}else for(;Z<j;)if(Le[We]=W[Z],++We,++Z,We===this.blockSize){this.compress_(Le),We=0;break}}this.inbuf_=We,this.total_+=j}digest(){const W=[];let j=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Z=this.blockSize-1;Z>=56;Z--)this.buf_[Z]=255&j,j/=256;this.compress_(this.buf_);let K=0;for(let Z=0;Z<5;Z++)for(let Le=24;Le>=0;Le-=8)W[K]=this.chain_[Z]>>Le&255,++K;return W}}function pt(G,W){const j=new Fr(G,W);return j.subscribe.bind(j)}class Fr{constructor(W,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{W(this)}).catch(K=>{this.error(K)})}next(W){this.forEachObserver(j=>{j.next(W)})}error(W){this.forEachObserver(j=>{j.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,j,K){let Z;if(void 0===W&&void 0===j&&void 0===K)throw new Error("Missing Observer.");Z=function Yt(G,W){if("object"!=typeof G||null===G)return!1;for(const j of W)if(j in G&&"function"==typeof G[j])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:j,complete:K},void 0===Z.next&&(Z.next=or),void 0===Z.error&&(Z.error=or),void 0===Z.complete&&(Z.complete=or);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch{}}),this.observers.push(Z),Le}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,W)}sendOne(W,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{j(this.observers[W])}catch(K){typeof console<"u"&&console.error&&console.error(K)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function or(){}const Ur=function(G,W,j,K){let Z;if(K<W?Z="at least "+W:K>j&&(Z=0===j?"none":"no more than "+j),Z)throw new Error(G+" failed: Was called with "+K+(1===K?" argument.":" arguments.")+" Expects "+Z+".")};function ar(G,W){return`${G} failed: ${W} argument `}function ur(G,W,j,K){if((!K||j)&&"function"!=typeof j)throw new Error(ar(G,W)+"must be a valid function.")}function ss(G,W,j,K){if((!K||j)&&("object"!=typeof j||null===j))throw new Error(ar(G,W)+"must be a valid context object.")}const zt=function(G){const W=[];let j=0;for(let K=0;K<G.length;K++){let Z=G.charCodeAt(K);if(Z>=55296&&Z<=56319){const Le=Z-55296;K++,B(K<G.length,"Surrogate pair missing trail surrogate."),Z=65536+(Le<<10)+(G.charCodeAt(K)-56320)}Z<128?W[j++]=Z:Z<2048?(W[j++]=Z>>6|192,W[j++]=63&Z|128):Z<65536?(W[j++]=Z>>12|224,W[j++]=Z>>6&63|128,W[j++]=63&Z|128):(W[j++]=Z>>18|240,W[j++]=Z>>12&63|128,W[j++]=Z>>6&63|128,W[j++]=63&Z|128)}return W},Ze=function(G){let W=0;for(let j=0;j<G.length;j++){const K=G.charCodeAt(j);K<128?W++:K<2048?W+=2:K>=55296&&K<=56319?(W+=4,j++):W+=3}return W};function bn(G,W=1e3,j=2){const K=W*Math.pow(j,G),Z=Math.round(.5*K*(Math.random()-.5)*2);return Math.min(144e5,K+Z)}function Xn(G){return G&&G._delegate?G._delegate:G}},7296:(ht,ke,L)=>{var m=L(4650);let B=null;function P(){return B}const ge=new m.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function we(){return(0,m.LFG)(z)}()},providedIn:"platform"}),n})();const q=new m.OlP("Location Initialized");let z=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ge))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function He(){return new z((0,m.LFG)(ge))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function it(n){return n&&"?"!==n[0]?"?"+n:n}let Ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function me(){const n=(0,m.LFG)(ge).location;return new Xe((0,m.LFG)(fe),n&&n.origin||"")}()},providedIn:"root"}),n})();const et=new m.OlP("appBaseHref");let Xe=(()=>{class n extends Ce{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+it(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+it(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+it(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fe),m.LFG(et,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ve=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+it(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+it(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fe),m.LFG(et,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Oe=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Se(ie(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+it(r))}normalize(t){return n.stripTrailingSlash(function ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ie(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=it,n.joinWithSlash=Ue,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(m.LFG(Ce))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ae(){return new Oe((0,m.LFG)(Ce))}()},providedIn:"root"}),n})();function ie(n){return n.replace(/\/index.html$/,"")}let Sr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Br,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Sl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Sl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Br{constructor(){this.$implicit=null,this.ngIf=null}}function Sl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let cs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function nf(n){return"server"===n}let Ra=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new fr((0,m.LFG)(ge),window)}),n})();class fr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function fo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Go(this.window.history)||Go(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Go(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Us extends class Wo extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ce(n){B||(B=n)}(new Us)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ai(){return po=po||document.querySelector("base"),po?po.getAttribute("href"):null}();return null==t?null:function zo(n){ds=ds||document.createElement("a"),ds.setAttribute("href",n);const e=ds.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){po=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Dl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let ds,po=null;const lt=new m.OlP("TRANSITION_ID"),xu=[{provide:m.ip1,useFactory:function Ml(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[lt,ge,m.zs3],multi:!0}];let Ma=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Na=new m.OlP("EventManagerPlugins");let hs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Na),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ru{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let qo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n extends qo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Gt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Gt))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ge))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Gt(n){P().remove(n)}const go={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mu=/%COMP%/g;function _o(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?_o(n,i,t):(i=i.replace(Mu,n),t.push(i))}return t}function ld(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ko=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Wn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ms(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new cd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=_o(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(hs),m.LFG(Me),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Wn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(go[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(gs(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(gs(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=go[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=go[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ld(r)):this.eventManager.addEventListener(e,t,ld(r))}}function gs(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ms extends Wn{constructor(e,t,r,i){super(e),this.component=r;const a=_o(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function mo(n){return"_ngcontent-%COMP%".replace(Mu,n)}(i+"-"+r.id),this.hostAttr=function Pa(n){return"_nghost-%COMP%".replace(Mu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class cd extends Wn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=_o(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Pu=(()=>{class n extends Ru{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ge))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const ku=["alt","control","meta","shift"],Ou={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vs={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},dd={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yo=(()=>{class n extends Ru{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(ku.forEach(g=>{const v=r.indexOf(g);v>-1&&(r.splice(v,1),l+=g+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function rf(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Vs.hasOwnProperty(e)&&(e=Vs[e]))}return Ou[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ku.forEach(a=>{a!=i&&(0,dd[a])(t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ge))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Fu=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function hd(){Us.makeCurrent()},multi:!0},{provide:ge,useFactory:function fd(){return(0,m.RDi)(document),document},deps:[]}]),Oa=new m.OlP(""),Ir=[{provide:m.rWj,useClass:class ud{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(g){l=l||g,a--,0==a&&r(l)};i.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],Kr=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function Zo(){return new m.qLn},deps:[]},{provide:Na,useClass:Pu,multi:!0,deps:[ge,m.R0b,m.Lbi]},{provide:Na,useClass:yo,multi:!0,deps:[ge]},{provide:Ko,useClass:Ko,deps:[hs,Me,m.AFp]},{provide:m.FYo,useExisting:Ko},{provide:qo,useExisting:Me},{provide:Me,useClass:Me,deps:[ge]},{provide:hs,useClass:hs,deps:[Na,m.R0b]},{provide:class pr{},useClass:Ma,deps:[]},[]];let Mn=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:lt,useExisting:m.AFp},xu]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Oa,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...Kr,...Ir],imports:[cs,m.hGG]}),n})(),Uu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ge))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function sf(){return new Uu((0,m.LFG)(ge))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var dn=L(8996),mn=L(7669);function rt(...n){const e=(0,mn.yG)(n);return(0,dn.D)(n,e)}var oi=L(7579);class Ar extends oi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var xr=L(9751);const{isArray:Vl}=Array,{getPrototypeOf:Gu,prototype:Ba,keys:Bl}=Object;var xi=L(4671),gt=L(4004);const{isArray:hf}=Array;var zn=L(5403),Qo=L(9672);function qi(...n){const e=(0,mn.yG)(n),t=(0,mn.jO)(n),{args:r,keys:i}=function ja(n){if(1===n.length){const e=n[0];if(Vl(e))return{args:e,keys:null};if(function $a(n){return n&&"object"==typeof n&&Gu(n)===Ba}(e)){const t=Bl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,dn.D)([],e);const a=new xr.y(function Ed(n,e,t=xi.y){return r=>{jl(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let g=0;g<i;g++)jl(e,()=>{const v=(0,dn.D)(n[g],e);let D=!1;v.subscribe((0,zn.x)(r,S=>{a[g]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function Ha(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):xi.y));return t?a.pipe(function Yo(n){return(0,gt.U)(e=>function $s(n,e){return hf(e)?n(...e):n(e)}(n,e))}(t)):a}function jl(n,e,t){n?(0,Qo.f)(t,n,e):e()}var Jo=L(8189);function zu(...n){return function Wu(){return(0,Jo.J)(1)}()((0,dn.D)(n,(0,mn.yG)(n)))}var Hs=L(8421);function Eo(n){return new xr.y(e=>{(0,Hs.Xf)(n()).subscribe(e)})}var Rr=L(9635),ys=L(576);function Gs(n,e){const t=(0,ys.m)(n)?n:()=>n,r=i=>i.error(t());return new xr.y(e?i=>e.schedule(r,0,i):r)}const pi=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Co=L(515),ai=L(727),Mt=L(4482);function Id(){return(0,Mt.e)((n,e)=>{let t=null;n._refCount++;const r=(0,zn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ff extends xr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Mt.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ai.w0;const t=this.getSubject();e.add(this.source.subscribe((0,zn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ai.w0.EMPTY)}return e}refCount(){return Id()(this)}}function Pn(n,e){return(0,Mt.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,zn.x)(r,g=>{i?.unsubscribe();let v=0;const D=a++;(0,Hs.Xf)(n(g,D)).subscribe(i=(0,zn.x)(r,S=>r.next(e?e(g,S,D,v++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function $l(n){return n<=0?()=>Co.E:(0,Mt.e)((e,t)=>{let r=0;e.subscribe((0,zn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Hl(...n){const e=(0,mn.yG)(n);return(0,Mt.e)((t,r)=>{(e?zu(n,t,e):zu(n,t)).subscribe(r)})}function Ki(n,e){return(0,Mt.e)((t,r)=>{let i=0;t.subscribe((0,zn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Mr=L(5577);function bo(n){return(0,Mt.e)((e,t)=>{let r=!1;e.subscribe((0,zn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function pf(n=U_){return(0,Mt.e)((e,t)=>{let r=!1;e.subscribe((0,zn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function U_(){return new pi}function _n(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ki((i,a)=>n(i,a,r)):xi.y,$l(1),t?bo(e):pf(()=>new pi))}function Ws(n,e){return(0,ys.m)(e)?(0,Mr.z)(n,e,1):(0,Mr.z)(n,1)}var kn=L(8505);function Xo(n){return(0,Mt.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,zn.x)(t,void 0,void 0,l=>{a=(0,Hs.Xf)(n(l,Xo(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function qu(n,e,t,r,i){return(a,l)=>{let h=t,g=e,v=0;a.subscribe((0,zn.x)(l,D=>{const S=v++;g=h?n(g,D,S):(h=!0,D),r&&l.next(g)},i&&(()=>{h&&l.next(g),l.complete()})))}}function qn(n,e){return(0,Mt.e)(qu(n,e,arguments.length>=2,!0))}function ui(n){return n<=0?()=>Co.E:(0,Mt.e)((e,t)=>{let r=[];e.subscribe((0,zn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Gl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ki((i,a)=>n(i,a,r)):xi.y,ui(1),t?bo(e):pf(()=>new pi))}function ta(n){return(0,Mt.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Bt="primary";class Cd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ga(n){return new Cd(n)}function na(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function On(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Ku(n[i],e[i]))return!1;return!0}function Ku(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function vs(n){return Array.prototype.concat.apply([],n)}function za(n){return n.length>0?n[n.length-1]:null}function rr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ri(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,dn.D)(Promise.resolve(n)):rt(n)}const bd={exact:function mf(n,e,t){if(!mi(n.segments,e.segments)||!ia(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!mf(n.children[r],e.children[r],t))return!1;return!0},subset:Ka},gf={exact:function ra(n,e){return On(n,e)},subset:function Zr(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ku(n[t],e[t]))},ignored:()=>!0};function qa(n,e,t){return bd[t.paths](n.root,e.root,t.matrixParams)&&gf[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ka(n,e,t){return Za(n,e,e.segments,t)}function Za(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!mi(i,t)||e.hasChildren()||!ia(i,t,r))}if(n.segments.length===t.length){if(!mi(n.segments,t)||!ia(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ka(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(mi(n.segments,i)&&ia(n.segments,i,r)&&n.children[Bt])&&Za(n.children[Bt],e,a,r)}}function ia(n,e,t){return e.every((r,i)=>gf[t](n[i].parameters,r.parameters))}class jr{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ga(this.queryParams)),this._queryParamMap}toString(){return Kl.serialize(this)}}class Vt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,rr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return b(this)}}class gi{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ga(this.parameters)),this._parameterMap}toString(){return ft(this)}}function mi(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Hn{}class ql{parse(e){const t=new aa(e);return new jr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${T(e.root,!0)}`,r=function Ft(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${U(t)}=${U(i)}`).join("&"):`${U(t)}=${U(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ee(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Kl=new ql;function b(n){return n.segments.map(e=>ft(e)).join("/")}function T(n,e){if(!n.hasChildren())return b(n);if(e){const t=n.children[Bt]?T(n.children[Bt],!1):"",r=[];return rr(n.children,(i,a)=>{a!==Bt&&r.push(`${a}:${T(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function zl(n,e){let t=[];return rr(n.children,(r,i)=>{i===Bt&&(t=t.concat(e(r,i)))}),rr(n.children,(r,i)=>{i!==Bt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Bt?[T(n.children[Bt],!1)]:[`${i}:${T(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Bt]?`${b(n)}/${t[0]}`:`${b(n)}/(${t.join("//")})`}}function R(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function U(n){return R(n).replace(/%3B/gi,";")}function ue(n){return R(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pe(n){return decodeURIComponent(n)}function Ke(n){return Pe(n.replace(/\+/g,"%20"))}function ft(n){return`${ue(n.path)}${function Pt(n){return Object.keys(n).map(e=>`;${ue(e)}=${ue(n[e])}`).join("")}(n.parameters)}`}const mt=/^[^\/()?;=#]+/;function Ln(n){const e=n.match(mt);return e?e[0]:""}const $r=/^[^=?&#]+/,oa=/^[^&#]+/;class aa{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vt([],{}):new Vt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Bt]=new Vt(e,t)),r}parseSegment(){const e=Ln(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(e),new gi(Pe(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ln(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ln(this.remaining);i&&(r=i,this.capture(r))}e[Pe(t)]=Pe(r)}parseQueryParam(e){const t=function Ya(n){const e=n.match($r);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Mi(n){const e=n.match(oa);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Ke(t),a=Ke(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ln(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Bt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Bt]:new Vt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,!1)}}function To(n){return n.segments.length>0?new Vt([],{[Bt]:n}):n}function So(n){const e={};for(const r of Object.keys(n.children)){const a=So(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function qs(n){if(1===n.numberOfChildren&&n.children[Bt]){const e=n.children[Bt];return new Vt(n.segments.concat(e.segments),e.children)}return n}(new Vt(n.segments,e))}function _i(n){return n instanceof jr}function Dd(n,e,t,r,i){if(0===t.length)return Ja(e.root,e.root,e.root,r,i);const a=function j_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _f(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return rr(a.outlets,(g,v)=>{h[v]="string"==typeof g?g.split("/"):g}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new _f(t,e,r)}(t);return a.toRoot()?Ja(e.root,e.root,new Vt([],{}),r,i):function l(g){const v=function fg(n,e,t,r){if(n.isAbsolute)return new ua(e.root,!0,0);if(-1===r)return new ua(t,t===e.root,0);return function Xa(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new m.vHH(4005,!1);i=r.segments.length}return new ua(r,!1,i-a)}(t,r+(Ao(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,g),D=v.processChildren?Yl(v.segmentGroup,v.index,a.commands):la(v.segmentGroup,v.index,a.commands);return Ja(e.root,v.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function Ao(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Zl(n){return"object"==typeof n&&null!=n&&n.outlets}function Ja(n,e,t,r,i){let l,a={};r&&rr(r,(g,v)=>{a[v]=Array.isArray(g)?g.map(D=>`${D}`):`${g}`}),l=n===e?t:B_(n,e,t);const h=To(So(l));return new jr(h,a,i)}function B_(n,e,t){const r={};return rr(n.children,(i,a)=>{r[a]=i===e?t:B_(i,e,t)}),new Vt(n.segments,r)}class _f{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ao(r[0]))throw new m.vHH(4003,!1);const i=r.find(Zl);if(i&&i!==za(r))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ua{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function la(n,e,t){if(n||(n=new Vt([],{})),0===n.segments.length&&n.hasChildren())return Yl(n,e,t);const r=function H_(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(Zl(h))break;const g=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!vf(g,v,l))return a;r+=2}else{if(!vf(g,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Vt(n.segments.slice(0,r.pathIndex),{});return a.children[Bt]=new Vt(n.segments.slice(r.pathIndex),n.children),Yl(a,0,i)}return r.match&&0===i.length?new Vt(n.segments,{}):r.match&&!n.hasChildren()?pg(n,e,t):r.match?Yl(n,0,i):pg(n,e,t)}function Yl(n,e,t){if(0===t.length)return new Vt(n.segments,{});{const r=function yf(n){return Zl(n[0])?n[0].outlets:{[Bt]:n}}(t),i={};return rr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=la(n.children[l],e,a))}),rr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Vt(n.segments,i)}}function pg(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Zl(a)){const g=Ql(a.outlets);return new Vt(r,g)}if(0===i&&Ao(t[0])){r.push(new gi(n.segments[e].path,Td(t[0]))),i++;continue}const l=Zl(a)?a.outlets[Bt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&Ao(h)?(r.push(new gi(l,Td(h))),i+=2):(r.push(new gi(l,{})),i++)}return new Vt(r,{})}function Ql(n){const e={};return rr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=pg(new Vt([],{}),0,t))}),e}function Td(n){const e={};return rr(n,(t,r)=>e[r]=`${t}`),e}function vf(n,e,t){return n==t.path&&On(e,t.parameters)}class Ks{constructor(e,t){this.id=e,this.url=t}}class Sd extends Ks{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zs extends Ks{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ad extends Ks{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xd extends Ks{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class G_ extends Ks{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gg extends Ks{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W_ extends Ks{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ys extends Ks{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jl extends Ks{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mg{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class z_{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cE{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dE{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hE{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nT{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=I(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=I(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=x(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return x(e,this._root).map(t=>t.value)}}function I(n,e){if(n===e.value)return e;for(const t of e.children){const r=I(n,t);if(r)return r}return null}function x(n,e){if(n===e.value)return[e];for(const t of e.children){const r=x(n,t);if(r.length)return r.unshift(e),r}return[]}class O{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ne(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Re extends _{constructor(e,t){super(e),this.snapshot=t,wf(this,e)}toString(){return this.snapshot.toString()}}function nt(n,e){const t=function dt(n,e){const l=new Zi([],{},{},"",{},Bt,e,null,n.root,-1,{});return new Rd("",new O(l,[]))}(n,e),r=new Ar([new gi("",{})]),i=new Ar({}),a=new Ar({}),l=new Ar({}),h=new Ar(""),g=new At(r,i,l,h,a,Bt,e,t.root);return g.snapshot=t.root,new Re(new O(g,[]),t)}class At{constructor(e,t,r,i,a,l,h,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>Ga(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>Ga(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Sn(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function ws(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Zi{constructor(e,t,r,i,a,l,h,g,v,D,S,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=g,this._urlSegment=v,this._lastPathIndex=D,this._correctedLastPathIndex=N??D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ga(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ga(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Rd extends _{constructor(e,t){super(t),this.url=e,wf(this,t)}toString(){return Ef(this._root)}}function wf(n,e){e.value._routerState=n,e.children.forEach(t=>wf(n,t))}function Ef(n){const e=n.children.length>0?` { ${n.children.map(Ef).join(", ")} } `:"";return`${n.value}${e}`}function Yu(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,On(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),On(e.params,t.params)||n.params.next(t.params),function Wa(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!On(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),On(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Qu(n,e){const t=On(n.params,e.params)&&function sa(n,e){return mi(n,e)&&n.every((t,r)=>On(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Qu(n.parent,e.parent))}function ec(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function q_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ec(n,r,i);return ec(n,r)})}(n,e,t);return new O(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>ec(n,h)),l}}const r=function Md(n){return new At(new Ar(n.url),new Ar(n.params),new Ar(n.queryParams),new Ar(n.fragment),new Ar(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>ec(n,a));return new O(r,i)}}const Nd="ngNavigationCancelingError";function _g(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=_i(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Pd(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Pd(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Nd]=!0,r.cancellationCode=e,t&&(r.url=t),r}function yg(n){return K_(n)&&_i(n.url)}function K_(n){return n&&n[Nd]}class vg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new If,this.attachRef=null}}class If{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new vg,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const kd=!1;let Z_=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=i||Bt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,kd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,kd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,kd);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,kd);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,g=new Nr(t,h,i.injector);if(r&&function rT(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,g)}else this.activated=i.createComponent(l,{index:i.length,injector:g,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(If),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Nr{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===At?this.route:e===If?this.childContexts:this.parent.get(e,t)}}let fE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[Z_],encapsulation:2}),n})();function wg(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function tc(n){const e=n.children&&n.children.map(tc),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Bt&&(t.component=fE),t}function Yi(n){return n.outlet||Bt}function Q_(n,e){const t=n.filter(r=>Yi(r)===e);return t.push(...n.filter(r=>Yi(r)!==e)),t}function J_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class oT{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Yu(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ne(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),rr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ne(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ne(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ne(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new nT(a.value.snapshot))}),e.children.length&&this.forwardEvent(new dE(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Yu(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Yu(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=J_(i.snapshot),g=h?.get(m._Vd)??null;l.attachRef=null,l.route=i,l.resolver=g,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class X_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Cf{constructor(e,t){this.component=e,this.route=t}}function ey(n,e,t){const r=n._root;return nc(r,e?e._root:null,t,[r.value])}function Eg(n,e,t){return(J_(e)??t).get(n)}function nc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ne(e);return n.children.forEach(l=>{(function gE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const g=function mE(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!mi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!mi(n.url,e.url)||!On(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qu(n,e)||!On(n.queryParams,e.queryParams);default:return!Qu(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new X_(r)):(a.data=l.data,a._resolvedData=l._resolvedData),nc(n,e,a.component?h?h.children:null:t,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Cf(h.outlet.component,l))}else l&&xo(e,h,i),i.canActivateChecks.push(new X_(r)),nc(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),rr(a,(l,h)=>xo(l,t.getContext(h),i)),i}function xo(n,e,t){const r=ne(n),i=n.value;rr(r,(a,l)=>{xo(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Cf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function bf(n){return"function"==typeof n}const bg=Symbol("INITIAL_VALUE");function Od(){return Pn(n=>qi(n.map(e=>e.pipe($l(1),Hl(bg)))).pipe((0,gt.U)(e=>{for(const t of e)if(!0!==t){if(t===bg)return bg;if(!1===t||t instanceof jr)return t}return!0}),Ki(e=>e!==bg),$l(1)))}function vE(n){return(0,Rr.z)((0,kn.b)(e=>{if(_i(e))throw _g(0,e)}),(0,gt.U)(e=>!0===e))}const EE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function IE(n,e,t,r,i){const a=ic(n,e,t);return a.matched?function wE(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?rt(i.map(l=>{const h=n.get(l),g=function rc(n){return n&&bf(n.canMatch)}(h)?h.canMatch(e,t):h(e,t);return Ri(g)})).pipe(Od(),vE()):rt(!0)}(r=wg(e,r),e,t).pipe((0,gt.U)(l=>!0===l?a:{...EE})):rt(a)}function ic(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...EE}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||na)(t,n,e);if(!i)return{...EE};const a={};rr(i.posParams,(h,g)=>{a[g]=h.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Dg(n,e,t,r,i="corrected"){if(t.length>0&&function pT(n,e,t){return t.some(r=>Tf(n,e,r)&&Yi(r)!==Bt)}(n,t,r)){const l=new Vt(e,function Df(n,e,t,r){const i={};i[Bt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Yi(a)!==Bt){const l=new Vt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Yi(a)]=l}return i}(n,e,r,new Vt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function zR(n,e,t){return t.some(r=>Tf(n,e,r))}(n,t,r)){const l=new Vt(n.segments,function Fd(n,e,t,r,i,a){const l={};for(const h of r)if(Tf(n,t,h)&&!i[Yi(h)]){const g=new Vt([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Yi(h)]=g}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Vt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Tf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function CE(n,e,t,r){return!!(Yi(n)===r||r!==Bt&&Tf(e,t,n))&&("**"===n.path||ic(e,n,t).matched)}function bE(n,e,t){return 0===e.length&&!n.children[t]}const Tg=!1;class Sf{constructor(e){this.segmentGroup=e||null}}class sy{constructor(e){this.urlTree=e}}function sc(n){return Gs(new Sf(n))}function DE(n){return Gs(new sy(n))}class KR{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Dg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Vt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Bt).pipe((0,gt.U)(a=>this.createUrlTree(So(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xo(a=>{if(a instanceof sy)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Sf?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Bt).pipe((0,gt.U)(i=>this.createUrlTree(So(i),e.queryParams,e.fragment))).pipe(Xo(i=>{throw i instanceof Sf?this.noMatchError(i):i}))}noMatchError(e){return new m.vHH(4002,Tg)}createUrlTree(e,t,r){const i=To(e);return new jr(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,gt.U)(a=>new Vt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,dn.D)(i).pipe(Ws(a=>{const l=r.children[a],h=Q_(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,gt.U)(g=>({segment:g,outlet:a})))}),qn((a,l)=>(a[l.outlet]=l.segment,a),{}),Gl())}expandSegment(e,t,r,i,a,l){return(0,dn.D)(r).pipe(Ws(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(Xo(v=>{if(v instanceof Sf)return rt(null);throw v}))),_n(h=>!!h),Xo((h,g)=>{if(h instanceof pi||"EmptyError"===h.name)return bE(t,i,a)?rt(new Vt([],{})):sc(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return CE(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):sc(t):sc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?DE(a):this.lineralizeSegments(r,a).pipe((0,Mr.z)(l=>{const h=new Vt(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:g,remainingSegments:v,positionalParamSegments:D}=ic(t,i,a);if(!h)return sc(t);const S=this.applyRedirectCommands(g,i.redirectTo,D);return i.redirectTo.startsWith("/")?DE(S):this.lineralizeSegments(i,S).pipe((0,Mr.z)(N=>this.expandSegment(e,t,r,N.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=wg(r,e),r.loadChildren?(r._loadedRoutes?rt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,gt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Vt(i,{})))):rt(new Vt(i,{}))):IE(t,r,i,e).pipe(Pn(({matched:l,consumedSegments:h,remainingSegments:g})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Mr.z)(D=>{const S=D.injector??e,N=D.routes,{segmentGroup:V,slicedSegments:Q}=Dg(t,h,g,N),Ee=new Vt(V.segments,V.children);if(0===Q.length&&Ee.hasChildren())return this.expandChildren(S,N,Ee).pipe((0,gt.U)(It=>new Vt(h,It)));if(0===N.length&&0===Q.length)return rt(new Vt(h,{}));const xe=Yi(r)===a;return this.expandSegment(S,Ee,N,Q,xe?Bt:a,!0).pipe((0,gt.U)(vt=>new Vt(h.concat(vt.segments),vt.children)))})):sc(t)))}getChildConfig(e,t,r){return t.children?rt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?rt({routes:t._loadedRoutes,injector:t._loadedInjector}):function yE(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?rt(!0):rt(i.map(l=>{const h=n.get(l),g=function Ig(n){return n&&bf(n.canLoad)}(h)?h.canLoad(e,t):h(e,t);return Ri(g)})).pipe(Od(),vE())}(e,t,r).pipe((0,Mr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,kn.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function oy(n){return Gs(Pd(Tg,3))}())):rt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return rt(r);if(i.numberOfChildren>1||!i.children[Bt])return Gs(new m.vHH(4e3,Tg));i=i.children[Bt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new jr(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return rr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return rr(t.children,(h,g)=>{l[g]=this.createSegmentGroup(e,h,r,i)}),new Vt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,Tg);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class ZR{}class JR{constructor(e,t,r,i,a,l,h,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h,this.urlSerializer=g}recognize(){const e=Dg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Bt).pipe((0,gt.U)(t=>{if(null===t)return null;const r=new Zi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Bt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new O(r,t),a=new Rd(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Sn(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,dn.D)(Object.keys(r.children)).pipe(Ws(i=>{const a=r.children[i],l=Q_(t,i);return this.processSegmentGroup(e,l,a,i)}),qn((i,a)=>i&&a?(i.push(...a),i):null),function ea(n,e=!1){return(0,Mt.e)((t,r)=>{let i=0;t.subscribe((0,zn.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),bo(null),Gl(),(0,gt.U)(i=>{if(null===i)return null;const a=cy(i);return function mT(n){n.sort((e,t)=>e.value.outlet===Bt?-1:t.value.outlet===Bt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,dn.D)(t).pipe(Ws(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),_n(l=>!!l),Xo(l=>{if(l instanceof pi)return bE(r,i,a)?rt([]):rt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!CE(t,r,i,a))return rt(null);let l;if("**"===t.path){const h=i.length>0?za(i).parameters:{},g=Sg(r)+i.length;l=rt({snapshot:new Zi(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ag(t),Yi(t),t.component??t._loadedComponent??null,t,dy(r),g,Ud(t),g),consumedSegments:[],remainingSegments:[]})}else l=IE(r,t,i,e).pipe((0,gt.U)(({matched:h,consumedSegments:g,remainingSegments:v,parameters:D})=>{if(!h)return null;const S=Sg(r)+g.length;return{snapshot:new Zi(g,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ag(t),Yi(t),t.component??t._loadedComponent??null,t,dy(r),S,Ud(t),S),consumedSegments:g,remainingSegments:v}}));return l.pipe(Pn(h=>{if(null===h)return rt(null);const{snapshot:g,consumedSegments:v,remainingSegments:D}=h;e=t._injector??e;const S=t._loadedInjector??e,N=function TE(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:Q}=Dg(r,v,D,N.filter(xe=>void 0===xe.redirectTo),this.relativeLinkResolution);if(0===Q.length&&V.hasChildren())return this.processChildren(S,N,V).pipe((0,gt.U)(xe=>null===xe?null:[new O(g,xe)]));if(0===N.length&&0===Q.length)return rt([new O(g,[])]);const Ee=Yi(t)===a;return this.processSegment(S,N,V,Q,Ee?Bt:a).pipe((0,gt.U)(xe=>null===xe?null:[new O(g,xe)]))}))}}function ly(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function cy(n){const e=[],t=new Set;for(const r of n){if(!ly(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=cy(r.children);e.push(new O(r.value,i))}return e.filter(r=>!t.has(r))}function dy(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Sg(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ag(n){return n.data||{}}function Ud(n){return n.resolve||{}}const hy=Symbol("RouteTitle");function xE(n){return"string"==typeof n.title||null===n.title}function Af(n){return Pn(e=>{const t=n(e);return t?(0,dn.D)(t).pipe((0,gt.U)(()=>e)):rt(e)})}class DT extends class bT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const py=new m.OlP("ROUTES");let gy=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return rt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ri(t.loadComponent()).pipe((0,kn.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),ta(()=>{this.componentLoaders.delete(t)})),i=new ff(r,()=>new oi.x).pipe(Id());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return rt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,gt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let g,v,D=!1;Array.isArray(h)?v=h:(g=h.create(t).injector,v=vs(g.get(py,[],m.XFs.Self|m.XFs.Optional)));return{routes:v.map(tc),injector:g}}),ta(()=>{this.childrenLoaders.delete(r)})),l=new ff(a,()=>new oi.x).pipe(Id());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ri(t()).pipe((0,Mr.z)(r=>r instanceof m.YKP||Array.isArray(r)?rt(r):(0,dn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class my{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function _y(n){throw n}function yi(n,e,t){return e.parse("/")}const Rf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Yr=(()=>{class n{constructor(t,r,i,a,l,h,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new oi.x,this.errorHandler=_y,this.malformedUriErrorHandler=yi,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>rt(void 0),this.urlHandlingStrategy=new my,this.routeReuseStrategy=new DT,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(gy),this.configLoader.onLoadEndListener=N=>this.triggerEvent(new z_(N)),this.configLoader.onLoadStartListener=N=>this.triggerEvent(new mg(N)),this.ngModule=l.get(m.h0i),this.console=l.get(m.c2e);const S=l.get(m.R0b);this.isNgZoneEnabled=S instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function Wl(){return new jr(new Vt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=nt(this.currentUrlTree,this.rootComponentType),this.transitions=new Ar({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ki(i=>0!==i.id),(0,gt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Pn(i=>{let a=!1,l=!1;return rt(i).pipe((0,kn.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Pn(h=>{const g=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return vy(h.source)&&(this.browserUrlTree=h.extractedUrl),rt(h).pipe(Pn(S=>{const N=this.transitions.getValue();return r.next(new Sd(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?Co.E:Promise.resolve(S)}),function ay(n,e,t,r){return Pn(i=>function qR(n,e,t,r,i){return new KR(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,gt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,kn.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function yT(n,e,t,r,i,a){return(0,Mr.z)(l=>function QR(n,e,t,r,i,a,l="emptyOnly",h="legacy"){return new JR(n,e,t,r,i,l,h,a).recognize().pipe(Pn(g=>null===g?function YR(n){return new xr.y(e=>e.error(n))}(new ZR):rt(g)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,gt.U)(h=>({...l,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,kn.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new G_(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(N)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:V,source:Q,restoredState:Ee,extras:xe}=h,yt=new Sd(N,this.serializeUrl(V),Q,Ee);r.next(yt);const vt=nt(V,this.rootComponentType).snapshot;return rt(i={...h,targetSnapshot:vt,urlAfterRedirects:V,extras:{...xe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),Co.E}),(0,kn.b)(h=>{const g=new gg(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(g)}),(0,gt.U)(h=>i={...h,guards:ey(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function _E(n,e){return(0,Mr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?rt({...t,guardsResult:!0}):function Ld(n,e,t,r){return(0,dn.D)(n).pipe((0,Mr.z)(i=>function fT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?rt(a.map(h=>{const g=Eg(h,e,i);return Ri(function Cg(n){return n&&bf(n.canDeactivate)}(g)?g.canDeactivate(n,e,t,r):g(n,e,t,r)).pipe(_n())})).pipe(Od()):rt(!0)}(i.component,i.route,t,e,r)),_n(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Mr.z)(h=>h&&function ty(n){return"boolean"==typeof n}(h)?function lT(n,e,t,r){return(0,dn.D)(e).pipe(Ws(i=>zu(function dT(n,e){return null!==n&&e&&e(new cE(n)),rt(!0)}(i.route.parent,r),function cT(n,e){return null!==n&&e&&e(new hE(n)),rt(!0)}(i.route,r),function iy(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function WR(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Eo(()=>rt(l.guards.map(g=>{const v=Eg(g,l.node,t);return Ri(function ny(n){return n&&bf(n.canActivateChild)}(v)?v.canActivateChild(r,n):v(r,n)).pipe(_n())})).pipe(Od())));return rt(a).pipe(Od())}(n,i.path,t),function hT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const i=r.map(a=>Eo(()=>{const l=Eg(a,e,t);return Ri(function aT(n){return n&&bf(n.canActivate)}(l)?l.canActivate(e,n):l(e,n)).pipe(_n())}));return rt(i).pipe(Od())}(n,i.route,t))),_n(i=>!0!==i,!0))}(r,a,n,e):rt(h)),(0,gt.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,kn.b)(h=>{if(i.guardsResult=h.guardsResult,_i(h.guardsResult))throw _g(0,h.guardsResult);const g=new W_(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(g)}),Ki(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),Af(h=>{if(h.guards.canActivateChecks.length)return rt(h).pipe((0,kn.b)(g=>{const v=new Ys(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),Pn(g=>{let v=!1;return rt(g).pipe(function vT(n,e){return(0,Mr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return rt(t);let a=0;return(0,dn.D)(i).pipe(Ws(l=>function AE(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!xE(i)&&(a[hy]=i.title),function wT(n,e,t,r){const i=function ET(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return rt({});const a={};return(0,dn.D)(i).pipe((0,Mr.z)(l=>function IT(n,e,t,r){const i=Eg(n,e,r);return Ri(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe(_n(),(0,kn.b)(h=>{a[l]=h}))),ui(1),function zs(n){return(0,gt.U)(()=>n)}(a),Xo(l=>l instanceof pi?Co.E:Gs(l)))}(a,n,e,r).pipe((0,gt.U)(l=>(n._resolvedData=l,n.data=Sn(n,t).resolve,i&&xE(i)&&(n.data[hy]=i.title),null)))}(l.route,r,n,e)),(0,kn.b)(()=>a++),ui(1),(0,Mr.z)(l=>a===i.length?rt(t):Co.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,kn.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,kn.b)(g=>{const v=new Jl(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}))}),Af(h=>{const g=v=>{const D=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,kn.b)(S=>{v.component=S}),(0,gt.U)(()=>{})));for(const S of v.children)D.push(...g(S));return D};return qi(g(h.targetSnapshot.root)).pipe(bo(),$l(1))}),Af(()=>this.afterPreactivation()),(0,gt.U)(h=>{const g=function Xl(n,e,t){const r=ec(n,e._root,t?t._root:void 0);return new Re(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:g}}),(0,kn.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(r=>(new oT(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,kn.b)({next(){a=!0},complete(){a=!0}}),ta(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Xo(h=>{if(l=!0,K_(h)){yg(h)||(this.navigated=!0,this.restoreHistory(i,!0));const g=new Ad(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(g),yg(h)){const v=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vy(i.source)};this.scheduleNavigation(v,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new xd(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(g);try{i.resolve(this.errorHandler(h))}catch(v){i.reject(v)}}return Co.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const h={...a};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(tc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:g}=r,v=i||this.routerState.root,D=g?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),Dd(v,this.currentUrlTree,t,S,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=_i(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function TT(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Rf}:!1===r?{...yy}:r,_i(t))return qa(this.currentUrlTree,t,i);const a=this.parseUrl(t);return qa(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Zs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,g,v;l?(h=l.resolve,g=l.reject,v=l.promise):v=new Promise((N,V)=>{h=N,g=V});const D=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:D,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:h,reject:g,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new Ad(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function vy(n){return"imperative"!==n}let oc=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new oi.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:(0,m.D6c)(this.skipLocationChange),replaceUrl:(0,m.D6c)(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:(0,m.D6c)(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Yr),m.Y36(At),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&m.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),n})(),ME=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Bt);return r}getResolvedTitleForRoute(t){return t.data[hy]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(AT)},providedIn:"root"}),n})(),AT=(()=>{class n extends ME{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Uu))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class NE{}let PE=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ki(t=>t instanceof Zs),Ws(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,m.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,dn.D)(i).pipe((0,Jo.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):rt(null);const a=i.pipe((0,Mr.z)(l=>null===l?rt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,dn.D)([a,l]).pipe((0,Jo.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Yr),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(NE),m.LFG(gy))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const ac=new m.OlP("");let eu=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Sd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof w&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new w(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const kE=new m.OlP("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),xT=new m.OlP("ROUTER_FORROOT_GUARD"),wy=new m.OlP(""),nM=[Oe,{provide:Hn,useClass:ql},{provide:Yr,useFactory:function NT(n,e,t,r,i,a,l,h={},g,v){const D=new Yr(null,n,e,t,r,i,vs(a));return g&&(D.urlHandlingStrategy=g),v&&(D.routeReuseStrategy=v),D.titleStrategy=l,function LE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,D),D},deps:[Hn,If,Oe,m.zs3,m.Sil,py,ME,kE,[class Ni{},new m.FiY],[class CT{},new m.FiY]]},If,{provide:At,useFactory:function Iy(n){return n.routerState.root},deps:[Yr]},gy];function ca(){return new m.PXZ("Router",Yr)}let Rg=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[nM,[],Vd(t),{provide:xT,useFactory:MT,deps:[[Yr,new m.FiY,new m.tp0]]},{provide:kE,useValue:r||{}},r?.useHash?{provide:Ce,useClass:Ve}:{provide:Ce,useClass:Xe},{provide:ac,useFactory:()=>{const n=(0,m.f3M)(Yr),e=(0,m.f3M)(Ra),t=(0,m.f3M)(kE);return t.scrollOffset&&e.setOffset(t.scrollOffset),new eu(n,e,t)}},r?.preloadingStrategy?kT(r.preloadingStrategy):[],{provide:m.PXZ,multi:!0,useFactory:ca},r?.initialNavigation?rM(r):[],[{provide:by,useFactory:Cy},{provide:m.tb,multi:!0,useExisting:by}]]}}static forChild(t){return{ngModule:n,providers:[Vd(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(xT,8),m.LFG(Yr,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function MT(n){return"guarded"}function Vd(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:py,multi:!0,useValue:n}]}function Cy(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(Yr),i=n.get(Mg);null===n.get(Dy,null,m.XFs.Optional)&&r.initialNavigation(),n.get(wy,null,m.XFs.Optional)?.setUpPreloading(),n.get(ac,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const by=new m.OlP("");function rM(n){return["disabled"===n.initialNavigation?[{provide:m.ip1,multi:!0,useFactory:()=>{const n=(0,m.f3M)(Yr);return()=>{n.setUpLocationChangeListener()}}},{provide:Dy,useValue:"disabled"}]:[],"enabledBlocking"===n.initialNavigation?[{provide:Dy,useValue:"enabledBlocking"},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:n=>{const e=n.get(q,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(i=>{const a=n.get(Yr),l=n.get(Mg);(function r(i){n.get(Yr).events.pipe(Ki(l=>l instanceof Zs||l instanceof Ad||l instanceof xd),(0,gt.U)(l=>l instanceof Zs||l instanceof Ad&&(0===l.code||1===l.code)&&null),Ki(l=>null!==l),$l(1)).subscribe(()=>{i()})})(()=>{i(!0),t=!0}),a.afterPreactivation=()=>(i(!0),t||l.closed?rt(void 0):l),a.initialNavigation()}))}}]:[]]}const Mg=new m.OlP("",{factory:()=>new oi.x}),Dy=new m.OlP("");function kT(n){return[PE,{provide:wy,useExisting:PE},{provide:NE,useExisting:n}]}var OT=L(6457),k=L(2090),Pi=L(9681),Qs=L(1877),Es=L(4859),Ng=L(4986),ln=L(5813);function Sy(){return(0,Mt.e)((n,e)=>{let t,r=!1;n.subscribe((0,zn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function UE(n,e=xi.y){return n=n??VE,(0,Mt.e)((t,r)=>{let i,a=!0;t.subscribe((0,zn.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function VE(n,e){return n===e}var ut,Pr=L(2011),Pg=(L(5881),L(3942)),be=L(5861),LT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ju={},Ay=Ay||{},kt=LT||self;function Mf(){}function kg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function uc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var $d="closure_uid_"+(1e9*Math.random()>>>0),Og=0;function jE(n,e,t){return n.call.apply(n.bind,arguments)}function xy(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Qr(n,e,t){return(Qr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jE:xy).apply(null,arguments)}function Hd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Cr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Xu(){this.s=this.s,this.o=this.o}var FT={};Xu.prototype.s=!1,Xu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function BE(n){return Object.prototype.hasOwnProperty.call(n,$d)&&n[$d]||(n[$d]=++Og)}(this);delete FT[n]}},Xu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const HE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Ry=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function Ny(n){return Array.prototype.concat.apply([],arguments)}function GE(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Nf(n){return/^[\s\xa0]*$/.test(n)}var ki,WE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function vi(n,e){return-1!=n.indexOf(e)}function Py(n,e){return n<e?-1:n>e?1:0}e:{var Js=kt.navigator;if(Js){var zE=Js.userAgent;if(zE){ki=zE;break e}}ki=""}function Lg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function qE(n){const e={};for(const t in n)e[t]=n[t];return e}var KE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ZE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<KE.length;a++)t=KE[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ky(n){return ky[" "](n),n}ky[" "]=Mf;var Fg,n,UT=vi(ki,"Opera"),Gd=vi(ki,"Trident")||vi(ki,"MSIE"),QE=vi(ki,"Edge"),Ot=QE||Gd,Oy=vi(ki,"Gecko")&&!(vi(ki.toLowerCase(),"webkit")&&!vi(ki,"Edge"))&&!(vi(ki,"Trident")||vi(ki,"MSIE"))&&!vi(ki,"Edge"),JE=vi(ki.toLowerCase(),"webkit")&&!vi(ki,"Edge");function Ly(){var n=kt.document;return n?n.documentMode:void 0}e:{var Fy="",Ug=(n=ki,Oy?/rv:([^\);]+)(\)|;)/.exec(n):QE?/Edge\/([\d\.]+)/.exec(n):Gd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):JE?/WebKit\/(\S+)/.exec(n):UT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ug&&(Fy=Ug?Ug[1]:""),Gd){var Uy=Ly();if(null!=Uy&&Uy>parseFloat(Fy)){Fg=String(Uy);break e}}Fg=Fy}var XE={};var eI=kt.document&&Gd&&(Ly()||parseInt(Fg,10))||void 0,tI=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",Mf,e),kt.removeEventListener("test",Mf,e)}catch{}return n}();function mr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Pf(n,e){if(mr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Oy){e:{try{ky(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:By[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Pf.Z.h.call(this)}}mr.prototype.h=function(){this.defaultPrevented=!0},Cr(Pf,mr);var By={2:"touch",3:"pen",4:"mouse"};Pf.prototype.h=function(){Pf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var lc="closure_listenable_"+(1e6*Math.random()|0),jT=0;function sM(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++jT,this.ca=this.fa=!1}function jy(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function $y(n){this.src=n,this.g={},this.h=0}function Hy(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=HE(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(jy(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Vg(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}$y.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Vg(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new sM(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var nI="closure_lm_"+(1e6*Math.random()|0),Gy={};function cc(n,e,t,r,i){if(r&&r.once)return kf(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)cc(n,e[a],t,r,i);return null}return t=qy(t),n&&n[lc]?n.N(e,t,uc(r)?!!r.capture:!!r,i):rI(n,e,t,!1,r,i)}function rI(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=uc(i)?!!i.capture:!!i,h=Wy(n);if(h||(n[nI]=h=new $y(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function iI(){var e=$T;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)tI||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(oI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function kf(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)kf(n,e[a],t,r,i);return null}return t=qy(t),n&&n[lc]?n.O(e,t,uc(r)?!!r.capture:!!r,i):rI(n,e,t,!0,r,i)}function sI(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)sI(n,e[a],t,r,i);else r=uc(r)?!!r.capture:!!r,t=qy(t),n&&n[lc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Vg(a=n.g[e],t,r,i))&&(jy(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Wy(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Vg(e,t,r,i)),(t=-1<n?e[n]:null)&&Bg(t))}function Bg(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[lc])Hy(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(oI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Wy(e))?(Hy(t,n),0==t.h&&(t.src=null,e[nI]=null)):jy(n)}}}function oI(n){return n in Gy?Gy[n]:Gy[n]="on"+n}function $T(n,e){if(n.ca)n=!0;else{e=new Pf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Bg(n),n=t.call(r,e)}return n}function Wy(n){return(n=n[nI])instanceof $y?n:null}var zy="__closure_events_fn_"+(1e9*Math.random()>>>0);function qy(n){return"function"==typeof n?n:(n[zy]||(n[zy]=function(e){return n.handleEvent(e)}),n[zy])}function Hr(){Xu.call(this),this.i=new $y(this),this.P=this,this.I=null}function li(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new mr(e,n);else if(e instanceof mr)e.target=e.target||n;else{var i=e;ZE(e=new mr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Of(l,r,!0,e)&&i}if(i=Of(l=e.g=n,r,!0,e)&&i,i=Of(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Of(l=e.g=t[a],r,!1,e)&&i}function Of(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,g=l.ia||l.src;l.fa&&Hy(n.i,l),i=!1!==h.call(g,r)&&i}}return i&&!r.defaultPrevented}Cr(Hr,Xu),Hr.prototype[lc]=!0,Hr.prototype.removeEventListener=function(n,e,t,r){sI(this,n,e,t,r)},Hr.prototype.M=function(){if(Hr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)jy(t[r]);delete n.g[e],n.h--}}this.I=null},Hr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Hr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var jg=kt.JSON.stringify;function Ky(){var n=Xs;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Hg,$g=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new HT,n=>n.reset());class HT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function aM(n){kt.setTimeout(()=>{throw n},0)}function el(n,e){Hg||function aI(){var n=kt.Promise.resolve(void 0);Hg=function(){n.then(uI)}}(),Wd||(Hg(),Wd=!0),Xs.add(n,e)}var Wd=!1,Xs=new class oM{constructor(){this.h=this.g=null}add(e,t){const r=$g.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function uI(){for(var n;n=Ky();){try{n.h.call(n.g)}catch(t){aM(t)}var e=$g;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Wd=!1}function Gg(n,e){Hr.call(this),this.h=n||1,this.g=e||kt,this.j=Qr(this.kb,this),this.l=Date.now()}function Lf(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Ro(n,e,t){if("function"==typeof n)t&&(n=Qr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Qr(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function Wg(n){n.g=Ro(()=>{n.g=null,n.i&&(n.i=!1,Wg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Cr(Gg,Hr),(ut=Gg.prototype).da=!1,ut.S=null,ut.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),li(this,"tick"),this.da&&(Lf(this),this.start()))}},ut.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){Gg.Z.M.call(this),Lf(this),delete this.g};class lI extends Xu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Wg(this)}M(){super.M(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dc(n){Xu.call(this),this.h=n,this.g={}}Cr(dc,Xu);var GT=[];function Zy(n,e,t,r){Array.isArray(t)||(t&&(GT[0]=t.toString()),t=GT);for(var i=0;i<t.length;i++){var a=cc(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function WT(n){Lg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Bg(e)},n),n.g={}}function hc(){this.g=!0}function tl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function uM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return jg(t)}catch{return e}}(n,t)+(r?" "+r:"")})}dc.prototype.M=function(){dc.Z.M.call(this),WT(this)},dc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hc.prototype.Aa=function(){this.g=!1},hc.prototype.info=function(){};var fc={},cI=null;function qg(){return cI=cI||new Hr}function dI(n){mr.call(this,fc.Ma,n)}function zd(n){const e=qg();li(e,new dI(e,n))}function zT(n,e){mr.call(this,fc.STAT_EVENT,n),this.stat=e}function Oi(n){const e=qg();li(e,new zT(e,n))}function qT(n,e){mr.call(this,fc.Na,n),this.size=e}function qd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}fc.Ma="serverreachability",Cr(dI,mr),fc.STAT_EVENT="statevent",Cr(zT,mr),fc.Na="timingevent",Cr(qT,mr);var Ff={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},hI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Uf(){}function ZT(){}Uf.prototype.h=null;var gI,Kg={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function fI(){mr.call(this,"d")}function pI(){mr.call(this,"c")}function Jy(){}function Zg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new dc(this),this.P=lM,this.W=new Gg(n=Ot?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new YT}function YT(){this.i=null,this.g="",this.h=!1}Cr(fI,mr),Cr(pI,mr),Cr(Jy,Uf),Jy.prototype.g=function(){return new XMLHttpRequest},Jy.prototype.i=function(){return{}},gI=new Jy;var lM=45e3,da={},Kd={};function Xy(n,e,t){n.K=1,n.v=Gf(Is(e)),n.s=t,n.U=!0,ev(n,null)}function ev(n,e){n.F=Date.now(),Vf(n),n.A=Is(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),tm(t.h,"t",r),n.C=0,t=n.l.H,n.h=new YT,n.g=Iv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new lI(Qr(n.Ia,n,n.g),n.O)),Zy(n.V,n.g,"readystatechange",n.gb),e=n.H?qE(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),zd(1),function zg(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),g=0;g<h.length;g++){var v=h[g].split("=");if(1<v.length){var D=v[0];v=v[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+v+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Yg(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function tv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=nv(n,t),i==Kd){4==e&&(n.o=4,Oi(14),r=!1),tl(n.j,n.m,null,"[Incomplete Response]");break}if(i==da){n.o=4,Oi(15),tl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}tl(n.j,n.m,i,null),rv(n,i)}Yg(n)&&i!=Kd&&i!=da&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Oi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),xI(e),e.L=!0,Oi(11))):(tl(n.j,n.m,t,"[Invalid Chunked Response]"),ru(n),jf(n))}function nv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Kd:(t=Number(e.substring(t,r)),isNaN(t)?da:(r+=1)+t>e.length?Kd:(e=e.substr(r,t),n.C=r+t,e))}function Vf(n){n.Y=Date.now()+n.P,nu(n,n.P)}function nu(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=qd(Qr(n.eb,n),e)}function Bf(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function jf(n){0==n.l.G||n.I||MI(n.l,n)}function ru(n){Bf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Lf(n.W),WT(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function rv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||av(t.i,n)))if(t.I=n.N,!n.J&&av(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Ev(t),mc(t)}wv(t),Oi(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=qd(Qr(t.ab,t),6e3));if(1>=ov(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else yc(t,11)}else if((n.J||t.g==n)&&Ev(t),!Nf(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.U=v[0],v=v[1],2==t.G)if("c"==v[0]){t.J=v[1],t.la=v[2];const D=v[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=v[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=v[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const Q=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var a=r.i;!a.g&&(vi(Q,"spdy")||vi(Q,"quic")||vi(Q,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(uv(a,a.h),a.h=null))}if(r.D){const Ee=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;Ee&&(r.sa=Ee,Fn(r.F,r.D,Ee))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=uS(r,r.H?r.la:null,r.W),l.J){lv(r.i,l);var h=l,g=r.K;g&&h.setTimeout(g),h.B&&(Bf(h),Vf(h)),r.g=l}else th(r);0<t.l.length&&om(t)}else"stop"!=v[0]&&"close"!=v[0]||yc(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?yc(t,7):Mo(t):"noop"!=v[0]&&t.j&&t.j.wa(v),t.A=0)}zd(4)}catch{}}function iv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(kg(n)||"string"==typeof n)Ry(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(kg(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function mI(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(kg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Zd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Zd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Yd(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];eo(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)eo(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function eo(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ut=Zg.prototype).setTimeout=function(n){this.P=n},ut.gb=function(n){n=n.target;const e=this.L;e&&3==iu(n)?e.l():this.Ia(n)},ut.Ia=function(n){try{if(n==this.g)e:{const D=iu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||Ot||this.g&&(this.h.h||this.g.ga()||_v(this.g)))){this.I||4!=D||7==e||zd(8==e||0>=S?3:2),Bf(this);var t=this.g.ba();this.N=t;t:if(Yg(this)){var r=_v(this.g);n="";var i=r.length,a=4==iu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ru(this),jf(this);var l="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function Yy(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nf(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Oi(12),ru(this),jf(this);break e}tl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,rv(this,t)}this.U?(tv(this,D,l),Ot&&this.i&&3==D&&(Zy(this.V,this.W,"tick",this.fb),this.W.start())):(tl(this.j,this.m,l,null),rv(this,l)),4==D&&ru(this),this.i&&!this.I&&(4==D?MI(this.l,this):(this.i=!1,Vf(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Oi(12)):(this.o=0,Oi(13)),ru(this),jf(this)}}}catch{}},ut.fb=function(){if(this.g){var n=iu(this.g),e=this.g.ga();this.C<e.length&&(Bf(this),tv(this,n,e),this.i&&4!=n&&Vf(this))}},ut.cancel=function(){this.I=!0,ru(this)},ut.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Qy(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(zd(3),Oi(17)),ru(this),this.o=2,jf(this)):nu(this,this.Y-n)},(ut=Zd.prototype).R=function(){Yd(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ut.T=function(){return Yd(this),this.g.concat()},ut.get=function(n,e){return eo(this.h,n)?this.h[n]:e},ut.set=function(n,e){eo(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ut.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var Qg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ha(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ha){this.g=void 0!==e?e:n.g,Jg(this,n.j),this.s=n.s,$f(this,n.i),Hf(this,n.m),this.l=n.l,e=n.h;var t=new Jd;t.i=e.i,e.g&&(t.g=new Zd(e.g),t.h=e.h),Xg(this,t),this.o=n.o}else n&&(t=String(n).match(Qg))?(this.g=!!e,Jg(this,t[1]||"",!0),this.s=em(t[2]||""),$f(this,t[3]||"",!0),Hf(this,t[4]),this.l=em(t[5]||"",!0),Xg(this,t[6]||"",!0),this.o=em(t[7]||"")):(this.g=!!e,this.h=new Jd(null,this.g))}function Is(n){return new ha(n)}function Jg(n,e,t){n.j=t?em(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function $f(n,e,t){n.i=t?em(e,!0):e}function Hf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Xg(n,e,t){e instanceof Jd?(n.h=e,function eS(n,e){e&&!n.j&&(nl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(XT(this,r),tm(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Wf(e,JT)),n.h=new Jd(e,n.g))}function Fn(n,e,t){n.h.set(e,t)}function Gf(n){return Fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function em(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Wf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,_I),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _I(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ha.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Wf(e,yI,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Wf(e,yI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Wf(t,"/"==t.charAt(0)?wI:vI,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Wf(t,Cs)),n.join("")};var yI=/[#\/\?@]/g,vI=/[#\?:]/g,wI=/[#\?]/g,JT=/[#\?@]/g,Cs=/#/g;function Jd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function nl(n){n.g||(n.g=new Zd,n.h=0,n.i&&function Qd(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function XT(n,e){nl(n),e=pc(n,e),eo(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,eo((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Yd(n)))}function EI(n,e){return nl(n),e=pc(n,e),eo(n.g.h,e)}function tm(n,e,t){XT(n,e),0<t.length&&(n.i=null,n.g.set(pc(n,e),GE(t)),n.h+=t.length)}function pc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function II(n){this.l=n||CI,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ea&&kt.g.Ea()&&kt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=Jd.prototype).add=function(n,e){nl(this),this.i=null,n=pc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){nl(this),this.g.forEach(function(t,r){Ry(t,function(i){n.call(e,i,r,this)},this)},this)},ut.T=function(){nl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},ut.R=function(n){nl(this);var e=[];if("string"==typeof n)EI(this,n)&&(e=Ny(e,this.g.get(pc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Ny(e,n[t])}return e},ut.set=function(n,e){return nl(this),this.i=null,EI(this,n=pc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var CI=10;function bI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ov(n){return n.h?1:n.g?n.g.size:0}function av(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function uv(n,e){n.g?n.g.add(e):n.h=e}function lv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function cv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return GE(n.i)}function dv(){}function fa(){this.g=new dv}function hv(n,e,t){const r=t||"";try{iv(n,function(i,a){let l=i;uc(i)&&(l=jg(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function nm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function rm(n){this.l=n.$b||null,this.j=n.ib||!1}function zf(n,e){Hr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=fv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}II.prototype.cancel=function(){if(this.i=cv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},dv.prototype.stringify=function(n){return kt.JSON.stringify(n,void 0)},dv.prototype.parse=function(n){return kt.JSON.parse(n,void 0)},Cr(rm,Uf),rm.prototype.g=function(){return new zf(this.l,this.j)},rm.prototype.i=function(n){return function(){return n}}({}),Cr(zf,Hr);var fv=0;function DI(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function qf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,gc(n)}function gc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=zf.prototype).open=function(n,e){if(this.readyState!=fv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,gc(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||kt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qf(this)),this.readyState=fv},ut.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,gc(this)),this.g&&(this.readyState=3,gc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;DI(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ut.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?qf(this):gc(this),3==this.readyState&&DI(this)}},ut.Ua=function(n){this.g&&(this.response=this.responseText=n,qf(this))},ut.Ta=function(n){this.g&&(this.response=n,qf(this))},ut.ha=function(){this.g&&qf(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(zf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var rS=kt.JSON.parse;function kr(n){Hr.call(this),this.headers=new Zd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Kf,this.K=this.L=!1}Cr(kr,Hr);var Kf="",pv=/^https?$/i,iS=["POST","PUT"];function gv(n){return"content-type"==n.toLowerCase()}function mv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,sS(n),Xd(n)}function sS(n){n.D||(n.D=!0,li(n,"complete"),li(n,"error"))}function oS(n){if(n.h&&typeof Ay<"u"&&(!n.C[1]||4!=iu(n)||2!=n.ba()))if(n.v&&4==iu(n))Ro(n.Fa,0,n);else if(li(n,"readystatechange"),4==iu(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Qg)[1]||null;if(!i&&kt.self&&kt.self.location){var a=kt.self.location.protocol;i=a.substr(0,a.length-1)}r=!pv.test(i?i.toLowerCase():"")}t=r}if(t)li(n,"complete"),li(n,"success");else{n.m=6;try{var l=2<iu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.ba()+"]",sS(n)}}finally{Xd(n)}}}function Xd(n,e){if(n.g){aS(n);const t=n.g,r=n.C[0]?Mf:null;n.g=null,n.C=null,e||li(n,"ready");try{t.onreadystatechange=r}catch{}}}function aS(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function iu(n){return n.g?n.g.readyState:0}function _v(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Kf:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function im(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function SI(n){let e="";return Lg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Fn(n,e,t))}function eh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function sm(n){this.za=0,this.l=[],this.h=new hc,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=eh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=eh("baseRetryDelayMs",5e3,n),this.$a=eh("retryDelaySeedMs",1e4,n),this.Ya=eh("forwardChannelMaxRetries",2,n),this.ra=eh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new II(n&&n.concurrentRequestLimit),this.Ca=new fa,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Mo(n){if(Zf(n),3==n.G){var e=n.V++,t=Is(n.F);Fn(t,"SID",n.J),Fn(t,"RID",e),Fn(t,"TYPE","terminate"),Yf(n,t),(e=new Zg(n,n.h,e,void 0)).K=2,e.v=Gf(Is(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon&&(t=kt.navigator.sendBeacon(e.v.toString(),"")),!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Iv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Vf(e)}PI(n)}function mc(n){n.g&&(xI(n),n.g.cancel(),n.g=null)}function Zf(n){mc(n),n.u&&(kt.clearTimeout(n.u),n.u=null),Ev(n),n.i.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function _c(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&om(n)}function om(n){bI(n.i)||n.m||(n.m=!0,el(n.Ha,n),n.C=0)}function vv(n,e){var t;t=e?e.m:n.V++;const r=Is(n.F);Fn(r,"SID",n.J),Fn(r,"RID",t),Fn(r,"AID",n.U),Yf(n,r),n.o&&n.s&&im(r,n.o,n.s),t=new Zg(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=AI(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),uv(n.i,t),Xy(t,r,e)}function Yf(n,e){n.j&&iv({},function(t,r){Fn(e,r,t)})}function AI(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Qr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let g=0;g<t;g++){let v=i[g].h;const D=i[g].g;if(v-=a,0>v)a=Math.max(0,i[g].h-100),h=!1;else try{hv(D,l,"req"+v+"_")}catch{r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function th(n){n.g||n.u||(n.Y=1,el(n.Ga,n),n.A=0)}function wv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=qd(Qr(n.Ga,n),NI(n,n.A)),n.A++,0))}function xI(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function RI(n){n.g=new Zg(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Is(n.oa);Fn(e,"RID","rpc"),Fn(e,"SID",n.J),Fn(e,"CI",n.N?"0":"1"),Fn(e,"AID",n.U),Yf(n,e),Fn(e,"TYPE","xmlhttp"),n.o&&n.s&&im(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Gf(Is(e)),t.s=null,t.U=!0,ev(t,n)}function Ev(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function MI(n,e){var t=null;if(n.g==e){Ev(n),xI(n),n.g=null;var r=2}else{if(!av(n.i,e))return;t=e.D,lv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;li(r=qg(),new qT(r,t,e,i)),om(n)}else th(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function yv(n,e){return!(ov(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=qd(Qr(n.Ha,n,e),NI(n,n.C)),n.C++,0)))}(n,e)||2==r&&wv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:yc(n,5);break;case 4:yc(n,10);break;case 3:yc(n,6);break;default:yc(n,2)}}function NI(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function yc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Qr(n.jb,n);t||(t=new ha("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||Jg(t,"https"),Gf(t)),function nS(n,e){const t=new hc;if(kt.Image){const r=new Image;r.onload=Hd(nm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Hd(nm,t,r,"TestLoadImage: error",!1,e),r.onabort=Hd(nm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Hd(nm,t,r,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Oi(2);n.G=0,n.j&&n.j.va(e),PI(n),Zf(n)}function PI(n){n.G=0,n.I=-1,n.j&&((0!=cv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,GE(n.l),n.l.length=0),n.j.ua())}function uS(n,e,t){let r=function sv(n){return n instanceof ha?Is(n):new ha(n,void 0)}(t);if(""!=r.i)e&&$f(r,e+"."+r.i),Hf(r,r.m);else{const i=kt.location;r=function QT(n,e,t,r){var i=new ha(null,void 0);return n&&Jg(i,n),e&&$f(i,e),t&&Hf(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Lg(n.aa,function(i,a){Fn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Fn(r,e,t),Fn(r,"VER",n.ma),Yf(n,r),r}function Iv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new kr(t&&n.Ba&&!n.qa?new rm({ib:!0}):n.qa)).L=n.H,e}function Cv(){}function am(){if(Gd&&!(10<=Number(eI)))throw Error("Environmental error: no available transport.")}function Li(n,e){Hr.call(this),this.g=new sm(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Nf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Nf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new nh(this)}function kI(n){fI.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function OI(){pI.call(this),this.status=1}function nh(n){this.g=n}(ut=kr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():gI.g(),this.C=function KT(n){return n.h||(n.h=n.i())}(this.u?this.u:gI),this.g.onreadystatechange=Qr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void mv(this,a)}n=t||"";const i=new Zd(this.headers);r&&iv(r,function(a,l){i.set(l,a)}),r=function My(n){e:{var e=gv;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=kt.FormData&&n instanceof kt.FormData,!(0<=HE(iS,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{aS(this),0<this.B&&((this.K=function TI(n){return Gd&&function VT(){return function YE(n){var e=XE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=WE(String(Fg)).split("."),t=WE("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Py(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Py(0==i[2].length,0==a[2].length)||Py(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qr(this.pa,this)):this.A=Ro(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){mv(this,a)}},ut.pa=function(){typeof Ay<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,li(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,li(this,"complete"),li(this,"abort"),Xd(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xd(this,!0)),kr.Z.M.call(this)},ut.Fa=function(){this.s||(this.F||this.v||this.l?oS(this):this.cb())},ut.cb=function(){oS(this)},ut.ba=function(){try{return 2<iu(this)?this.g.status:-1}catch{return-1}},ut.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),rS(e)}},ut.Da=function(){return this.m},ut.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=sm.prototype).ma=8,ut.G=1,ut.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ut.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Zg(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=qE(a),ZE(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=AI(this,i,e),Fn(t=Is(this.F),"RID",n),Fn(t,"CVER",22),this.D&&Fn(t,"X-HTTP-Session-Id",this.D),Yf(this,t),this.o&&a&&im(t,this.o,a),uv(this.i,i),this.Ra&&Fn(t,"TYPE","init"),this.ja?(Fn(t,"$req",e),Fn(t,"SID","null"),i.$=!0,Xy(i,t,null)):Xy(i,t,e),this.G=2}}else 3==this.G&&(n?vv(this,n):0==this.l.length||bI(this.i)||vv(this))},ut.Ga=function(){if(this.u=null,RI(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=qd(Qr(this.bb,this),n)}},ut.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Oi(10),mc(this),RI(this))},ut.ab=function(){null!=this.v&&(this.v=null,mc(this),wv(this),Oi(19))},ut.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Oi(2)):(this.h.info("Failed to ping google.com"),Oi(1))},(ut=Cv.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Oa=function(){},am.prototype.g=function(n,e){return new Li(n,e)},Cr(Li,Hr),Li.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),el(Qr(n.hb,n,e))),Oi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=uS(n,null,n.W),om(n)},Li.prototype.close=function(){Mo(this.g)},Li.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,_c(this.g,e)}else this.v?((e={}).__data__=jg(n),_c(this.g,e)):_c(this.g,n)},Li.prototype.M=function(){this.g.j=null,delete this.j,Mo(this.g),delete this.g,Li.Z.M.call(this)},Cr(kI,fI),Cr(OI,pI),Cr(nh,Cv),nh.prototype.xa=function(){li(this.g,"a")},nh.prototype.wa=function(n){li(this.g,new kI(n))},nh.prototype.va=function(n){li(this.g,new OI(n))},nh.prototype.ua=function(){li(this.g,"b")},am.prototype.createWebChannel=am.prototype.g,Li.prototype.send=Li.prototype.u,Li.prototype.open=Li.prototype.m,Li.prototype.close=Li.prototype.close,Ff.NO_ERROR=0,Ff.TIMEOUT=8,Ff.HTTP_ERROR=6,hI.COMPLETE="complete",ZT.EventType=Kg,Kg.OPEN="a",Kg.CLOSE="b",Kg.ERROR="c",Kg.MESSAGE="d",Hr.prototype.listen=Hr.prototype.N,kr.prototype.listenOnce=kr.prototype.O,kr.prototype.getLastError=kr.prototype.La,kr.prototype.getLastErrorCode=kr.prototype.Da,kr.prototype.getStatus=kr.prototype.ba,kr.prototype.getResponseJson=kr.prototype.Qa,kr.prototype.getResponseText=kr.prototype.ga,kr.prototype.send=kr.prototype.ea;var lS=Ju.createWebChannelTransport=function(){return new am},cS=Ju.getStatEventTarget=function(){return qg()},bv=Ju.ErrorCode=Ff,um=Ju.EventType=hI,vc=Ju.Event=fc,dS=Ju.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Qf=Ju.FetchXmlHttpFactory=rm,lm=Ju.WebChannel=ZT,hS=Ju.XhrIo=kr;const cm="@firebase/firestore";class Jr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jr.UNAUTHENTICATED=new Jr(null),Jr.GOOGLE_CREDENTIALS=new Jr("google-credentials-uid"),Jr.FIRST_PARTY=new Jr("first-party-uid"),Jr.MOCK_USER=new Jr("mock-user");let Fi="9.9.1";const to=new Qs.Yd("@firebase/firestore");function Xr(){return to.logLevel}function Be(n,...e){if(to.logLevel<=Qs.in.DEBUG){const t=e.map(rl);to.debug(`Firestore (${Fi}): ${n}`,...t)}}function pn(n,...e){if(to.logLevel<=Qs.in.ERROR){const t=e.map(rl);to.error(`Firestore (${Fi}): ${n}`,...t)}}function Ec(n,...e){if(to.logLevel<=Qs.in.WARN){const t=e.map(rl);to.warn(`Firestore (${Fi}): ${n}`,...t)}}function rl(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ot(n="Unexpected state"){const e=`FIRESTORE (${Fi}) INTERNAL ASSERTION FAILED: `+n;throw pn(e),new Error(e)}function Tt(n,e){n||ot()}function Qe(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ir{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ic{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jr.UNAUTHENTICATED))}shutdown(){}}class FI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class UI{constructor(e){this.t=e,this.currentUser=Jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ir,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=l;e.enqueueRetryable((0,be.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},g=v=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ir)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new Ic(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new Jr(e)}}class VI{constructor(e,t,r){this.type="FirstParty",this.user=Jr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class BI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new VI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.p=t.token,new Dv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $I(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class HI{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=$I(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function ih(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Tv(n){return n+"\0"}class Kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new Kn(0,0))}static max(){return new Nt(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Cc{constructor(e,t,r){void 0===t?t=0:t>e.length&&ot(),void 0===r?r=e.length-t:r>e.length-t&&ot(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Cc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nn extends Cc{construct(e,t,r){return new nn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new nn(t)}static emptyPath(){return new nn([])}}const pS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends Cc{construct(e,t,r){return new Zn(e,t,r)}static isValidIdentifier(e){return pS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Fe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Fe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Fe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(t)}static emptyPath(){return new Zn([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(nn.fromString(e))}static fromName(e){return new Ye(nn.fromString(e).popFirst(5))}static empty(){return new Ye(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new nn(e.slice()))}}class sh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Sv(n){return n.fields.find(e=>2===e.kind)}function su(n){return n.fields.filter(e=>2!==e.kind)}sh.UNKNOWN_ID=-1;class oh{constructor(e,t){this.fieldPath=e,this.kind=t}}class ah{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ah(0,Qi.min())}}function Av(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Nt.fromTimestamp(1e9===r?new Kn(t+1,0):new Kn(t,r));return new Qi(i,Ye.empty(),e)}function dm(n){return new Qi(n.readTime,n.key,-1)}class Qi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Qi(Nt.min(),Ye.empty(),-1)}static max(){return new Qi(Nt.max(),Ye.empty(),-1)}}function hm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}const fm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function il(n){return pm.apply(this,arguments)}function pm(){return pm=(0,be.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==fm)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),pm.apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},g=>r(g))}),l=!0,a===i&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(i=>i?he.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new he((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let g=0;g<a;g++){const v=g;t(e[v]).next(D=>{l[v]=D,++h,h===a&&r(l)},D=>i(D))}})}static doWhile(e,t){return new he((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Jf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new ir,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Xf(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=gm(r.target.error);this.T.reject(new Xf(e,i))}}static open(e,t,r,i){try{return new Jf(t,e.transaction(i,r))}catch(a){throw new Xf(t,a)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Rv(t)}}class No{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===No.v((0,k.z$)())&&pn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),ou(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,k.hl)())return!1;if(No.S())return!0;const e=(0,k.z$)(),t=No.v(e),r=0<t&&t<10,i=No.D(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,be.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Xf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Fe(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Fe(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Xf(e,h))},a.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.P.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,be.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.k(e);const g=Jf.open(a.db,e,l?"readonly":"readwrite",r),v=i(g).next(D=>(g.R(),D)).catch(D=>(g.abort(D),he.reject(D))).toPromise();return v.catch(()=>{}),yield g.A,v}catch(g){const v=g,D="FirebaseError"!==v.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",v.message,"Retrying:",D),a.close(),!D)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gS{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return ou(this.$.delete())}}class Xf extends Fe{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sl(n){return"IndexedDbTransactionError"===n.name}class Rv{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ou(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),ou(this.store.add(e))}get(e){return ou(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),ou(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),ou(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.G(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new he((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}W(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(a,l,h)=>h.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new he((r,i)=>{t.onerror=a=>{const l=gm(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}G(e,t){const r=[];return new he((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const g=new gS(h),v=t(h.primaryKey,h.value,g);if(v instanceof he){const D=v.catch(S=>(g.done(),he.reject(S)));r.push(D)}g.isDone?i():null===g.U?h.continue():h.continue(g.U)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ou(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=gm(r.target.error);t(i)}})}let Mv=!1;function gm(n){const e=No.v((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Mv||(Mv=!0,setTimeout(()=>{throw r},0)),r}}return n}class GI{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,be.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){sl(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield il(r)}yield t.Z(1)}))}}class WI{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,be.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,a=!0;return he.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Be("IndexBackiller",`Processing collection: ${l}`),this.nt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.st(i,a)).next(h=>(Be("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}st(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=dm(a);hm(l,r)>0&&(r=l)}),new Qi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ui{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Nv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ol(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Pv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ui.ot=-1;class br{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mm(this.root,e,this.comparator,!1)}getReverseIterator(){return new mm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mm(this.root,e,this.comparator,!0)}}class mm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ci.RED,this.left=i??ci.EMPTY,this.right=a??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ci(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const e=this.left.check();if(e!==this.right.check())throw ot();return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1,ci.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wn{constructor(e){this.comparator=e,this.data=new br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zI(this.data.getIterator())}getIteratorFrom(e){return new zI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class zI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yn(n){return n.hasNext()?n.getNext():void 0}class Ji{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new Ji([])}unionWith(e){let t=new wn(Zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ih(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Gr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Gr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Gr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gr.EMPTY_BYTE_STRING=new Gr("");const qI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function al(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=qI.exec(n);if(Tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:sr(n.seconds),nanos:sr(n.nanos)}}function sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ul(n){return"string"==typeof n?Gr.fromBase64String(n):Gr.fromUint8Array(n)}function ll(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function KI(n){const e=n.mapValue.fields.__previous_value__;return ll(e)?KI(e):e}function ep(n){const e=al(n.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}class ZI{constructor(e,t,r,i,a,l,h,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class au{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new au("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof au&&e.projectId===this.projectId&&e.database===this.database}}function uh(n){return null==n}function _m(n){return 0===n&&1/n==-1/0}function kv(n){return"number"==typeof n&&Number.isInteger(n)&&!_m(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const uu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bs={nullValue:"NULL_VALUE"};function bc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ll(n)?4:Lv(n)?9007199254740991:10:ot()}function pa(n,e){if(n===e)return!0;const t=bc(n);if(t!==bc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ep(n).isEqual(ep(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=al(r.timestampValue),l=al(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ul(n.bytesValue).isEqual(ul(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return sr(r.geoPointValue.latitude)===sr(i.geoPointValue.latitude)&&sr(r.geoPointValue.longitude)===sr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return sr(r.integerValue)===sr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=sr(r.doubleValue),l=sr(i.doubleValue);return a===l?_m(a)===_m(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return ih(n.arrayValue.values||[],e.arrayValue.values||[],pa);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Nv(a)!==Nv(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!pa(a[h],l[h])))return!1;return!0}(n,e);default:return ot()}var i}function Xi(n,e){return void 0!==(n.values||[]).find(t=>pa(t,e))}function ei(n,e){if(n===e)return 0;const t=bc(n),r=bc(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=sr(i.integerValue||i.doubleValue),h=sr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return no(n.timestampValue,e.timestampValue);case 4:return no(ep(n),ep(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=ul(i),h=ul(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let g=0;g<l.length&&g<h.length;g++){const v=Wt(l[g],h[g]);if(0!==v)return v}return Wt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Wt(sr(i.latitude),sr(a.latitude));return 0!==l?l:Wt(sr(i.longitude),sr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let g=0;g<l.length&&g<h.length;++g){const v=ei(l[g],h[g]);if(v)return v}return Wt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===uu.mapValue&&a===uu.mapValue)return 0;if(i===uu.mapValue)return 1;if(a===uu.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),g=a.fields||{},v=Object.keys(g);h.sort(),v.sort();for(let D=0;D<h.length&&D<v.length;++D){const S=Wt(h[D],v[D]);if(0!==S)return S;const N=ei(l[h[D]],g[v[D]]);if(0!==N)return N}return Wt(h.length,v.length)}(n.mapValue,e.mapValue);default:throw ot()}}function no(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=al(n),r=al(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function Dc(n){return ym(n)}function ym(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=al(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ul(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=ym(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${ym(r.fields[h])}`;return a+"}"}(n.mapValue):ot();var e}function Tc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ov(n){return!!n&&"integerValue"in n}function tp(n){return!!n&&"arrayValue"in n}function YI(n){return!!n&&"nullValue"in n}function vm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function cl(n){return!!n&&"mapValue"in n}function np(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ol(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=np(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=np(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Lv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function _S(n){return"nullValue"in n?bs:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tc(au.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ot()}function QI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tc(au.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?uu:ot()}function Fv(n,e){const t=ei(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function rp(n,e){const t=ei(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!cl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=np(t)}setAll(e){let t=Zn.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=np(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());cl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];cl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ol(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new di(np(this.value))}}function Uv(n){const e=[];return ol(n.fields,(t,r)=>{const i=new Zn([t]);if(cl(r)){const a=Uv(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Ji(e)}class Nn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Nn(e,0,Nt.min(),Nt.min(),di.empty(),0)}static newFoundDocument(e,t,r){return new Nn(e,1,t,Nt.min(),r,0)}static newNoDocument(e,t){return new Nn(e,2,t,Nt.min(),di.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,Nt.min(),di.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Vv{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ut=null}}function wm(n,e=null,t=[],r=[],i=null,a=null,l=null){return new Vv(n,e,t,r,i,a,l)}function dl(n){const e=Qe(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Dc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),uh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Dc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Dc(r)).join(",")),e.ut=t}return e.ut}function lh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!DS(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!pa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tC(n.startAt,e.startAt)&&tC(n.endAt,e.endAt)}function ip(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function sp(n,e){return n.filters.filter(t=>t instanceof ti&&t.field.isEqual(e))}function Bv(n,e,t){let r=bs,i=!0;for(const a of sp(n,e)){let l=bs,h=!0;switch(a.op){case"<":case"<=":l=_S(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=bs}Fv({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Fv({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function jv(n,e,t){let r=uu,i=!0;for(const a of sp(n,e)){let l=uu,h=!0;switch(a.op){case">=":case">":l=QI(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=uu}rp({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];rp({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class ti extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new yS(e,t,r):"array-contains"===t?new ES(e,r):"in"===t?new IS(e,r):"not-in"===t?new CS(e,r):"array-contains-any"===t?new bS(e,r):new ti(e,t,r)}static ct(e,t,r){return"in"===t?new vS(e,r):new wS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(ei(t,this.value)):null!==t&&bc(this.value)===bc(t)&&this.at(ei(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ot()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class yS extends ti{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.at(t)}}class vS extends ti{constructor(e,t){super(e,"in",t),this.keys=XI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wS extends ti{constructor(e,t){super(e,"not-in",t),this.keys=XI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function XI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class ES extends ti{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tp(t)&&Xi(t.arrayValue,this.value)}}class IS extends ti{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xi(this.value.arrayValue,t)}}class CS extends ti{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xi(this.value.arrayValue,t)}}class bS extends ti{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xi(this.value.arrayValue,r))}}class hl{constructor(e,t){this.position=e,this.inclusive=t}}class ch{constructor(e,t="asc"){this.field=e,this.dir=t}}function DS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function eC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ye.comparator(Ye.fromName(l.referenceValue),t.key):ei(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function tC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pa(n.position[t],e.position[t]))return!1;return!0}class lu{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=g,this.lt=null,this.ft=null}}function nC(n,e,t,r,i,a,l,h){return new lu(n,e,t,r,i,a,l,h)}function dh(n){return new lu(n)}function $v(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Em(n){for(const e of n.filters)if(e.ht())return e.field;return null}function Im(n){return null!==n.collectionGroup}function Sc(n){const e=Qe(n);if(null===e.lt){e.lt=[];const t=Em(e),r=$v(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new ch(t)),e.lt.push(new ch(Zn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.lt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new ch(Zn.keyField(),a))}}}return e.lt}function Ds(n){const e=Qe(n);if(!e.ft)if("F"===e.limitType)e.ft=wm(e.path,e.collectionGroup,Sc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Sc(e))t.push(new ch(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new hl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new hl(e.startAt.position,e.startAt.inclusive):null;e.ft=wm(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function Hv(n,e,t){return new lu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hh(n,e){return lh(Ds(n),Ds(e))&&n.limitType===e.limitType}function Gv(n){return`${dl(Ds(n))}|lt:${n.limitType}`}function Cm(n){return`Query(target=${function JI(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Dc(r.value)}`;var r}).join(", ")}]`),uh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Dc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Dc(t)).join(",")),`Target(${e})`}(Ds(n))}; limitType=${n.limitType})`}function bm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ye.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=eC(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Sc(t),r)||t.endAt&&!function(i,a,l){const h=eC(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Sc(t),r)));var t,r}function Wv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zv(n){return(e,t)=>{let r=!1;for(const i of Sc(n)){const a=Ac(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Ac(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),g=l.data.field(i);return null!==h&&null!==g?ei(h,g):ot()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ot()}}function rC(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_m(e)?"-0":e}}function iC(n){return{integerValue:""+n}}function xc(n,e){return kv(e)?iC(e):rC(n,e)}class qv{constructor(){this._=void 0}}function Kv(n,e,t){return n instanceof Rc?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof fh?St(n,e):n instanceof Mc?sC(n,e):function(r,i){const a=Zv(r,i),l=Nc(a)+Nc(r._t);return Ov(a)&&Ov(r._t)?iC(l):rC(r.wt,l)}(n,e)}function cM(n,e,t){return n instanceof fh?St(n,e):n instanceof Mc?sC(n,e):t}function Zv(n,e){return n instanceof ph?Ov(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Rc extends qv{}class fh extends qv{constructor(e){super(),this.elements=e}}function St(n,e){const t=oC(e);for(const r of n.elements)t.some(i=>pa(i,r))||t.push(r);return{arrayValue:{values:t}}}class Mc extends qv{constructor(e){super(),this.elements=e}}function sC(n,e){let t=oC(e);for(const r of n.elements)t=t.filter(i=>!pa(i,r));return{arrayValue:{values:t}}}class ph extends qv{constructor(e,t){super(),this.wt=e,this._t=t}}function Nc(n){return sr(n.integerValue||n.doubleValue)}function oC(n){return tp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fl{constructor(e,t){this.field=e,this.transform=t}}class _r{constructor(e,t){this.version=e,this.transformResults=t}}class yr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function op(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ap{}function aC(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new yh(n.key,yr.none()):new mh(n.key,n.data,yr.none());{const t=n.data,r=di.empty();let i=new wn(Zn.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new cu(n.key,r,new Ji(i.toArray()),yr.none())}}function uC(n,e,t){n instanceof mh?function(r,i,a){const l=r.value.clone(),h=_h(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof cu?function(r,i,a){if(!op(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=_h(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(cC(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function gh(n,e,t,r){return n instanceof mh?function(i,a,l,h){if(!op(i.precondition,a))return l;const g=i.value.clone(),v=dC(i.fieldTransforms,h,a);return g.setAll(v),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof cu?function(i,a,l,h){if(!op(i.precondition,a))return l;const g=dC(i.fieldTransforms,h,a),v=a.data;return v.setAll(cC(i)),v.setAll(g),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,op(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function lC(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Zv(r.transform,i||null);null!=a&&(null===t&&(t=di.empty()),t.set(r.field,a))}return t||null}function Yv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ih(t,r,(i,a)=>function Dm(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof fh&&r instanceof fh||t instanceof Mc&&r instanceof Mc?ih(t.elements,r.elements,pa):t instanceof ph&&r instanceof ph?pa(t._t,r._t):t instanceof Rc&&r instanceof Rc);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class mh extends ap{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cu extends ap{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function cC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _h(n,e,t){const r=new Map;Tt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,cM(l,h,t[i]))}return r}function dC(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,Kv(a,l,e))}return r}class yh extends ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qv extends ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Tm{constructor(e){this.count=e}}var Dr,un;function Jv(n){switch(n){default:return ot();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function hC(n){if(void 0===n)return pn("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Dr.OK:return pe.OK;case Dr.CANCELLED:return pe.CANCELLED;case Dr.UNKNOWN:return pe.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return pe.INTERNAL;case Dr.UNAVAILABLE:return pe.UNAVAILABLE;case Dr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Dr.NOT_FOUND:return pe.NOT_FOUND;case Dr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Dr.ABORTED:return pe.ABORTED;case Dr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Dr.DATA_LOSS:return pe.DATA_LOSS;default:return ot()}}(un=Dr||(Dr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class ro{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ol(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Pv(this.inner)}size(){return this.innerSize}}const up=new br(Ye.comparator);function es(){return up}const fC=new br(Ye.comparator);function lp(...n){let e=fC;for(const t of n)e=e.insert(t.key,t);return e}function Xv(n){let e=fC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Po(){return cp()}function ew(){return cp()}function cp(){return new ro(n=>n.toString(),(n,e)=>n.isEqual(e))}const pC=new br(Ye.comparator),SS=new wn(Ye.comparator);function qt(...n){let e=SS;for(const t of n)e=e.add(t);return e}const dM=new wn(Wt);function tw(){return dM}class Sm{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Am.createSynthesizedTargetChangeForCurrentChange(e,t)),new Sm(Nt.min(),r,tw(),es(),qt())}}class Am{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Am(Gr.EMPTY_BYTE_STRING,t,qt(),qt(),qt())}}class dp{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class hp{constructor(e,t){this.targetId=e,this.It=t}}class gC{constructor(e,t,r=Gr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class mC{constructor(){this.Tt=0,this.Et=yC(),this.At=Gr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=qt(),t=qt(),r=qt();return this.Et.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ot()}}),new Am(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=yC()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class _C{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=es(),this.Bt=vh(),this.Lt=new wn(Wt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const a=i.target;if(ip(a))if(0===r){const l=new Ye(a.path);this.Kt(t,l,Nn.newNoDocument(l,Nt.min()))}else Tt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((a,l)=>{const h=this.Ht(l);if(h){if(a.current&&ip(h.target)){const g=new Ye(h.target.path);null!==this.$t.get(g)||this.Xt(l,g)||this.Kt(l,g,Nn.newNoDocument(g,e))}a.vt&&(t.set(l,a.St()),a.Dt())}});let r=qt();this.Bt.forEach((a,l)=>{let h=!0;l.forEachWhile(g=>{const v=this.Ht(g);return!v||2===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.$t.forEach((a,l)=>l.setReadTime(e));const i=new Sm(e,t,this.Lt,this.$t,r);return this.$t=es(),this.Bt=vh(),this.Lt=new wn(Wt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new mC,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new wn(Wt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new mC),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function vh(){return new br(Ye.comparator)}function yC(){return new br(Ye.comparator)}const AS={asc:"ASCENDING",desc:"DESCENDING"},xS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class RS{constructor(e,t){this.databaseId=e,this.dt=t}}function fp(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nw(n,e){return n.dt?e.toBase64():e.toUint8Array()}function MS(n,e){return fp(n,e.toTimestamp())}function ni(n){return Tt(!!n),Nt.fromTimestamp(function(e){const t=al(e);return new Kn(t.seconds,t.nanos)}(n))}function pl(n,e){return(t=n,new nn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function vC(n){const e=nn.fromString(n);return Tt(sw(e)),e}function wh(n,e){return pl(n.databaseId,e.path)}function ga(n,e){const t=vC(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(EC(t))}function xm(n,e){return pl(n.databaseId,e)}function wC(n){const e=vC(n);return 4===e.length?nn.emptyPath():EC(e)}function Eh(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function EC(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Rm(n,e,t){return{name:wh(n,e),fields:t.value.mapValue.fields}}function IC(n,e,t){const r=ga(n,e.name),i=ni(e.updateTime),a=new di({mapValue:{fields:e.fields}}),l=Nn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function pp(n,e){let t;if(e instanceof mh)t={update:Rm(n,e.key,e.value)};else if(e instanceof yh)t={delete:wh(n,e.key)};else if(e instanceof cu)t={update:Rm(n,e.key,e.data),updateMask:SC(e.fieldMask)};else{if(!(e instanceof Qv))return ot();t={verify:wh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Rc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Mc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ph)return{fieldPath:a.field.canonicalString(),increment:l._t};throw ot()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:MS(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ot()),t;var i}function rw(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?yr.updateTime(ni(i.updateTime)):void 0!==i.exists?yr.exists(i.exists):yr.none():yr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Tt("REQUEST_TIME"===l.setToServerValue),h=new Rc):"appendMissingElements"in l?h=new fh(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Mc(l.removeAllFromArray.values||[]):"increment"in l?h=new ph(a,l.increment):ot();const g=Zn.fromServerFormat(l.fieldPath);return new fl(g,h)}(n,i)):[];var i;if(e.update){const i=ga(n,e.update.name),a=new di({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ji((e.updateMask.fieldPaths||[]).map(v=>Zn.fromServerFormat(v)));return new cu(i,a,l,t,r)}return new mh(i,a,t,r)}if(e.delete){const i=ga(n,e.delete);return new yh(i,t)}if(e.verify){const i=ga(n,e.verify);return new Qv(i,t)}return ot()}function Mm(n,e){return{documents:[xm(n,e.path)]}}function DC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=xm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=xm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const v=g.map(D=>function(S){if("=="===S.op){if(vm(S.value))return{unaryFilter:{field:Ih(S.field),op:"IS_NAN"}};if(YI(S.value))return{unaryFilter:{field:Ih(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(vm(S.value))return{unaryFilter:{field:Ih(S.field),op:"IS_NOT_NAN"}};if(YI(S.value))return{unaryFilter:{field:Ih(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ih(S.field),op:OS(S.op),value:S.value}}}(D));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(v=>{return{field:Ih((D=v).field),direction:kS(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.dt||uh(v)?v:{value:v});var v,h,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function iw(n){let e=wC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=TC(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new ch(Ch((S=D).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,uh(S)?null:S}(t.limit));let g=null;var D;t.startAt&&(g=new hl((D=t.startAt).values||[],!!D.before));let v=null;return t.endAt&&(v=function(D){return new hl(D.values||[],!D.before)}(t.endAt)),nC(e,i,l,a,h,"F",g,v)}function TC(n){return n?void 0!==n.unaryFilter?[FS(n)]:void 0!==n.fieldFilter?[LS(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>TC(e)).reduce((e,t)=>e.concat(t)):ot():[]}function kS(n){return AS[n]}function OS(n){return xS[n]}function Ih(n){return{fieldPath:n.canonicalString()}}function Ch(n){return Zn.fromServerFormat(n.fieldPath)}function LS(n){return ti.create(Ch(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(n.fieldFilter.op),n.fieldFilter.value)}function FS(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ch(n.unaryFilter.field);return ti.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ch(n.unaryFilter.field);return ti.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ch(n.unaryFilter.field);return ti.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ch(n.unaryFilter.field);return ti.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}function SC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Vi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ow(e)),e=US(n.get(t),e);return ow(e)}function US(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function ow(n){return n+"\x01\x01"}function ma(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ot(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let g;0===i.length?g=h:(i+=h,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ot()}a=l+2}return new nn(r)}const AC=["userId","batchId"];function Nm(n,e){return[n,Vi(e)]}function Pm(n,e,t){return[n,Vi(e),t]}const aw={},xC=["prefixPath","collectionGroup","readTime","documentId"],uw=["prefixPath","collectionGroup","documentId"],VS=["collectionGroup","readTime","prefixPath","documentId"],BS=["canonicalId","targetId"],lw=["targetId","path"],jS=["path","targetId"],$S=["collectionId","parent"],bh=["indexId","uid"],RC=["uid","sequenceNumber"],HS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hM=["indexId","uid","orderedDocumentKey"],MC=["userId","collectionPath","documentId"],cw=["userId","collectionPath","largestBatchId"],GS=["userId","collectionGroup","largestBatchId"],km=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],WS=[...km,"documentOverlays"],NC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Om=NC,PC=[...Om,"indexConfiguration","indexState","indexEntries"];class Lm extends xv{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Wr(n,e){const t=Qe(n);return No.N(t.ee,e)}class Fm{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&uC(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ew();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const g=aC(l,h);null!==g&&r.set(i.key,g),l.isValidDocument()||l.convertToNoDocument(Nt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&ih(this.mutations,e.mutations,(t,r)=>Yv(t,r))&&ih(this.baseMutations,e.baseMutations,(t,r)=>Yv(t,r))}}class dw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length);let i=pC;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new dw(e,t,r,i)}}class hw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gl{constructor(e,t,r,i,a=Nt.min(),l=Nt.min(),h=Gr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new gl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class kC{constructor(e){this.ne=e}}function zS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:wh(i=n.ne,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:fp(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Pc(e.version)};else{if(!e.isUnknownDocument())return ot();r.unknownDocument={path:t.path.toArray(),version:Pc(e.version)}}var i,a;return r}function gp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Pc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kc(n){const e=new Kn(n.seconds,n.nanoseconds);return Nt.fromTimestamp(e)}function Dh(n,e){const t=(e.baseMutations||[]).map(a=>rw(n.ne,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>rw(n.ne,a)),i=Kn.fromMillis(e.localWriteTimeMs);return new Fm(e.batchId,i,t,r)}function Um(n){const e=kc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?kc(n.lastLimboFreeSnapshotVersion):Nt.min();let r;var i;return void 0!==n.query.documents?(Tt(1===(i=n.query).documents.length),r=Ds(dh(wC(i.documents[0])))):r=Ds(iw(n.query)),new gl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Gr.fromBase64String(n.resumeToken))}function LC(n,e){const t=Pc(e.snapshotVersion),r=Pc(e.lastLimboFreeSnapshotVersion);let i;i=ip(e.target)?Mm(n.ne,e.target):DC(n.ne,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:dl(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function fw(n){const e=iw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Hv(e,e.limit,"L"):e}function pw(n,e){return new hw(e.largestBatchId,rw(n.ne,e.overlayMutation))}function FC(n,e){const t=e.path.lastSegment();return[n,Vi(e.path.popLast()),t]}function UC(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Pc(r.readTime),documentKey:Vi(r.documentKey.path),largestBatchId:r.largestBatchId}}class qS{getBundleMetadata(e,t){return VC(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:kc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return VC(e).put({bundleId:(r=t).id,createTime:Pc(ni(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return BC(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:fw(i.bundledQuery),readTime:kc(i.readTime)};var i})}saveNamedQuery(e,t){return BC(e).put({name:(r=t).name,readTime:Pc(ni(r.readTime)),bundledQuery:r.bundledQuery});var r}}function VC(n){return Wr(n,"bundles")}function BC(n){return Wr(n,"namedQueries")}class Vm{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Vm(e,t.uid||"")}getOverlay(e,t){return mp(e).get(FC(this.userId,t)).next(r=>r?pw(this.wt,r):null)}getOverlays(e,t){const r=Po();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new hw(t,l);i.push(this.ie(e,h))}),he.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Vi(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(mp(e).W("collectionPathOverlayIndex",h))}),he.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Po(),a=Vi(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return mp(e).K("collectionPathOverlayIndex",l).next(h=>{for(const g of h){const v=pw(this.wt,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Po();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mp(e).J({index:"collectionGroupOverlayIndex",range:h},(g,v,D)=>{const S=pw(this.wt,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}ie(e,t){return mp(e).put(function(r,i,a){const[l,h,g]=FC(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:pp(r.ne,a.mutation)}}(this.wt,this.userId,t))}}function mp(n){return Wr(n,"documentOverlays")}class Oc{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(sr(e.integerValue));else if("doubleValue"in e){const r=sr(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),_m(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(ul(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?Lv(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):ot()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),Ye.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function KS(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Th(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=KS(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Oc.ye=new Oc;class jC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=Th(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=Th(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class $C{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class HC{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Sh{constructor(){this.Me=new jC,this.Fe=new $C(this.Me),this.$e=new HC(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class ml{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ml(this.indexId,this.documentKey,this.arrayValue,r)}}function Lc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=GC(n.arrayValue,e.arrayValue),0!==t?t:(t=GC(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function GC(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class fM{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Sv(e);if(void 0!==t&&!this.Qe(t))return!1;const r=su(e);let i=0,a=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const l=r[i];if(!this.je(this.Ke,l)||!this.We(this.Ue[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ue.length||!this.We(this.Ue[a++],l))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ZS{constructor(){this.ze=new gw}addToCollectionParentIndex(e,t){return this.ze.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Qi.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class gw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wn(nn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wn(nn.comparator)).toArray()}}const Bm=new Uint8Array(0);class YS{constructor(e,t){this.user=e,this.databaseId=t,this.He=new gw,this.Je=new ro(r=>dl(r),(r,i)=>lh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const a={collectionId:r,parent:Vi(i)};return WC(e).put(a)}return he.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Tv(t),""],!1,!0);return WC(e).K(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(ma(l.parent))}return r})}addFieldIndex(e,t){const r=jm(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=Fc(e);return a.next(h=>{l.put(UC(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=jm(e),i=Fc(e),a=du(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=du(e);let i=!0;const a=new Map;return he.forEach(this.Ye(t),l=>this.Xe(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=qt();const h=[];return he.forEach(a,(g,v)=>{var D;Be("IndexedDbIndexManager",`Using index ${D=g,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(It=>`${It.fieldPath}:${It.kind}`).join(",")}`} to execute ${dl(t)}`);const S=function(It,_t){const jt=Sv(_t);if(void 0===jt)return null;for(const sn of sp(It,jt.fieldPath))switch(sn.op){case"array-contains-any":return sn.value.arrayValue.values||[];case"array-contains":return[sn.value]}return null}(v,g),N=function(It,_t){const jt=new Map;for(const sn of su(_t))for(const ii of sp(It,sn.fieldPath))switch(ii.op){case"==":case"in":jt.set(sn.fieldPath.canonicalString(),ii.value);break;case"not-in":case"!=":return jt.set(sn.fieldPath.canonicalString(),ii.value),Array.from(jt.values())}return null}(v,g),V=function(It,_t){const jt=[];let sn=!0;for(const ii of su(_t)){const Iu=0===ii.kind?Bv(It,ii.fieldPath,It.startAt):jv(It,ii.fieldPath,It.startAt);jt.push(Iu.value),sn&&(sn=Iu.inclusive)}return new hl(jt,sn)}(v,g),Q=function(It,_t){const jt=[];let sn=!0;for(const ii of su(_t)){const Iu=0===ii.kind?jv(It,ii.fieldPath,It.endAt):Bv(It,ii.fieldPath,It.endAt);jt.push(Iu.value),sn&&(sn=Iu.inclusive)}return new hl(jt,sn)}(v,g),Ee=this.Ze(g,v,V),xe=this.Ze(g,v,Q),yt=this.tn(g,v,N),vt=this.en(g.indexId,S,Ee,V.inclusive,xe,Q.inclusive,yt);return he.forEach(vt,It=>r.j(It,t.limit).next(_t=>{_t.forEach(jt=>{const sn=Ye.fromSegments(jt.documentKey);l.has(sn)||(l=l.add(sn),h.push(sn))})}))}).next(()=>h)}return he.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,a,l,h){const g=(null!=t?t.length:1)*Math.max(r.length,a.length),v=g/(null!=t?t.length:1),D=[];for(let S=0;S<g;++S){const N=t?this.nn(t[S/v]):Bm,V=this.sn(e,N,r[S%v],i),Q=this.rn(e,N,a[S%v],l),Ee=h.map(xe=>this.sn(e,N,xe,!0));D.push(...this.createRange(V,Q,Ee))}return D}sn(e,t,r,i){const a=new ml(e,Ye.empty(),t,r);return i?a:a.Le()}rn(e,t,r,i){const a=new ml(e,Ye.empty(),t,r);return i?a.Le():a}Xe(e,t){const r=new fM(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.Ge(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return he.forEach(this.Ye(t),i=>this.Xe(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new wn(Zn.comparator),g=!1;for(const v of l.filters){const D=v;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?g=!0:h=h.add(D.field))}for(const v of l.orderBy)v.field.isKeyField()||(h=h.add(v.field));return h.size+(g?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Sh;for(const i of su(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Be(i.kind);Oc.ye.re(a,l)}return r.Oe()}nn(e){const t=new Sh;return Oc.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new Sh;return Oc.ye.re(Tc(this.databaseId,t),r.Be(function(i){const a=su(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new Sh);let a=0;for(const l of su(e)){const h=r[a++];for(const g of i)if(this.cn(t,l.fieldPath)&&tp(h))i=this.an(i,l,h);else{const v=g.Be(l.kind);Oc.ye.re(h,v)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const g=new Sh;g.seed(h.Oe()),Oc.ye.re(l,g.Be(t.kind)),a.push(g)}return a}cn(e,t){return!!e.filters.find(r=>r instanceof ti&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=jm(e),i=Fc(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(a=>{const l=[];return he.forEach(a,h=>i.get([h.indexId,this.uid]).next(g=>{l.push(function(v,D){const S=D?new ah(D.sequenceNumber,new Qi(kc(D.readTime),new Ye(ma(D.documentKey)),D.largestBatchId)):ah.empty(),N=v.fields.map(([V,Q])=>new oh(Zn.fromServerFormat(V),Q));return new sh(v.indexId,v.collectionGroup,N,S)}(h,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Wt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=jm(e),a=Fc(e);return this.ln(e).next(l=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>he.forEach(h,g=>a.put(UC(g.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?he.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),he.forEach(h,g=>this.fn(e,i,g).next(v=>{const D=this.dn(a,g);return v.isEqual(D)?he.resolve():this._n(e,a,g,v,D)}))))})}wn(e,t,r,i){return du(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return du(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=du(e);let a=new wn(Lc);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(l,h)=>{a=a.add(new ml(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}dn(e,t){let r=new wn(Lc);const i=this.on(t,e);if(null==i)return r;const a=Sv(t);if(null!=a){const l=e.data.field(a.fieldPath);if(tp(l))for(const h of l.arrayValue.values||[])r=r.add(new ml(t.indexId,e.key,this.nn(h),i))}else r=r.add(new ml(t.indexId,e.key,Bm,i));return r}_n(e,t,r,i,a){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,g,v,D,S){const N=h.getIterator(),V=g.getIterator();let Q=Yn(N),Ee=Yn(V);for(;Q||Ee;){let xe=!1,yt=!1;if(Q&&Ee){const vt=v(Q,Ee);vt<0?yt=!0:vt>0&&(xe=!0)}else null!=Q?yt=!0:xe=!0;xe?(D(Ee),Ee=Yn(V)):yt?(S(Q),Q=Yn(N)):(Q=Yn(N),Ee=Yn(V))}}(i,a,Lc,h=>{l.push(this.wn(e,t,r,h))},h=>{l.push(this.mn(e,t,r,h))}),he.waitFor(l)}ln(e){let t=1;return Fc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Lc(l,h)).filter((l,h,g)=>!h||0!==Lc(l,g[h-1]));const i=[];i.push(e);for(const l of r){const h=Lc(l,e),g=Lc(l,t);if(0===h)i[0]=e.Le();else if(h>0&&g<0)i.push(l),i.push(l.Le());else if(g>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Bm,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Bm,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ko)}getMinOffset(e,t){return he.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||ot())).next(ko)}}function WC(n){return Wr(n,"collectionParents")}function du(n){return Wr(n,"indexEntries")}function jm(n){return Wr(n,"indexConfiguration")}function Fc(n){return Wr(n,"indexState")}function ko(n){Tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;hm(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Qi(e.readTime,e.documentKey,t)}const zC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new wi(e,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ah(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const g=r.J({range:l},(D,S,N)=>(h++,N.delete()));a.push(g.next(()=>{Tt(1===h)}));const v=[];for(const D of t.mutations){const S=Pm(e,D.key.path,t.batchId);a.push(i.delete(S)),v.push(D.key)}return he.waitFor(a).next(()=>v)}function $m(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ot();e=n.noDocument}return JSON.stringify(e).length}wi.DEFAULT_COLLECTION_PERCENTILE=10,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wi.DEFAULT=new wi(41943040,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wi.DISABLED=new wi(-1,0,0);class Hm{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){Tt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Hm(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oo(e).J({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=hu(e),l=Oo(e);return l.add({}).next(h=>{Tt("number"==typeof h);const g=new Fm(h,t,r,i),v=function(N,V,Q){const Ee=Q.baseMutations.map(yt=>pp(N.ne,yt)),xe=Q.mutations.map(yt=>pp(N.ne,yt));return{userId:V,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:Ee,mutations:xe}}(this.wt,this.userId,g),D=[];let S=new wn((N,V)=>Wt(N.canonicalString(),V.canonicalString()));for(const N of i){const V=Pm(this.userId,N.key.path,h);S=S.add(N.key.path.popLast()),D.push(l.put(v)),D.push(a.put(V,aw))}return S.forEach(N=>{D.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.gn[h]=g.keys()}),he.waitFor(D).next(()=>g)})}lookupMutationBatch(e,t){return Oo(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Dh(this.wt,r)):null)}yn(e,t){return this.gn[t]?he.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Oo(e).J({index:"userMutationsIndex",range:i},(l,h,g)=>{h.userId===this.userId&&(Tt(h.batchId>=r),a=Dh(this.wt,h)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Oo(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Oo(e).K("userMutationsIndex",t).next(r=>r.map(i=>Dh(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Nm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return hu(e).J({range:i},(l,h,g)=>{const[v,D,S]=l,N=ma(D);if(v===this.userId&&t.path.isEqual(N))return Oo(e).get(S).next(V=>{if(!V)throw ot();Tt(V.userId===this.userId),a.push(Dh(this.wt,V))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Wt);const i=[];return t.forEach(a=>{const l=Nm(this.userId,a.path),h=IDBKeyRange.lowerBound(l),g=hu(e).J({range:h},(v,D,S)=>{const[N,V,Q]=v,Ee=ma(V);N===this.userId&&a.path.isEqual(Ee)?r=r.add(Q):S.done()});i.push(g)}),he.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Nm(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new wn(Wt);return hu(e).J({range:l},(g,v,D)=>{const[S,N,V]=g,Q=ma(N);S===this.userId&&r.isPrefixOf(Q)?Q.length===i&&(h=h.add(V)):D.done()}).next(()=>this.pn(e,h))}pn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Oo(e).get(a).next(l=>{if(null===l)throw ot();Tt(l.userId===this.userId),r.push(Dh(this.wt,l))}))}),he.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Ah(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),he.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return hu(e).J({range:r},(a,l,h)=>{if(a[0]===this.userId){const g=ma(a[1]);i.push(g)}else h.done()}).next(()=>{Tt(0===i.length)})})}containsKey(e,t){return qC(e,this.userId,t)}Tn(e){return KC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function qC(n,e,t){const r=Nm(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return hu(n).J({range:a,H:!0},(h,g,v)=>{const[D,S,N]=h;D===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function Oo(n){return Wr(n,"mutations")}function hu(n){return Wr(n,"documentMutations")}function KC(n){return Wr(n,"mutationQueues")}class Uc{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Uc(0)}static Rn(){return new Uc(-1)}}class ZC{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Uc(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Nt.fromTimestamp(new Kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Vc(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Vc(e).J((l,h)=>{const g=Um(h);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>he.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Vc(e).J((r,i)=>{const a=Um(i);t(a)})}bn(e){return Gm(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}Pn(e,t){return Gm(e).put("targetGlobalKey",t)}vn(e,t){return Vc(e).put(LC(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=dl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Vc(e).J({range:i,index:"queryTargetsIndex"},(l,h,g)=>{const v=Um(h);lh(t,v.target)&&(a=v,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=fu(e);return t.forEach(l=>{const h=Vi(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),he.waitFor(i)}removeMatchingKeys(e,t,r){const i=fu(e);return he.forEach(t,a=>{const l=Vi(a.path);return he.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=fu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=fu(e);let a=qt();return i.J({range:r,H:!0},(l,h,g)=>{const v=ma(l[1]),D=new Ye(v);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Vi(t.path),i=IDBKeyRange.bound([r],[Tv(r)],!1,!0);let a=0;return fu(e).J({index:"documentTargetsIndex",H:!0,range:i},([l,h],g,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}te(e,t){return Vc(e).get(t).next(r=>r?Um(r):null)}}function Vc(n){return Wr(n,"targets")}function Gm(n){return Wr(n,"targetGlobal")}function fu(n){return Wr(n,"targetDocuments")}function YC([n,e],[t,r]){const i=Wt(n,t);return 0===i?Wt(e,r):i}class QS{constructor(e){this.Sn=e,this.buffer=new wn(YC),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();YC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,be.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){sl(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield il(r)}yield t.kn(3e5)}))}}class mw{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(Ui.ot);const r=new QS(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(zC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zC):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,a,l,h,g,v;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),Xr()<=Qs.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(g-h)+`ms\n\tRemoved ${S} documents in `+(v-g)+`ms\nTotal Duration: ${v-D}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class _w{constructor(e,t){this.db=e,this.garbageCollector=new mw(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return _p(e,r)}removeReference(e,t,r){return _p(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _p(e,t)}Un(e,t){return function(r,i){let a=!1;return KC(r).Y(l=>qC(r,l,i).next(h=>(h&&(a=!0),he.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ln(e,(l,h)=>{if(h<=t){const g=this.Un(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Nt.min()),fu(e).delete([0,Vi(l.path)])))});i.push(g)}}).next(()=>he.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _p(e,t)}Ln(e,t){const r=fu(e);let i,a=Ui.ot;return r.J({index:"documentTargetsIndex"},([l,h],{path:g,sequenceNumber:v})=>{0===l?(a!==Ui.ot&&t(new Ye(ma(i)),a),a=v,i=g):a=Ui.ot}).next(()=>{a!==Ui.ot&&t(new Ye(ma(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _p(n,e){return fu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Vi(e.path),sequenceNumber:r}));var r}class Wm{constructor(){this.changes=new ro(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yw{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Bc(e).put(r)}removeEntry(e,t,r){return Bc(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],gp(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return Bc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xh(t))},(i,a)=>{r=this.Kn(t,a)}).next(()=>r)}Gn(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return Bc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xh(t))},(i,a)=>{r={document:this.Kn(t,a),size:$m(a)}}).next(()=>r)}getEntries(e,t){let r=es();return this.Qn(e,t,(i,a)=>{const l=this.Kn(i,a);r=r.insert(i,l)}).next(()=>r)}jn(e,t){let r=es(),i=new br(Ye.comparator);return this.Qn(e,t,(a,l)=>{const h=this.Kn(a,l);r=r.insert(a,h),i=i.insert(a,$m(l))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return he.resolve();let i=new wn(vw);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(xh(i.first()),xh(i.last())),l=i.getIterator();let h=l.getNext();return Bc(e).J({index:"documentKeyIndex",range:a},(g,v,D)=>{const S=Ye.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&vw(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,v),h=l.hasNext()?l.getNext():null),h?D.q(xh(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),gp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bc(e).K(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=es();for(const g of l){const v=this.Kn(Ye.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);h=h.insert(v.key,v)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=es();const l=zm(t,r),h=zm(t,Qi.max());return Bc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(g,v,D)=>{const S=this.Kn(Ye.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new JS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return JC(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}qn(e,t){return JC(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function OC(n,e){let t;if(e.document)t=IC(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),i=kc(e.noDocument.readTime);t=Nn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ot();{const r=Ye.fromSegments(e.unknownDocument.path),i=kc(e.unknownDocument.version);t=Nn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Kn(r[0],r[1]);return Nt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Nt.min()))return r}return Nn.newInvalidDocument(e)}}function QC(n){return new yw(n)}class JS extends Wm{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new ro(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new wn((a,l)=>Wt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Hn.get(a);if(t.push(this.zn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const g=zS(this.zn.wt,l);i=i.add(a.path.popLast()),r+=$m(g)-h.size,t.push(this.zn.addEntry(e,a,g))}else if(r-=h.size,this.trackRemovals){const g=zS(this.zn.wt,l.convertToNoDocument(Nt.min()));t.push(this.zn.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.zn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((a,l)=>{this.Hn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function JC(n){return Wr(n,"remoteDocumentGlobal")}function Bc(n){return Wr(n,"remoteDocumentsV14")}function xh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zm(n,e){const t=e.documentKey.path.toArray();return[n,gp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vw(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Wt(t[a],r[a]),i)return i;return i=Wt(t.length,r.length),i||(i=Wt(t[t.length-2],r[r.length-2]),i||Wt(t[t.length-1],r[r.length-1]))}class XS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ww{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&gh(r.mutation,i,Ji.empty(),Kn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qt()){const i=Po();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=lp();return a.forEach((h,g)=>{l=l.insert(h,g.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Po();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=es();const l=cp(),h=cp();return t.forEach((g,v)=>{const D=r.get(v.key);i.has(v.key)&&(void 0===D||D.mutation instanceof cu)?a=a.insert(v.key,v):void 0!==D&&(l.set(v.key,D.mutation.getFieldMask()),gh(D.mutation,v,D.mutation.getFieldMask(),Kn.now()))}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((v,D)=>l.set(v,D)),t.forEach((v,D)=>{var S;return h.set(v,new XS(D,null!==(S=l.get(v))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=cp();let i=new br((l,h)=>l-h),a=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(g=>{const v=t.get(g);if(null===v)return;let D=r.get(g)||Ji.empty();D=h.applyToLocalView(v,D),r.set(g,D);const S=(i.get(h.batchId)||qt()).add(g);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),v=g.key,D=g.value,S=ew();D.forEach(N=>{if(!a.has(N)){const V=aC(t.get(N),r.get(N));null!==V&&S.set(N,V),a=a.add(N)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return he.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Im(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):he.resolve(Po());let h=-1,g=a;return l.next(v=>he.forEach(v,(D,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(D)?he.resolve():this.getBaseDocument(e,D,S).next(N=>{g=g.insert(D,N)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,g,v,qt())).next(D=>({batchId:h,changes:Xv(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let i=lp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=lp();return this.indexManager.getCollectionParents(e,i).next(l=>he.forEach(l,h=>{const g=(v=t,D=h.child(i),new lu(D,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,D;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(v=>{v.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,g)=>{const v=g.getKey();null===i.get(v)&&(i=i.insert(v,Nn.newInvalidDocument(v)))});let l=lp();return i.forEach((h,g)=>{const v=a.get(h);void 0!==v&&gh(v.mutation,g,Ji.empty(),Kn.now()),bm(t,g)&&(l=l.insert(h,g))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):he.resolve(Nn.newInvalidDocument(t))}}class XC{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return he.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:ni(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:fw(r.bundledQuery),readTime:ni(r.readTime)}),he.resolve();var r}}class eA{constructor(){this.overlays=new br(Ye.comparator),this.Xn=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Po();return he.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ie(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Xn.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const i=Po(),a=t.length+1,l=new Ye(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const g=h.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return he.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new br((v,D)=>v-D);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let D=a.get(v.largestBatchId);null===D&&(D=Po(),a=a.insert(v.largestBatchId,D)),D.set(v.getKey(),v)}}const h=Po(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,D)=>h.set(v,D)),!(h.size()>=i)););return he.resolve(h)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new hw(t,r));let a=this.Xn.get(t);void 0===a&&(a=qt(),this.Xn.set(t,a)),this.Xn.set(t,a.add(r.key))}}class qm{constructor(){this.Zn=new wn(zr.ts),this.es=new wn(zr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new zr(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new zr(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Ye(new nn([])),r=new zr(t,e),i=new zr(t,e+1),a=[];return this.es.forEachInRange([r,i],l=>{this.rs(l),a.push(l.key)}),a}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ye(new nn([])),r=new zr(t,e),i=new zr(t,e+1);let a=qt();return this.es.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new zr(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class zr{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ye.comparator(e.key,t.key)||Wt(e.ls,t.ls)}static ns(e,t){return Wt(e.ls,t.ls)||Ye.comparator(e.key,t.key)}}class tA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new wn(zr.ts)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const l=new Fm(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.ds=this.ds.add(new zr(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return he.resolve(l)}lookupMutationBatch(e,t){return he.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),a=i<0?0:i;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new zr(t,0),i=new zr(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],l=>{const h=this._s(l.ls);a.push(h)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn(Wt);return t.forEach(i=>{const a=new zr(i,0),l=new zr(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,l],h=>{r=r.add(h.ls)})}),he.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ye.isDocumentKey(a)||(a=a.child(""));const l=new zr(new Ye(a),0);let h=new wn(Wt);return this.ds.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(g.ls)),!0)},l),he.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Tt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return he.forEach(t.mutations,i=>{const a=new zr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new zr(t,0),i=this.ds.firstAfterOrEqual(r);return he.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return he.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class eb{constructor(e){this.ps=e,this.docs=new br(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=es();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Nn.newInvalidDocument(i))}),he.resolve(r)}getAllFromCollection(e,t,r){let i=es();const a=new Ye(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:g}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||hm(dm(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ot()}Is(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nA(this)}getSize(e){return he.resolve(this.size)}}class nA extends Wm{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Bi{constructor(e){this.persistence=e,this.Ts=new ro(t=>dl(t),lh),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.Es=0,this.As=new qm,this.targetCount=0,this.Rs=Uc.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),he.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Uc(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.vn(t),he.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Ts.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Ts.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),he.waitFor(a).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.As.containsKey(t))}}class jc{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Ui(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Bi(this),this.indexManager=new ZS,this.remoteDocumentCache=new eb(r=>this.referenceDelegate.Ss(r)),this.wt=new kC(t),this.Ds=new XC(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new tA(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new rA(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(a=>this.referenceDelegate.xs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ns(e,t){return he.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class rA extends xv{constructor(e){super(),this.currentSequenceNumber=e}}class Km{constructor(e){this.persistence=e,this.ks=new qm,this.Os=null}static Ms(e){return new Km(e)}get Fs(){if(this.Os)return this.Os;throw ot()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),he.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Fs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Fs,r=>{const i=Ye.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i,Nt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return he.or([()=>he.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class gM{constructor(e){this.wt=e}O(e,t,r,i){const a=new Jf("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AC,{unique:!0}),h.createObjectStore("documentMutations"),iA(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=he.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),iA(e)),l=l.next(()=>function(h){const g=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,g){return g.store("mutations").K().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AC,{unique:!0});const D=g.store("mutations"),S=v.map(N=>D.put(N));return he.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Bs(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(a)))),r<7&&i>=7&&(l=l.next(()=>this.Us(a))),r<8&&i>=8&&(l=l.next(()=>this.qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Ks(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:MC});g.createIndex("collectionPathOverlayIndex",cw,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",GS,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:xC});g.createIndex("documentKeyIndex",uw),g.createIndex("collectionGroupIndex",VS)}(e)).next(()=>this.Gs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.Qs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:bh}).createIndex("sequenceNumberIndex",RC,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:HS}).createIndex("documentKeyIndex",hM,{unique:!1})}(e))),l}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=$m(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>he.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",l).next(h=>he.forEach(h,g=>{Tt(g.userId===a.userId);const v=Dh(this.wt,g);return Ah(e,a.userId,v).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.J((l,h)=>{const g=new nn(l),v=[0,Vi(g)];a.push(t.get(v).next(D=>D?he.resolve():t.put({targetId:0,path:Vi(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>he.waitFor(a))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:$S});const r=t.store("collectionParents"),i=new gw,a=l=>{if(i.add(l)){const h=l.lastSegment(),g=l.popLast();return r.put({collectionId:h,parent:Vi(g)})}};return t.store("remoteDocuments").J({H:!0},(l,h)=>{const g=new nn(l);return a(g.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,h,g],v)=>{const D=ma(h);return a(D.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const a=Um(i),l=LC(this.wt,a);return t.put(l)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((a,l)=>{const h=t.store("remoteDocumentsV14"),g=(v=l,v.document?new Ye(nn.fromString(v.document.name).popFirst(5)):v.noDocument?Ye.fromSegments(v.noDocument.path):v.unknownDocument?Ye.fromSegments(v.unknownDocument.path):ot()).path.toArray();var v;const D={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>he.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=QC(this.wt),a=new jc(Km.Ms,this.wt.ne);return r.K().next(l=>{const h=new Map;return l.forEach(g=>{var v;let D=null!==(v=h.get(g.userId))&&void 0!==v?v:qt();Dh(this.wt,g).keys().forEach(S=>D=D.add(S)),h.set(g.userId,D)}),he.forEach(h,(g,v)=>{const D=new Jr(v),S=Vm.se(this.wt,D),N=a.getIndexManager(D),V=Hm.se(D,this.wt,N,a.referenceDelegate);return new ww(i,V,S,N).recalculateAndSaveOverlaysForDocumentKeys(new Lm(t,Ui.ot),g).next()})})}}function iA(n){n.createObjectStore("targetDocuments",{keyPath:lw}).createIndex("documentTargetsIndex",jS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",BS,{unique:!0}),n.createObjectStore("targetGlobal")}const Zm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ym{constructor(e,t,r,i,a,l,h,g,v,D,S=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=a,this.window=l,this.document=h,this.Ws=v,this.zs=D,this.Hs=S,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=N=>Promise.resolve(),!Ym.V())throw new Fe(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _w(this,i),this.ei=t+"main",this.wt=new kC(g),this.ni=new No(this.ei,this.Hs,new gM(this.wt)),this.Vs=new ZC(this.referenceDelegate,this.wt),this.remoteDocumentCache=QC(this.wt),this.Ds=new qS,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===D&&pn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,Zm);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Ui(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(sl(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return pu(e).get("owner").next(t=>he.resolve(this.di(t)))}_i(e){return Qm(e).delete(this.clientId)}wi(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Wr(r,"clientMetadata");return i.K().next(a=>{const l=e.gi(a,18e5),h=a.filter(g=>-1===l.indexOf(g));return he.forEach(h,g=>i.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?he.resolve(!0):pu(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,Zm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qm(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Lm(t,Ui.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Qm(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return Hm.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new YS(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Vm.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Hs)?PC:14===l?Om:13===l?NC:12===l?WS:11===l?km:void ot();var l;let h;return this.ni.runTransaction(e,i,a,g=>(h=new Lm(g,this.Ps?this.Ps.next():Ui.ot),"readwrite-primary"===t?this.ai(h).next(v=>!!v||this.hi(h)).next(v=>{if(!v)throw pn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Fe(pe.FAILED_PRECONDITION,fm);return r(h)}).next(v=>this.fi(h).next(()=>v)):this.bi(h).next(()=>r(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}bi(e){return pu(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(pe.FAILED_PRECONDITION,Zm)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pu(e).put("owner",t)}static V(){return No.V()}li(e){const t=pu(e);return t.get("owner").next(r=>this.di(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(pn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){pn("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pu(n){return Wr(n,"owner")}function Qm(n){return Wr(n,"clientMetadata")}function yp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ew{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=qt(),i=qt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Ew(e,t.fromCache,r,i)}}class Iw{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(a=>a||this.xi(e,t,i,r)).next(a=>a||this.Ni(e,t))}Ci(e,t){return he.resolve(null)}xi(e,t,r,i){return function TS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Nt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(a=>{const l=this.ki(t,a);return this.Oi(t,l,r,i)?this.Ni(e,t):(Xr()<=Qs.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cm(t)),this.Mi(e,l,t,Av(i,-1)))})}ki(e,t){let r=new wn(zv(e));return t.forEach((i,a)=>{bm(e,a)&&(r=r.add(a))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ni(e,t){return Xr()<=Qs.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Cm(t)),this.Di.getDocumentsMatchingQuery(e,t,Qi.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class sA{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new br(Wt),this.Bi=new ro(a=>dl(a),lh),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ww(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function tb(n,e,t,r){return new sA(n,e,t,r)}function $c(n,e){return Cw.apply(this,arguments)}function Cw(){return Cw=(0,be.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let g=qt();for(const v of i){l.push(v.batchId);for(const D of v.mutations)g=g.add(D.key)}for(const v of a){h.push(v.batchId);for(const D of v.mutations)g=g.add(D.key)}return t.localDocuments.getDocuments(r,g).next(v=>({Ki:v,removedBatchIds:l,addedBatchIds:h}))})})}),Cw.apply(this,arguments)}function bw(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ui.newChangeBuffer({trackRemovals:!0});return function(l,h,g,v){const D=g.batch,S=D.keys();let N=he.resolve();return S.forEach(V=>{N=N.next(()=>v.getEntry(h,V)).next(Q=>{const Ee=g.docVersions.get(V);Tt(null!==Ee),Q.version.compareTo(Ee)<0&&(D.applyToRemoteDocument(Q,g),Q.isValidDocument()&&(Q.setReadTime(g.commitVersion),v.addEntry(Q)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=qt();for(let g=0;g<l.mutationResults.length;++g)l.mutationResults[g].transformResults.length>0&&(h=h.add(l.batch.mutations[g].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Dw(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function nb(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const h=[];e.targetChanges.forEach((D,S)=>{const N=i.get(S);if(!N)return;h.push(t.Vs.removeMatchingKeys(a,D.removedDocuments,S).next(()=>t.Vs.addMatchingKeys(a,D.addedDocuments,S)));let V=N.withSequenceNumber(a.currentSequenceNumber);var Q,Ee,xe;e.targetMismatches.has(S)?V=V.withResumeToken(Gr.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):D.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(D.resumeToken,r)),i=i.insert(S,V),Ee=V,xe=D,(0===(Q=N).resumeToken.approximateByteSize()||Ee.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||xe.addedDocuments.size+xe.modifiedDocuments.size+xe.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(a,V))});let g=es(),v=qt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),h.push(vp(a,l,e.documentUpdates).next(D=>{g=D.Gi,v=D.Qi})),!r.isEqual(Nt.min())){const D=t.Vs.getLastRemoteSnapshotVersion(a).next(S=>t.Vs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(D)}return he.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,v)).next(()=>g)}).then(a=>(t.$i=i,a))}function vp(n,e,t){let r=qt(),i=qt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=es();return t.forEach((h,g)=>{const v=a.get(h);g.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(h)),g.isNoDocument()&&g.version.isEqual(Nt.min())?(e.removeEntry(h,g.readTime),l=l.insert(h,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),l=l.insert(h,g)):Be("LocalStore","Ignoring outdated watch update for ",h,". Current version:",v.version," Watch version:",g.version)}),{Gi:l,Qi:i}})}function Tw(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wp(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(a=>a?(i=a,he.resolve(i)):t.Vs.allocateTargetId(r).next(l=>(i=new gl(e,l,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Hc(n,e,t){return Sw.apply(this,arguments)}function Sw(){return Sw=(0,be.Z)(function*(n,e,t){const r=Qe(n),i=r.$i.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!sl(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),Sw.apply(this,arguments)}function Ep(n,e,t){const r=Qe(n);let i=Nt.min(),a=qt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,g,v){const D=Qe(h),S=D.Bi.get(v);return void 0!==S?he.resolve(D.$i.get(S)):D.Vs.getTargetData(g,v)}(r,l,Ds(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(l,h.targetId).next(g=>{a=g})}).next(()=>r.Fi.getDocumentsMatchingQuery(l,e,t?i:Nt.min(),t?a:qt())).next(h=>(Aw(r,Wv(e),h),{documents:h,ji:a})))}function Gc(n,e){const t=Qe(n),r=Qe(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.te(a,e).next(l=>l?l.target:null))}function rb(n,e){const t=Qe(n),r=t.Li.get(e)||Nt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,Av(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Aw(t,e,i),i))}function Aw(n,e,t){let r=Nt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Li.set(e,r)}function ib(){return ib=(0,be.Z)(function*(n,e,t,r){const i=Qe(n);let a=qt(),l=es();for(const v of t){const D=e.Wi(v.metadata.name);v.document&&(a=a.add(D));const S=e.zi(v);S.setReadTime(e.Hi(v.metadata.readTime)),l=l.insert(D,S)}const h=i.Ui.newChangeBuffer({trackRemovals:!0}),g=yield wp(i,(v=r,Ds(dh(nn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>vp(v,h,l).next(D=>(h.apply(v),D)).next(D=>i.Vs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.Vs.addMatchingKeys(v,a,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,D.Gi,D.Qi)).next(()=>D.Gi)))}),ib.apply(this,arguments)}function oA(n,e){return sb.apply(this,arguments)}function sb(){return sb=(0,be.Z)(function*(n,e,t=qt()){const r=yield wp(n,Ds(fw(e.bundledQuery))),i=Qe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=ni(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ds.saveNamedQuery(a,e);const h=r.withResumeToken(Gr.EMPTY_BYTE_STRING,l);return i.$i=i.$i.insert(h.targetId,h),i.Vs.updateTargetData(a,h).next(()=>i.Vs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Vs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(a,e))})}),sb.apply(this,arguments)}function ob(n,e){return`firestore_clients_${n}_${e}`}function ab(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Rw(n,e){return`firestore_targets_${n}_${e}`}class Ip{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Fe(i.error.code,i.error.message))),l?new Ip(e,t,i.state,a):(pn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Fe(r.error.code,r.error.message))),a?new Rh(e,r.state,i):(pn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=tw();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=kv(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Jm(e,a):(pn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Xm{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Xm(t.clientId,t.onlineState):(pn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class e_{constructor(){this.activeTargetIds=tw()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mw{constructor(e,t,r,i,a){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new br(Wt),this.started=!1,this.ir=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=ob(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new e_),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const a=e.getItem(ob(e.persistenceKey,i));if(a){const l=Jm.Ji(i,a);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Rw(this.persistenceKey,e));if(r){const i=Rh.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rw(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void pn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let l=Ui.ot;if(null!=a)try{const h=JSON.parse(a);Tt("number"==typeof h),l=h}catch(h){pn("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Ui.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new Ip(this.currentUser,e,t,r),a=ab(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=ab(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=Rw(this.persistenceKey,e),a=new Rh(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Jm.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return Ip.Ji(new Jr(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Rh.Ji(i,t)}wr(e){return Xm.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),l=[],h=[];return a.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{a.has(g)||h.push(g)}),this.syncEngine.Mr(l,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=tw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class ub{constructor(){this.Fr=new e_,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new e_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lb{Br(e){}shutdown(){}}class cb{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const db={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class hb{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class fb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const l=this.oo(e,t);Be("RestConnection","Sending: ",l,r);const h={};return this.uo(h,i,a),this.co(e,l,h,r).then(g=>(Be("RestConnection","Received: ",g),g),g=>{throw Ec("RestConnection",`${e} failed with error: `,g,"url: ",l,"request:",r),g})}ao(e,t,r,i,a,l){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${db[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,l)=>{const h=new hS;h.listenOnce(um.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case bv.NO_ERROR:const v=h.getResponseJson();Be("Connection","XHR received:",JSON.stringify(v)),a(v);break;case bv.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),l(new Fe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case bv.HTTP_ERROR:const D=h.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const N=function(V){const Q=V.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(Q)>=0?Q:pe.UNKNOWN}(S.status);l(new Fe(N,S.message))}else l(new Fe(pe.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Fe(pe.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);h.send(t,"POST",g,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=lS(),l=cS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new Qf({})),this.uo(h.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");Be("Connection","Creating WebChannel: "+g,h);const v=a.createWebChannel(g,h);let D=!1,S=!1;const N=new hb({jr:Q=>{S?Be("Connection","Not sending because WebChannel is closed:",Q):(D||(Be("Connection","Opening WebChannel transport."),v.open(),D=!0),Be("Connection","WebChannel sending:",Q),v.send(Q))},Wr:()=>v.close()}),V=(Q,Ee,xe)=>{Q.listen(Ee,yt=>{try{xe(yt)}catch(vt){setTimeout(()=>{throw vt},0)}})};return V(v,lm.EventType.OPEN,()=>{S||Be("Connection","WebChannel transport opened.")}),V(v,lm.EventType.CLOSE,()=>{S||(S=!0,Be("Connection","WebChannel transport closed"),N.eo())}),V(v,lm.EventType.ERROR,Q=>{S||(S=!0,Ec("Connection","WebChannel transport errored:",Q),N.eo(new Fe(pe.UNAVAILABLE,"The operation could not be completed")))}),V(v,lm.EventType.MESSAGE,Q=>{var Ee;if(!S){const xe=Q.data[0];Tt(!!xe);const yt=xe,vt=yt.error||(null===(Ee=yt[0])||void 0===Ee?void 0:Ee.error);if(vt){Be("Connection","WebChannel received error:",vt);const It=vt.status;let _t=function(sn){const ii=Dr[sn];if(void 0!==ii)return hC(ii)}(It),jt=vt.message;void 0===_t&&(_t=pe.INTERNAL,jt="Unknown error status: "+It+" with message "+vt.message),S=!0,N.eo(new Fe(_t,jt)),v.close()}else Be("Connection","WebChannel received:",xe),N.no(xe)}}),V(l,vc.STAT_EVENT,Q=>{Q.stat===dS.PROXY?Be("Connection","Detected buffering proxy"):Q.stat===dS.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Zr()},0),N}}function Nw(){return typeof window<"u"?window:null}function t_(){return typeof document<"u"?document:null}function Cp(n){return new RS(n,!0)}class pb{constructor(e,t,r=1e3,i=1.5,a=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Pw{constructor(e,t,r,i,a,l,h,g){this.js=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new pb(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,be.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,be.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(pn(t.toString()),pn("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Fe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,be.Z)(function*(){e.state=0,e.start()}))}qo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mM extends Pw{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.wt=a}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function bC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:ot(),i=e.targetChange.targetIds||[],a=function(g,v){return g.dt?(Tt(void 0===v||"string"==typeof v),Gr.fromBase64String(v||"")):(Tt(void 0===v||v instanceof Uint8Array),Gr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(g){const v=void 0===g.code?pe.UNKNOWN:hC(g.code);return new Fe(v,g.message||"")}(l);t=new gC(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=ga(n,r.document.name),a=ni(r.document.updateTime),l=new di({mapValue:{fields:r.document.fields}}),h=Nn.newFoundDocument(i,a,l);t=new dp(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=ga(n,r.document),a=r.readTime?ni(r.readTime):Nt.min(),l=Nn.newNoDocument(i,a);t=new dp([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ga(n,r.document);t=new dp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ot();{const r=e.filter,a=new Tm(r.count||0);t=new hp(r.targetId,a)}}var g;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Nt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Nt.min():a.readTime?ni(a.readTime):Nt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Eh(this.wt),t.addTarget=function(i,a){let l;const h=a.target;return l=ip(h)?{documents:Mm(i,h)}:{query:DC(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=nw(i,a.resumeToken):a.snapshotVersion.compareTo(Nt.min())>0&&(l.readTime=fp(i,a.snapshotVersion.toTimestamp())),l}(this.wt,e);const r=function PS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ot()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=Eh(this.wt),t.removeTarget=e,this.Mo(t)}}class _M extends Pw{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.wt=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function NS(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,i){let a=ni(r.updateTime?r.updateTime:i);return a.isEqual(Nt.min())&&(a=ni(i)),new _r(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ni(e.commitTime);return this.listener.Jo(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Eh(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>pp(this.wt,r))};this.Mo(t)}}class yM extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(pe.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.bo.ao(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(pe.UNKNOWN,a.toString())})}terminate(){this.Zo=!0}}class vM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(pn(t),this.su=!1):Be("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class wM{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(h=>{r.enqueueAndForget((0,be.Z)(function*(){var g;_a(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,be.Z)(function*(v){const D=Qe(v);D.lu.add(4),yield bp(D),D._u.set("Unknown"),D.lu.delete(4),yield n_(D)}),function(v){return g.apply(this,arguments)})(l))}))}),this._u=new vM(r,i)}}function n_(n){return gb.apply(this,arguments)}function gb(){return gb=(0,be.Z)(function*(n){if(_a(n))for(const e of n.fu)yield e(!0)}),gb.apply(this,arguments)}function bp(n){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,be.Z)(function*(n){for(const e of n.fu)yield e(!1)}),Mh.apply(this,arguments)}function kw(n,e){const t=Qe(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),mb(t)?r_(t):kh(t).Co()&&Ph(t,e))}function Nh(n,e){const t=Qe(n),r=kh(t);t.hu.delete(e),r.Co()&&Ow(t,e),0===t.hu.size&&(r.Co()?r.ko():_a(t)&&t._u.set("Unknown"))}function Ph(n,e){n.wu.Nt(e.targetId),kh(n).Qo(e)}function Ow(n,e){n.wu.Nt(e),kh(n).jo(e)}function r_(n){n.wu=new _C({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),kh(n).start(),n._u.iu()}function mb(n){return _a(n)&&!kh(n).Do()&&n.hu.size>0}function _a(n){return 0===Qe(n).lu.size}function Lw(n){n.wu=void 0}function aA(n){return i_.apply(this,arguments)}function i_(){return i_=(0,be.Z)(function*(n){n.hu.forEach((e,t)=>{Ph(n,e)})}),i_.apply(this,arguments)}function EM(n,e){return _b.apply(this,arguments)}function _b(){return _b=(0,be.Z)(function*(n,e){Lw(n),mb(n)?(n._u.uu(e),r_(n)):n._u.set("Unknown")}),_b.apply(this,arguments)}function uA(n,e,t){return Fw.apply(this,arguments)}function Fw(){return Fw=(0,be.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof gC&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Wc(n,r)}else if(e instanceof dp?n.wu.Ut(e):e instanceof hp?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Nt.min()))try{const r=yield Dw(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.wu.Yt(a);return l.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const v=i.hu.get(g);v&&i.hu.set(g,v.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const g=i.hu.get(h);if(!g)return;i.hu.set(h,g.withResumeToken(Gr.EMPTY_BYTE_STRING,g.snapshotVersion)),Ow(i,h);const v=new gl(g.target,h,1,g.sequenceNumber);Ph(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield Wc(n,r)}var r}),Fw.apply(this,arguments)}function Wc(n,e,t){return Uw.apply(this,arguments)}function Uw(){return Uw=(0,be.Z)(function*(n,e,t){if(!sl(e))throw e;n.lu.add(1),yield bp(n),n._u.set("Offline"),t||(t=()=>Dw(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield n_(n)}))}),Uw.apply(this,arguments)}function lA(n,e){return e().catch(t=>Wc(n,t,e))}function Dp(n){return yb.apply(this,arguments)}function yb(){return yb=(0,be.Z)(function*(n){const e=Qe(n),t=ya(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;cA(e);)try{const i=yield Tw(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,dA(e,i)}catch(i){yield Wc(e,i)}vb(e)&&hA(e)}),yb.apply(this,arguments)}function cA(n){return _a(n)&&n.au.length<10}function dA(n,e){n.au.push(e);const t=ya(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function vb(n){return _a(n)&&!ya(n).Do()&&n.au.length>0}function hA(n){ya(n).start()}function fA(n){return s_.apply(this,arguments)}function s_(){return s_=(0,be.Z)(function*(n){ya(n).Xo()}),s_.apply(this,arguments)}function wb(n){return Eb.apply(this,arguments)}function Eb(){return Eb=(0,be.Z)(function*(n){const e=ya(n);for(const t of n.au)e.Ho(t.mutations)}),Eb.apply(this,arguments)}function Lo(n,e,t){return Vw.apply(this,arguments)}function Vw(){return Vw=(0,be.Z)(function*(n,e,t){const r=n.au.shift(),i=dw.from(r,e,t);yield lA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Dp(n)}),Vw.apply(this,arguments)}function Bw(n,e){return jw.apply(this,arguments)}function jw(){return jw=(0,be.Z)(function*(n,e){var t;e&&ya(n).zo&&(yield(t=(0,be.Z)(function*(r,i){if(Jv(a=i.code)&&a!==pe.ABORTED){const l=r.au.shift();ya(r).No(),yield lA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Dp(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),vb(n)&&hA(n)}),jw.apply(this,arguments)}function ts(n,e){return $w.apply(this,arguments)}function $w(){return $w=(0,be.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=_a(t);t.lu.add(3),yield bp(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield n_(t)}),$w.apply(this,arguments)}function Tp(n,e){return Hw.apply(this,arguments)}function Hw(){return Hw=(0,be.Z)(function*(n,e){const t=Qe(n);e?(t.lu.delete(2),yield n_(t)):e||(t.lu.add(2),yield bp(t),t._u.set("Unknown"))}),Hw.apply(this,arguments)}function kh(n){return n.mu||(n.mu=function(e,t,r){const i=Qe(e);return i.tu(),new mM(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:aA.bind(null,n),Jr:EM.bind(null,n),Go:uA.bind(null,n)}),n.fu.push(function(){var e=(0,be.Z)(function*(t){t?(n.mu.No(),mb(n)?r_(n):n._u.set("Unknown")):(yield n.mu.stop(),Lw(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function ya(n){return n.gu||(n.gu=function(e,t,r){const i=Qe(e);return i.tu(),new _M(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:fA.bind(null,n),Jr:Bw.bind(null,n),Yo:wb.bind(null,n),Jo:Lo.bind(null,n)}),n.fu.push(function(){var e=(0,be.Z)(function*(t){t?(n.gu.No(),yield Dp(n)):(yield n.gu.stop(),n.au.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class o_{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new o_(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zc(n,e){if(pn("AsyncQueue",`${e}: ${n}`),sl(n))return new Fe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Oh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=lp(),this.sortedSet=new br(this.comparator)}static emptySet(e){return new Oh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Oh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Gw{constructor(){this.yu=new br(Ye.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):ot():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class qc{constructor(e,t,r,i,a,l,h,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new qc(e,t,Oh.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class pA{constructor(){this.Iu=void 0,this.listeners=[]}}class Ib{constructor(){this.queries=new ro(e=>Gv(e),hh),this.onlineState="Unknown",this.Tu=new Set}}function Ww(n,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,be.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new pA),i)try{a.Iu=yield t.onListen(r)}catch(l){const h=zc(l,`Initialization of query '${Cm(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&qw(t)}),Sp.apply(this,arguments)}function va(n,e){return a_.apply(this,arguments)}function a_(){return a_=(0,be.Z)(function*(n,e){const t=Qe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),a_.apply(this,arguments)}function zw(n,e){const t=Qe(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Au(i)&&(r=!0);l.Iu=i}}r&&qw(t)}function gu(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function qw(n){n.Tu.forEach(e=>{e.next()})}class Cb{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new qc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class gA{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class bb{constructor(e){this.wt=e}Wi(e){return ga(this.wt,e)}zi(e){return e.metadata.exists?IC(this.wt,e.document,!1):Nn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return ni(e)}}class mA{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Db(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=nn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new bb(this.wt);for(const i of e)if(i.metadata.queries){const a=r.Wi(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||qt()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function xw(n,e,t,r){return ib.apply(this,arguments)}(e.localStore,new bb(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield oA(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function Db(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Kw{constructor(e){this.key=e}}class _A{constructor(e){this.key=e}}class Zw{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=qt(),this.mutatedKeys=qt(),this.Lu=zv(e),this.Uu=new Oh(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new Gw,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const N=i.get(D),V=bm(this.query,S)?S:null,Q=!!N&&this.mutatedKeys.has(N.key),Ee=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let xe=!1;N&&V?N.data.isEqual(V.data)?Q!==Ee&&(r.track({type:3,doc:V}),xe=!0):this.Qu(N,V)||(r.track({type:2,doc:V}),xe=!0,(g&&this.Lu(V,g)>0||v&&this.Lu(V,v)<0)&&(h=!0)):!N&&V?(r.track({type:0,doc:V}),xe=!0):N&&!V&&(r.track({type:1,doc:N}),xe=!0,(g||v)&&(h=!0)),xe&&(V?(l=l.add(V),a=Ee?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Uu:l,Gu:r,Oi:h,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Gu.pu();a.sort((v,D)=>function(S,N){const V=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return V(S)-V(N)}(v.type,D.type)||this.Lu(v.doc,D.doc)),this.ju(r);const l=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,g=h!==this.$u;return this.$u=h,0!==a.length||g?{snapshot:new qc(this.query,e.Uu,i,a,e.mutatedKeys,0===h,g,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Gw,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=qt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new _A(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new Kw(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=qt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return qc.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class yA{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Tb{constructor(e){this.key=e,this.Xu=!1}}class IM{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new ro(h=>Gv(h),hh),this.ec=new Map,this.nc=new Set,this.sc=new br(Ye.comparator),this.ic=new Map,this.rc=new qm,this.oc={},this.uc=new Map,this.cc=Uc.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function Yw(n,e){return u_.apply(this,arguments)}function u_(){return u_=(0,be.Z)(function*(n,e){const t=g_(n);let r,i;const a=t.tc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const l=yield wp(t.localStore,Ds(e));t.isPrimaryClient&&kw(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield l_(t,e,r,"current"===h)}return i}),u_.apply(this,arguments)}function l_(n,e,t,r){return Qw.apply(this,arguments)}function Qw(){return Qw=(0,be.Z)(function*(n,e,t,r){n.hc=(D,S,N)=>{return(V=(0,be.Z)(function*(Q,Ee,xe,yt){let vt=Ee.view.Ku(xe);vt.Oi&&(vt=yield Ep(Q.localStore,Ee.query,!1).then(({documents:jt})=>Ee.view.Ku(jt,vt)));const It=yt&&yt.targetChanges.get(Ee.targetId),_t=Ee.view.applyChanges(vt,Q.isPrimaryClient,It);return Mb(Q,Ee.targetId,_t.zu),_t.snapshot}),function(Q,Ee,xe,yt){return V.apply(this,arguments)})(n,D,S,N);var V};const i=yield Ep(n.localStore,e,!0),a=new Zw(e,i.ji),l=a.Ku(i.documents),h=Am.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=a.applyChanges(l,n.isPrimaryClient,h);Mb(n,t,g.zu);const v=new yA(e,t,a);return n.tc.set(e,v),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),g.snapshot}),Qw.apply(this,arguments)}function Sb(n,e){return c_.apply(this,arguments)}function c_(){return c_=(0,be.Z)(function*(n,e){const t=Qe(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(a=>!hh(a,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Hc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Nh(t.remoteStore,r.targetId),Ap(t,r.targetId)}).catch(il))):(Ap(t,r.targetId),yield Hc(t.localStore,r.targetId,!0))}),c_.apply(this,arguments)}function Lh(){return Lh=(0,be.Z)(function*(n,e,t){const r=m_(n);try{const i=yield function(a,l){const h=Qe(a),g=Kn.now(),v=l.reduce((N,V)=>N.add(V.key),qt());let D,S;return h.persistence.runTransaction("Locally write mutations","readwrite",N=>{let V=es(),Q=qt();return h.Ui.getEntries(N,v).next(Ee=>{V=Ee,V.forEach((xe,yt)=>{yt.isValidDocument()||(Q=Q.add(xe))})}).next(()=>h.localDocuments.getOverlayedDocuments(N,V)).next(Ee=>{D=Ee;const xe=[];for(const yt of l){const vt=lC(yt,D.get(yt.key).overlayedDocument);null!=vt&&xe.push(new cu(yt.key,vt,Uv(vt.value.mapValue),yr.exists(!0)))}return h.mutationQueue.addMutationBatch(N,g,xe,l)}).next(Ee=>{S=Ee;const xe=Ee.applyToLocalDocumentSet(D,Q);return h.documentOverlayCache.saveOverlays(N,Ee.batchId,xe)})}).then(()=>({batchId:S.batchId,changes:Xv(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let g=a.oc[a.currentUser.toKey()];g||(g=new br(Wt)),g=g.insert(l,h),a.oc[a.currentUser.toKey()]=g}(r,i.batchId,t),yield io(r,i.changes),yield Dp(r.remoteStore)}catch(i){const a=zc(i,"Failed to persist write");t.reject(a)}}),Lh.apply(this,arguments)}function Jw(n,e){return Xw.apply(this,arguments)}function Xw(){return Xw=(0,be.Z)(function*(n,e){const t=Qe(n);try{const r=yield nb(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.ic.get(a);l&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Xu=!0:i.modifiedDocuments.size>0?Tt(l.Xu):i.removedDocuments.size>0&&(Tt(l.Xu),l.Xu=!1))}),yield io(t,r,e)}catch(r){yield il(r)}}),Xw.apply(this,arguments)}function e0(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((a,l)=>{const h=l.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=Qe(a);h.onlineState=l;let g=!1;h.queries.forEach((v,D)=>{for(const S of D.listeners)S.Eu(l)&&(g=!0)}),g&&qw(h)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ab(n,e,t){return t0.apply(this,arguments)}function t0(){return t0=(0,be.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),a=i&&i.key;if(a){let l=new br(Ye.comparator);l=l.insert(a,Nn.newNoDocument(a,Nt.min()));const h=qt().add(a),g=new Sm(Nt.min(),new Map,new wn(Wt),l,h);yield Jw(r,g),r.sc=r.sc.remove(a),r.ic.delete(e),s0(r)}else yield Hc(r.localStore,e,!1).then(()=>Ap(r,e,t)).catch(il)}),t0.apply(this,arguments)}function vA(n,e){return xb.apply(this,arguments)}function xb(){return xb=(0,be.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=yield bw(t.localStore,e);Rb(t,r,null),r0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield io(t,i)}catch(i){yield il(i)}}),xb.apply(this,arguments)}function CM(n,e,t){return h_.apply(this,arguments)}function h_(){return h_=(0,be.Z)(function*(n,e,t){const r=Qe(n);try{const i=yield function(a,l){const h=Qe(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return h.mutationQueue.lookupMutationBatch(g,l).next(D=>(Tt(null!==D),v=D.keys(),h.mutationQueue.removeMutationBatch(g,D))).next(()=>h.mutationQueue.performConsistencyCheck(g)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(g,v,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>h.localDocuments.getDocuments(g,v))})}(r.localStore,e);Rb(r,e,t),r0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield io(r,i)}catch(i){yield il(i)}}),h_.apply(this,arguments)}function n0(){return n0=(0,be.Z)(function*(n,e){const t=Qe(n);_a(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Qe(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=zc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),n0.apply(this,arguments)}function r0(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function Rb(n,e,t){const r=Qe(n);let i=r.oc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Ap(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||EA(n,r)})}function EA(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(Nh(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),s0(n))}function Mb(n,e,t){for(const r of t)r instanceof Kw?(n.rc.addReference(r.key,e),bM(n,r)):r instanceof _A?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||EA(n,r.key)):ot()}function bM(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.nc.add(r),s0(n))}function s0(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Ye(nn.fromString(e)),r=n.cc.next();n.ic.set(r,new Tb(t)),n.sc=n.sc.insert(t,r),kw(n.remoteStore,new gl(Ds(dh(t.path)),r,2,Ui.ot))}}function io(n,e,t){return o0.apply(this,arguments)}function o0(){return o0=(0,be.Z)(function*(n,e,t){const r=Qe(n),i=[],a=[],l=[];var h;r.tc.isEmpty()||(r.tc.forEach((h,g)=>{l.push(r.hc(g,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v.fromCache?"not-current":"current"),i.push(v);const D=Ew.Vi(g.targetId,v);a.push(D)}}))}),yield Promise.all(l),r.Zu.Go(i),yield(h=(0,be.Z)(function*(g,v){const D=Qe(g);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>he.forEach(v,N=>he.forEach(N.Pi,V=>D.persistence.referenceDelegate.addReference(S,N.targetId,V)).next(()=>he.forEach(N.vi,V=>D.persistence.referenceDelegate.removeReference(S,N.targetId,V)))))}catch(S){if(!sl(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const N=S.targetId;if(!S.fromCache){const V=D.$i.get(N),Ee=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);D.$i=D.$i.insert(N,Ee)}}}),function(g,v){return h.apply(this,arguments)})(r.localStore,a))}),o0.apply(this,arguments)}function IA(n,e){return f_.apply(this,arguments)}function f_(){return f_=(0,be.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield $c(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(l=>{l.forEach(h=>{h.reject(new Fe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield io(t,r.Ki)}var i}),f_.apply(this,arguments)}function Kc(n,e){const t=Qe(n),r=t.ic.get(e);if(r&&r.Xu)return qt().add(r.key);{let i=qt();const a=t.ec.get(e);if(!a)return i;for(const l of a){const h=t.tc.get(l);i=i.unionWith(h.view.qu)}return i}}function Nb(n,e){return xp.apply(this,arguments)}function xp(){return xp=(0,be.Z)(function*(n,e){const t=Qe(n),r=yield Ep(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&Mb(t,e.targetId,i.zu),i}),xp.apply(this,arguments)}function a0(n,e){return u0.apply(this,arguments)}function u0(){return u0=(0,be.Z)(function*(n,e){const t=Qe(n);return rb(t.localStore,e).then(r=>io(t,r))}),u0.apply(this,arguments)}function l0(n,e,t,r){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,be.Z)(function*(n,e,t,r){const i=Qe(n),a=yield function(l,h){const g=Qe(l),v=Qe(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",D=>v.yn(D,h).next(S=>S?g.localDocuments.getDocuments(D,S):he.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Dp(i.remoteStore):"acknowledged"===t||"rejected"===t?(Rb(i,e,r||null),r0(i,e),h=e,Qe(Qe(i.localStore).mutationQueue).In(h)):ot(),yield io(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),Rp.apply(this,arguments)}function Pb(){return Pb=(0,be.Z)(function*(n,e){const t=Qe(n);if(g_(t),m_(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield CA(t,r.toArray());t.ac=!0,yield Tp(t.remoteStore,!0);for(const a of i)kw(t.remoteStore,a)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Ap(t,l),Hc(t.localStore,l,!0))),Nh(t.remoteStore,l)}),yield i,yield CA(t,r),function(a){const l=Qe(a);l.ic.forEach((h,g)=>{Nh(l.remoteStore,g)}),l.rc.cs(),l.ic=new Map,l.sc=new br(Ye.comparator)}(t),t.ac=!1,yield Tp(t.remoteStore,!1)}}),Pb.apply(this,arguments)}function CA(n,e,t){return kb.apply(this,arguments)}function kb(){return kb=(0,be.Z)(function*(n,e,t){const r=Qe(n),i=[],a=[];for(const l of e){let h;const g=r.ec.get(l);if(g&&0!==g.length){h=yield wp(r.localStore,Ds(g[0]));for(const v of g){const D=r.tc.get(v),S=yield Nb(r,D);S.snapshot&&a.push(S.snapshot)}}else{const v=yield Gc(r.localStore,l);h=yield wp(r.localStore,v),yield l_(r,bA(v),l,!1)}i.push(h)}return r.Zu.Go(a),i}),kb.apply(this,arguments)}function bA(n){return nC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Ob(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).Ri()}function DA(n,e,t,r){return c0.apply(this,arguments)}function c0(){return c0=(0,be.Z)(function*(n,e,t,r){const i=Qe(n);if(i.ac)return void Be("SyncEngine","Ignoring unexpected query state notification.");const a=i.ec.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield rb(i.localStore,Wv(a[0])),h=Sm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield io(i,l,h);break}case"rejected":yield Hc(i.localStore,e,!0),Ap(i,e,r);break;default:ot()}}),c0.apply(this,arguments)}function TA(n,e,t){return d0.apply(this,arguments)}function d0(){return d0=(0,be.Z)(function*(n,e,t){const r=g_(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield Gc(r.localStore,i),l=yield wp(r.localStore,a);yield l_(r,bA(a),l.targetId,!1),kw(r.remoteStore,l)}for(const i of t)r.ec.has(i)&&(yield Hc(r.localStore,i,!1).then(()=>{Nh(r.remoteStore,i),Ap(r,i)}).catch(il))}}),d0.apply(this,arguments)}function g_(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kc.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ab.bind(null,e),e.Zu.Go=zw.bind(null,e.eventManager),e.Zu.lc=gu.bind(null,e.eventManager),e}function m_(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CM.bind(null,e),e}class Fb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.wt=Cp(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return tb(this.persistence,new Iw,e.initialUser,this.wt)}_c(e){return new jc(Km.Ms,this.wt)}dc(e){return new ub}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ub extends Fb{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield m_(r.yc.syncEngine),yield Dp(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return tb(this.persistence,new Iw,e.initialUser,this.wt)}mc(e,t){return new pM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new WI(t,this.persistence);return new GI(e.asyncQueue,r)}_c(e){const t=yp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?wi.withCacheSize(this.cacheSizeBytes):wi.DEFAULT;return new Ym(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Nw(),t_(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new ub}}class Vb extends Ub{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof Mw&&(r.sharedClientState.syncEngine={kr:l0.bind(null,i),Or:DA.bind(null,i),Mr:TA.bind(null,i),Ri:Ob.bind(null,i),Nr:a0.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var a=(0,be.Z)(function*(l){yield function p_(n,e){return Pb.apply(this,arguments)}(r.yc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}dc(e){const t=Nw();if(!Mw.V(t))throw new Fe(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=yp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mw(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Mp{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>e0(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=IA.bind(null,r.syncEngine),yield Tp(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ib}createDatastore(e){const t=Cp(e.databaseInfo.databaseId),r=new fb(e.databaseInfo);return new yM(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>e0(this.syncEngine,h,0),l=cb.V()?new cb:new lb,new wM(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,g,v){const D=new IM(r,i,a,l,h,g);return v&&(D.ac=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=Qe(t);Be("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield bp(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function SA(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Np{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class h0{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new ir,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,be.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new gA(JSON.parse(a),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,be.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class AA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(a,l){const h=Qe(a),g=Eh(h.wt)+"/documents",v={documents:l.map(V=>wh(h.wt,V))},D=yield h.ao("BatchGetDocuments",g,v,l.length),S=new Map;D.forEach(V=>{const Q=function CC(n,e){return"found"in e?function(t,r){Tt(!!r.found);const i=ga(t,r.found.name),a=ni(r.found.updateTime),l=new di({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const i=ga(t,r.missing),a=ni(r.readTime);return Nn.newNoDocument(i,a)}(n,e):ot()}(h.wt,V);S.set(Q.key.toString(),Q)});const N=[];return l.forEach(V=>{const Q=S.get(V.toString());Tt(!!Q),N.push(Q)}),N}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new yh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ye.fromPath(i);e.mutations.push(new Qv(a,e.precondition(a)))}),yield(r=(0,be.Z)(function*(i,a){const l=Qe(i),h=Eh(l.wt)+"/documents",g={writes:a.map(v=>pp(l.wt,v))};yield l.ro("Commit",h,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ot();t=Nt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?yr.updateTime(t):yr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nt.min()))throw new Fe(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yr.updateTime(t)}return yr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xA{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new pb(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,be.Z)(function*(){const t=new AA(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Nc(a)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!uh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Jv(t)}return!1}}class DM{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Jr.UNAUTHENTICATED,this.clientId=HI.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,be.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=zc(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function RA(n,e){return f0.apply(this,arguments)}function f0(){return f0=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(a){r.isEqual(a)||(yield $c(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),f0.apply(this,arguments)}function Bb(n,e){return p0.apply(this,arguments)}function p0(){return p0=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield jb(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>ts(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>ts(e.remoteStore,a)),n.onlineComponents=e}),p0.apply(this,arguments)}function jb(n){return $b.apply(this,arguments)}function $b(){return $b=(0,be.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield RA(n,new Fb)),n.offlineComponents}),$b.apply(this,arguments)}function g0(n){return Hb.apply(this,arguments)}function Hb(){return Hb=(0,be.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield Bb(n,new Mp)),n.onlineComponents}),Hb.apply(this,arguments)}function MA(n){return jb(n).then(e=>e.persistence)}function m0(n){return jb(n).then(e=>e.localStore)}function NA(n){return g0(n).then(e=>e.remoteStore)}function Gb(n){return g0(n).then(e=>e.syncEngine)}function Pp(n){return Wb.apply(this,arguments)}function Wb(){return Wb=(0,be.Z)(function*(n){const e=yield g0(n),t=e.eventManager;return t.onListen=Yw.bind(null,e.syncEngine),t.onUnlisten=Sb.bind(null,e.syncEngine),t}),Wb.apply(this,arguments)}function o(n,e,t={}){const r=new ir;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,a,l,h,g){const v=new Np({next:S=>{a.enqueueAndForget(()=>va(i,D));const N=S.docs.has(l);!N&&S.fromCache?g.reject(new Fe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&h&&"server"===h.source?g.reject(new Fe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),D=new Cb(dh(l.path),v,{includeMetadataChanges:!0,Du:!0});return Ww(i,D)}(yield Pp(n),n.asyncQueue,e,t,r)})),r.promise}function c(n,e,t={}){const r=new ir;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,a,l,h,g){const v=new Np({next:S=>{a.enqueueAndForget(()=>va(i,D)),S.fromCache&&"server"===h.source?g.reject(new Fe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),D=new Cb(l,v,{includeMetadataChanges:!0,Du:!0});return Ww(i,D)}(yield Pp(n),n.asyncQueue,e,t,r)})),r.promise}const C=new Map;function A(n,e,t){if(!t)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function M(n,e,t,r){if(!0===e&&!0===r)throw new Fe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function F(n){if(!Ye.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Y(n){if(Ye.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function re(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ot()}function le(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=re(n);throw new Fe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $e(n,e){if(e<=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Je{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,M("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class st{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Je({}),this._settingsFrozen=!1,e instanceof au?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Fe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(i.options.projectId)}(e))}get app(){if(!this._app)throw new Fe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Je(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new LI;switch(t.type){case"gapi":const r=t.client;return Tt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new BI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Fe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=C.get(e);t&&(Be("ComponentProvider","Removing Datastore"),C.delete(e),t.terminate())}(this),Promise.resolve()}}class De{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ut(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new De(this.firestore,e,this._key)}}class at{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new at(this.firestore,e,this._query)}}class Ut extends at{constructor(e,t,r){super(e,t,dh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new De(this.firestore,null,new Ye(e))}withConverter(e){return new Ut(this.firestore,e,this._path)}}function Un(n,e,...t){if(n=(0,k.m9)(n),A("collection","path",e),n instanceof st){const r=nn.fromString(e,...t);return Y(r),new Ut(n,null,r)}{if(!(n instanceof De||n instanceof Ut))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return Y(r),new Ut(n.firestore,null,r)}}function Fh(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=HI.I()),A("doc","path",e),n instanceof st){const r=nn.fromString(e,...t);return F(r),new De(n,null,new Ye(r))}{if(!(n instanceof De||n instanceof Ut))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return F(r),new De(n.firestore,n instanceof Ut?n.converter:null,new Ye(r))}}function __(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof De||n instanceof Ut)&&(e instanceof De||e instanceof Ut)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function y_(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof at&&e instanceof at&&n.firestore===e.firestore&&hh(n._query,e._query)&&n.converter===e.converter}class _0{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new pb(this,"async_queue_retry"),this.Kc=()=>{const t=t_();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=t_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=t_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new ir;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,be.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!sl(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,pn("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=o_.createAndSchedule(this,e,t,r,a=>this.Wc(a));return this.$c.push(i),i}Gc(){this.Bc&&ot()}verifyOperationInProgress(){}zc(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function kp(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class y0{constructor(){this._progressObserver={},this._taskCompletionResolver=new ir,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Vn extends st{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new _0,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||AM(this),this._firestoreClient.terminate()}}function ri(n){return n._firestoreClient||AM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function AM(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ZI(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new DM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function xM(n,e,t){const r=new ir;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield RA(n,t),yield Bb(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===pe.FAILED_PRECONDITION||l.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function RM(n){if(n._initialized||n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Yc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _l{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _l(Gr.fromBase64String(e))}catch(t){throw new Fe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _l(Gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Op{constructor(e){this._methodName=e}}class qb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const t1=/^__.*__$/;class n1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new cu(e,this.data,this.fieldMask,t,this.fieldTransforms):new mh(e,this.data,t,this.fieldTransforms)}}class MM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class Kb{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Kb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Qb(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(NM(this.Zc)&&t1.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class r1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||Cp(e)}aa(e,t,r,i=!1){return new Kb({Zc:e,methodName:t,ca:r,path:Zn.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Lp(n){const e=n._freezeSettings(),t=Cp(n._databaseId);return new r1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Zb(n,e,t,r,i,a={}){const l=n.aa(a.merge||a.mergeFields?2:0,e,t,i);LA("Data must be an object, but it was:",l,r);const h=OM(r,l);let g,v;if(a.merge)g=new Ji(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const N=FA(e,S,t);if(!l.contains(N))throw new Fe(pe.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);FM(D,N)||D.push(N)}g=new Ji(D),v=l.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,v=l.fieldTransforms;return new n1(new di(h),g,v)}class w0 extends Op{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof w0}}function PM(n,e,t){return new Kb({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class PA extends Op{_toFieldTransform(e){return new fl(e.path,new Rc)}isEqual(e){return e instanceof PA}}class i1 extends Op{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=PM(this,e,!0),r=this.ha.map(a=>Fp(a,t)),i=new fh(r);return new fl(e.path,i)}isEqual(e){return this===e}}class s1 extends Op{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=PM(this,e,!0),r=this.ha.map(a=>Fp(a,t)),i=new Mc(r);return new fl(e.path,i)}isEqual(e){return this===e}}class o1 extends Op{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new ph(e.wt,xc(e.wt,this.la));return new fl(e.path,t)}isEqual(e){return this===e}}function kA(n,e,t,r){const i=n.aa(1,e,t);LA("Data must be an object, but it was:",i,r);const a=[],l=di.empty();ol(r,(g,v)=>{const D=Yb(e,g,t);v=(0,k.m9)(v);const S=i.ia(D);if(v instanceof w0)a.push(D);else{const N=Fp(v,S);null!=N&&(a.push(D),l.set(D,N))}});const h=new Ji(a);return new MM(l,h,i.fieldTransforms)}function OA(n,e,t,r,i,a){const l=n.aa(1,e,t),h=[FA(e,r,t)],g=[i];if(a.length%2!=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)h.push(FA(e,a[N])),g.push(a[N+1]);const v=[],D=di.empty();for(let N=h.length-1;N>=0;--N)if(!FM(v,h[N])){const V=h[N];let Q=g[N];Q=(0,k.m9)(Q);const Ee=l.ia(V);if(Q instanceof w0)v.push(V);else{const xe=Fp(Q,Ee);null!=xe&&(v.push(V),D.set(V,xe))}}const S=new Ji(v);return new MM(D,S,l.fieldTransforms)}function kM(n,e,t,r=!1){return Fp(t,n.aa(r?4:3,e))}function Fp(n,e){if(LM(n=(0,k.m9)(n)))return LA("Unsupported field value:",e,n),OM(n,e);if(n instanceof Op)return function(t,r){if(!NM(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Fp(l,r.ra(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xc(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Kn.fromDate(t);return{timestampValue:fp(r.wt,i)}}if(t instanceof Kn){const i=new Kn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:fp(r.wt,i)}}if(t instanceof qb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _l)return{bytesValue:nw(r.wt,t._byteString)};if(t instanceof De){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.oa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pl(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${re(t)}`)}(n,e)}function OM(n,e){const t={};return Pv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ol(n,(r,i)=>{const a=Fp(i,e.ea(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function LM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Kn||n instanceof qb||n instanceof _l||n instanceof De||n instanceof Op)}function LA(n,e,t){if(!LM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=re(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function FA(n,e,t){if((e=(0,k.m9)(e))instanceof Yc)return e._internalPath;if("string"==typeof e)return Yb(n,e);throw Qb("Field path arguments must be of type string or ",n,!1,void 0,t)}const a1=new RegExp("[~\\*/\\[\\]]");function Yb(n,e,t){if(e.search(a1)>=0)throw Qb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yc(...e.split("."))._internalPath}catch{throw Qb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qb(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(a||l)&&(g+=" (found",a&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new Fe(pe.INVALID_ARGUMENT,h+n+g)}function FM(n,e){return n.some(t=>t.isEqual(e))}class E0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new De(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new u1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class u1 extends E0{data(){return super.data()}}function Jb(n,e){return"string"==typeof e?Yb(n,e):e instanceof Yc?e._internalPath:e._delegate._internalPath}class Up{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qc extends E0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new I0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Jb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class I0 extends Qc{data(e={}){return super.data(e)}}class Uh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Up(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new I0(this._firestore,this._userDataWriter,r.key,r,new Up(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new I0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Up(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new I0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Up(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==l.type&&(g=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:l1(l.type),doc:h,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function l1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function UM(n,e){return n instanceof Qc&&e instanceof Qc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Uh&&e instanceof Uh&&n._firestore===e._firestore&&y_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function VM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class C0{}function Vh(n,...e){for(const t of e)n=t._apply(n);return n}class c1 extends C0{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Lp(e.firestore),r=function(i,a,l,h,g,v,D){let S;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){WM(D,v);const V=[];for(const Q of D)V.push(GM(h,i,Q));S={arrayValue:{values:V}}}else S=GM(h,i,D)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||WM(D,v),S=kM(l,"where",D,"in"===v||"not-in"===v);const N=ti.create(g,v,S);return function(V,Q){if(Q.ht()){const xe=Em(V);if(null!==xe&&!xe.isEqual(Q.field))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${xe.toString()}' and '${Q.field.toString()}'`);const yt=$v(V);null!==yt&&zM(0,Q.field,yt)}const Ee=function(xe,yt){for(const vt of xe.filters)if(yt.indexOf(vt.op)>=0)return vt.op;return null}(V,function(xe){switch(xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Q.op));if(null!==Ee)throw new Fe(pe.INVALID_ARGUMENT,Ee===Q.op?`Invalid query. You cannot use more than one '${Q.op.toString()}' filter.`:`Invalid query. You cannot use '${Q.op.toString()}' filters with '${Ee.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new at(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new lu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class h1 extends C0{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ch(i,a);return function(h,g){if(null===$v(h)){const v=Em(h);null!==v&&zM(0,v,g.field)}}(r,l),l}(e._query,this.fa,this.wa);return new at(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new lu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class BM extends C0{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new at(e.firestore,e.converter,Hv(e._query,this.ma,this.ga))}}class jM extends C0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=HM(e,this.type,this.ya,this.pa);return new at(e.firestore,e.converter,(i=t,new lu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class $M extends C0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=HM(e,this.type,this.ya,this.pa);return new at(e.firestore,e.converter,(i=t,new lu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function HM(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof E0)return function(i,a,l,h,g){if(!h)throw new Fe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const D of Sc(i))if(D.field.isKeyField())v.push(Tc(a,h.key));else{const S=h.data.field(D.field);if(ll(S))throw new Fe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=D.field.canonicalString();throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}v.push(S)}return new hl(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Lp(n.firestore);return function(a,l,h,g,v,D){const S=a.explicitOrderBy;if(v.length>S.length)throw new Fe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let V=0;V<v.length;V++){const Q=v[V];if(S[V].field.isKeyField()){if("string"!=typeof Q)throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof Q}`);if(!Im(a)&&-1!==Q.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${Q}' contains a slash.`);const Ee=a.path.child(nn.fromString(Q));if(!Ye.isDocumentKey(Ee))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${Ee}' is not because it contains an odd number of segments.`);const xe=new Ye(Ee);N.push(Tc(l,xe))}else{const Ee=kM(h,g,Q);N.push(Ee)}}return new hl(N,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function GM(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Im(e)&&-1!==t.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nn.fromString(t));if(!Ye.isDocumentKey(r))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tc(n,new Ye(r))}if(t instanceof De)return Tc(n,t._key);throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${re(t)}.`)}function WM(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function zM(n,e,t){if(!t.isEqual(e))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const w1={maxAttempts:5};class UA{convertValue(e,t="none"){switch(bc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ul(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ot()}}convertObject(e,t){const r={};return ol(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new qb(sr(e.latitude),sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=KI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ep(e));default:return null}}convertTimestamp(e){const t=al(e);return new Kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nn.fromString(e);Tt(sw(r));const i=new au(r.get(1),r.get(3)),a=new Ye(r.popFirst(5));return i.isEqual(t)||pn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Xb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class E1 extends UA{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new De(this.firestore,null,t)}}class qM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lp(e)}set(e,t,r){this._verifyNotCommitted();const i=Bh(e,this._firestore),a=Xb(i.converter,t,r),l=Zb(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,yr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Bh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Yc?OA(this._dataReader,"WriteBatch.update",a._key,t,r,i):kA(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bh(e,this._firestore);return this._mutations=this._mutations.concat(new yh(t._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bh(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Fe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Vp extends UA{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new De(this.firestore,null,t)}}function KM(n,e,t){n=le(n,De);const r=le(n.firestore,Vn),i=Xb(n.converter,e,t);return v_(r,[Zb(Lp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,yr.none())])}function ZM(n,e,t,...r){n=le(n,De);const i=le(n.firestore,Vn),a=Lp(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof Yc?OA(a,"updateDoc",n._key,e,t,r):kA(a,"updateDoc",n._key,e),v_(i,[l.toMutation(n._key,yr.exists(!0))])}function YM(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||kp(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(kp(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let g,v,D;if(n instanceof De)v=le(n.firestore,Vn),D=dh(n._key.path),g={next:S=>{e[l]&&e[l](VA(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=le(n,at);v=le(S.firestore,Vn),D=S._query;const N=new Vp(v);g={next:V=>{e[l]&&e[l](new Uh(v,N,S,V))},error:e[l+1],complete:e[l+2]},VM(n._query)}return function(S,N,V,Q){const Ee=new Np(Q),xe=new Cb(N,Ee,V);return S.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Ww(yield Pp(S),xe)})),()=>{Ee.Tc(),S.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return va(yield Pp(S),xe)}))}}(ri(v),D,h,g)}function v_(n,e){return function(t,r){const i=new ir;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function d_(n,e,t){return Lh.apply(this,arguments)}(yield Gb(t),r,i)})),i.promise}(ri(n),e)}function VA(n,e,t){const r=t.docs.get(e._key),i=new Vp(n);return new Qc(n,i,e._key,r,new Up(t.hasPendingWrites,t.fromCache),e.converter)}class M1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Lp(e)}get(e){const t=Bh(e,this._firestore),r=new E1(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ot();const a=i[0];if(a.isFoundDocument())return new E0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new E0(this._firestore,r,t._key,null,t.converter);throw ot()})}set(e,t,r){const i=Bh(e,this._firestore),a=Xb(i.converter,t,r),l=Zb(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Bh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof Yc?OA(this._dataReader,"Transaction.update",a._key,t,r,i):kA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Bh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bh(e,this._firestore),r=new Vp(this._firestore);return super.get(e).then(i=>new Qc(this._firestore,r,t._key,i._document,new Up(!1,!1),t.converter))}}function BA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function JM(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function XM(){if(!function mS(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Fi=Pi.SDK_VERSION,(0,Pi._registerComponent)(new Es.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new Vn(i,new UI(t.getProvider("auth-internal")),new jI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Pi.registerVersion)(cm,"3.4.13",n),(0,Pi.registerVersion)(cm,"3.4.13","esm2017")}();class b0{constructor(e){this._delegate=e}static fromBase64String(e){return XM(),new b0(_l.fromBase64String(e))}static fromUint8Array(e){return JM(),new b0(_l.fromUint8Array(e))}toBase64(){return XM(),this._delegate.toBase64()}toUint8Array(){return JM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jA(n){return function B1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class j1{enableIndexedDbPersistence(e,t){return function qO(n,e){RM(n=le(n,Vn));const t=ri(n),r=n._freezeSettings(),i=new Mp;return xM(t,i,new Ub(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function KO(n){RM(n=le(n,Vn));const e=ri(n),t=n._freezeSettings(),r=new Mp;return xM(e,r,new Vb(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ZO(n){if(n._initialized&&!n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ir;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!No.V())return Promise.resolve();const i=r+"main";yield No.delete(i)}),function(r){return t.apply(this,arguments)})(yp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class eN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof au||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ec("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function xt(n,e,t,r={}){var i;const a=(n=le(n,st))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Ec("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Jr.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Fe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Jr(g)}n._authCredentials=new FI(new Ic(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function QO(n){return function TM(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield MA(n),t=yield NA(n);return e.setNetworkEnabled(!0),function(r){const i=Qe(r);return i.lu.delete(0),n_(i)}(t)}))}(ri(n=le(n,Vn)))}(this._delegate)}disableNetwork(){return function JO(n){return function SM(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield MA(n),t=yield NA(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const a=Qe(i);a.lu.add(0),yield bp(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ri(n=le(n,Vn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,M("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function YO(n){return function(e){const t=new ir;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function wA(n,e){return n0.apply(this,arguments)}(yield Gb(e),t)})),t.promise}(ri(n=le(n,Vn)))}(this._delegate)}onSnapshotsInSync(e){return function R1(n,e){return function d(n,e){const t=new Np(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield Pp(n),i=t,Qe(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield Pp(n),i=t,void Qe(r).Tu.delete(i);var r,i}))}}(ri(n=le(n,Vn)),kp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new w_(this,Un(this._delegate,e))}catch(t){throw Ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new wa(this,Fh(this._delegate,e))}catch(t){throw Ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ss(this,function Zc(n,e){if(n=le(n,st),A("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new at(n,null,(t=e,new lu(nn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function N1(n,e,t){n=le(n,Vn);const r=Object.assign(Object.assign({},w1),t);return function(i){if(i.maxAttempts<1)throw new Fe(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function f(n,e,t){const r=new ir;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const i=yield(a=n,g0(a).then(l=>l.datastore));var a;new xA(n.asyncQueue,i,t,e,r).run()})),r.promise}(ri(n),i=>e(new M1(n,i)),r)}(this._delegate,t=>e(new tN(this,t)))}batch(){return ri(this._delegate),new nN(new qM(this._delegate,e=>v_(this._delegate,e)))}loadBundle(e){return function XO(n,e){const t=ri(n=le(n,Vn)),r=new y0;return function y(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,g=function(g,v){if(g instanceof Uint8Array)return SA(g,v);if(g instanceof ArrayBuffer)return SA(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new h0(g,l);var g}(t,Cp(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function Lb(n,e,t){const r=Qe(n);var i;(i=(0,be.Z)(function*(a,l,h){try{const g=yield l.getMetadata();if(yield function(N,V){const Q=Qe(N),Ee=ni(V.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",xe=>Q.Ds.getBundleMetadata(xe,V.id)).then(xe=>!!xe&&xe.createTime.compareTo(Ee)>=0)}(a.localStore,g))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(N=g).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);h._updateProgress(Db(g));const v=new mA(g,a.localStore,l.wt);let D=yield l.fc();for(;D;){const N=yield v.Nu(D);N&&h._updateProgress(N),D=yield l.fc()}const S=yield v.complete();return yield io(a,S.Mu,void 0),yield function(N,V){const Q=Qe(N);return Q.persistence.runTransaction("Save bundle","readwrite",Ee=>Q.Ds.saveBundleMetadata(Ee,V))}(a.localStore,g),h._completeWith(S.progress),Promise.resolve(S.Ou)}catch(g){return Ec("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var N}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Gb(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function e1(n,e){return function E(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const i=Qe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ds.getNamedQuery(a,r))}(yield m0(n),e)}))}(ri(n=le(n,Vn)),e).then(t=>t?new at(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ss(this,t):null)}}class eD extends UA{constructor(e){super(),this.firestore=e}convertBytes(e){return new b0(new _l(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wa.forKey(t,this.firestore,null)}}class tN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new eD(e)}get(e){const t=jp(e);return this._delegate.get(t).then(r=>new D0(this._firestore,new Qc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=jp(e);return r?(BA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=jp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=jp(e);return this._delegate.delete(t),this}}class nN{constructor(e){this._delegate=e}set(e,t,r){const i=jp(e);return r?(BA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=jp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=jp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new I0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new T0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Bp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Bp(e,new eD(e),t),i.set(t,a)),a}}Bp.INSTANCES=new WeakMap;class wa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new eD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wa(t,new De(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new wa(t,new De(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new w_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new w_(this.firestore,Un(this._delegate,e))}catch(t){throw Ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof De&&__(this._delegate,e)}set(e,t){t=BA("DocumentReference.set",t);try{return t?KM(this._delegate,e,t):KM(this._delegate,e)}catch(r){throw Ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ZM(this._delegate,e):ZM(this._delegate,e,t,...r)}catch(i){throw Ts(i,"updateDoc()","DocumentReference.update()")}}delete(){return function A1(n){return v_(le(n.firestore,Vn),[new yh(n._key,yr.none())])}(this._delegate)}onSnapshot(...e){const t=rN(e),r=iN(e,i=>new D0(this.firestore,new Qc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return YM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function C1(n){n=le(n,De);const e=le(n.firestore,Vn),t=ri(e),r=new Vp(e);return function s(n,e){const t=new ir;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,a,l){try{const h=yield function(g,v){const D=Qe(g);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,v))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Fe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=zc(h,`Failed to get document '${a} from cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield m0(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Qc(e,r,n._key,i,new Up(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function b1(n){n=le(n,De);const e=le(n.firestore,Vn);return o(ri(e),n._key,{source:"server"}).then(t=>VA(e,n,t))}(this._delegate):function I1(n){n=le(n,De);const e=le(n.firestore,Vn);return o(ri(e),n._key).then(t=>VA(e,n,t))}(this._delegate),t.then(r=>new D0(this.firestore,new Qc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new wa(this.firestore,this._delegate.withConverter(e?Bp.getInstance(this.firestore,e):null))}}function Ts(n,e,t){return n.message=n.message.replace(e,t),n}function rN(n){for(const e of n)if("object"==typeof e&&!jA(e))return e;return{}}function iN(n,e){var t,r;let i;return i=jA(n[0])?n[0]:jA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class D0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return UM(this._delegate,e._delegate)}}class T0 extends D0{data(e){const t=this._delegate.data(e);return function rh(n,e){n||ot()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new eD(e)}where(e,t,r){try{return new Ss(this.firestore,Vh(this._delegate,function d1(n,e,t){const r=e,i=Jb("where",n);return new c1(i,r,t)}(e,t,r)))}catch(i){throw Ts(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,Vh(this._delegate,function f1(n,e="asc"){const t=e,r=Jb("orderBy",n);return new h1(r,t)}(e,t)))}catch(r){throw Ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,Vh(this._delegate,function p1(n){return $e("limit",n),new BM("limit",n,"F")}(e)))}catch(t){throw Ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,Vh(this._delegate,function g1(n){return $e("limitToLast",n),new BM("limitToLast",n,"L")}(e)))}catch(t){throw Ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,Vh(this._delegate,function m1(...n){return new jM("startAt",n,!0)}(...e)))}catch(t){throw Ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,Vh(this._delegate,function _1(...n){return new jM("startAfter",n,!1)}(...e)))}catch(t){throw Ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,Vh(this._delegate,function y1(...n){return new $M("endBefore",n,!1)}(...e)))}catch(t){throw Ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,Vh(this._delegate,function v1(...n){return new $M("endAt",n,!0)}(...e)))}catch(t){throw Ts(t,"endAt()","Query.endAt()")}}isEqual(e){return y_(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function T1(n){n=le(n,at);const e=le(n.firestore,Vn),t=ri(e),r=new Vp(e);return function u(n,e){const t=new ir;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,a,l){try{const h=yield Ep(i,a,!0),g=new Zw(a,h.ji),v=g.Ku(h.documents),D=g.applyChanges(v,!1);l.resolve(D.snapshot)}catch(h){const g=zc(h,`Failed to execute query '${a} against cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield m0(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Uh(e,r,n,i))}(this._delegate):"server"===e?.source?function S1(n){n=le(n,at);const e=le(n.firestore,Vn),t=ri(e),r=new Vp(e);return c(t,n._query,{source:"server"}).then(i=>new Uh(e,r,n,i))}(this._delegate):function D1(n){n=le(n,at);const e=le(n.firestore,Vn),t=ri(e),r=new Vp(e);return VM(n._query),c(t,n._query).then(i=>new Uh(e,r,n,i))}(this._delegate),t.then(r=>new $A(this.firestore,new Uh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=rN(e),r=iN(e,i=>new $A(this.firestore,new Uh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return YM(this._delegate,t,r)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?Bp.getInstance(this.firestore,e):null))}}class H1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new T0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $A{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new T0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new H1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new T0(this._firestore,r))})}isEqual(e){return UM(this._delegate,e._delegate)}}class w_ extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wa(this.firestore,e):null}doc(e){try{return new wa(this.firestore,void 0===e?Fh(this._delegate):Fh(this._delegate,e))}catch(t){throw Ts(t,"doc()","CollectionReference.doc()")}}add(e){return function x1(n,e){const t=le(n.firestore,Vn),r=Fh(n),i=Xb(n.converter,e);return v_(t,[Zb(Lp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,yr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new wa(this.firestore,t))}isEqual(e){return __(this._delegate,e._delegate)}withConverter(e){return new w_(this.firestore,this._delegate.withConverter(e?Bp.getInstance(this.firestore,e):null))}}function jp(n){return le(n,De)}class HA{constructor(...e){this._delegate=new Yc(...e)}static documentId(){return new HA(Zn.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof Yc&&this._delegate._internalPath.isEqual(e._internalPath)}}class $p{constructor(e){this._delegate=e}static serverTimestamp(){const e=function k1(){return new PA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new $p(e)}static delete(){const e=function P1(){return new w0("deleteField")}();return e._methodName="FieldValue.delete",new $p(e)}static arrayUnion(...e){const t=function O1(...n){return new i1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new $p(t)}static arrayRemove(...e){const t=function L1(...n){return new s1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new $p(t)}static increment(e){const t=function F1(n){return new o1("increment",n)}(e);return t._methodName="FieldValue.increment",new $p(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const G1={Firestore:eN,GeoPoint:qb,Timestamp:Kn,Blob:b0,Transaction:tN,WriteBatch:nN,DocumentReference:wa,DocumentSnapshot:D0,Query:Ss,QueryDocumentSnapshot:T0,QuerySnapshot:$A,CollectionReference:w_,FieldPath:HA,FieldValue:$p,setLogLevel:function $1(n){!function wc(n){to.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function z1(n){(function W1(n,e){n.INTERNAL.registerComponent(new Es.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},G1)))})(n,(e,t)=>new eN(e,t,new j1)),n.registerVersion("@firebase/firestore-compat","0.1.22")}(Pg.Z);var GA=L(6451),tD=L(5363),q1=L(6063);class K1 extends oi.x{constructor(e=1/0,t=1/0,r=q1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)h=g;h&&r.splice(0,h+1)}}}var sN=L(3099);function oN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,sN.B)({connector:()=>new K1(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function aN(n,e){return(0,ys.m)(e)?Pn(()=>n,e):Pn(()=>n)}var WA=L(9468);L(5867);const lN=new Map,X1={activated:!1,tokenObservers:[]},eL={initialized:!1,enabled:!1};function Ei(n){return lN.get(n)||X1}function mu(n,e){lN.set(n,e)}function rD(){return eL}class sL{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function oL(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const As=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function dN(n){if(!Ei(n).activated)throw As.create("use-before-activation",{appName:n.name})}function ZA(n,e){return YA.apply(this,arguments)}function YA(){return YA=(0,be.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const V=yield l.getHeartbeatsHeader();V&&(a["X-Firebase-Client"]=V)}const h={method:"POST",body:JSON.stringify(e),headers:a};let g,v;try{g=yield fetch(n,h)}catch(V){throw As.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==g.status)throw As.create("fetch-status-error",{httpStatus:g.status});try{v=yield g.json()}catch(V){throw As.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const D=v.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw As.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(D[1]),N=Date.now();return{token:v.token,expireTimeMillis:N+S,issuedAtTimeMillis:N}}),YA.apply(this,arguments)}function cL(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const S0="firebase-app-check-store";let oD=null;function fN(){return oD||(oD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(As.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(S0,{keyPath:"compositeKey"})}}catch(r){e(As.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),oD)}function QA(){return QA=(0,be.Z)(function*(n,e){const r=(yield fN()).transaction(S0,"readwrite"),a=r.objectStore(S0).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=g=>{l()},r.onerror=g=>{var v;h(As.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})}),QA.apply(this,arguments)}const A0=new Qs.Yd("@firebase/app-check");function _N(n,e){return(0,k.hl)()?function pL(n,e){return function pN(n,e){return QA.apply(this,arguments)}(function mN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{A0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function yN(){return rD().enabled}function vN(){return tx.apply(this,arguments)}function tx(){return tx=(0,be.Z)(function*(){const n=rD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),tx.apply(this,arguments)}const wL={error:"UNKNOWN_ERROR"};function EL(n){return k.US.encodeString(JSON.stringify(n),!1)}function aD(n){return nx.apply(this,arguments)}function nx(){return nx=(0,be.Z)(function*(n,e=!1){const t=n.app;dN(t);const r=Ei(t);let a,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&uD(g)&&(i=g)}if(!e&&i&&uD(i))return{token:i.token};let h,l=!1;if(yN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ZA(cL(t,yield vN()),n.heartbeatServiceProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),l=!0);const g=yield r.exchangeTokenPromise;return yield _N(t,g),mu(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),l=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?A0.warn(g.message):A0.error(g),a=g}return i?(h={token:i.token},mu(t,Object.assign(Object.assign({},r),{token:i})),yield _N(t,i)):h=CL(a),l&&EN(t,h),h}),nx.apply(this,arguments)}function ix(n,e){const t=Ei(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),mu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function wN(n){const{app:e}=n,t=Ei(e);let r=t.tokenRefresher;r||(r=function IL(n){const{app:e}=n;return new sL((0,be.Z)(function*(){let r;if(r=Ei(e).token?yield aD(n,!0):yield aD(n),r.error)throw r.error}),()=>!0,()=>{const t=Ei(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),mu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function EN(n,e){const t=Ei(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function uD(n){return n.expireTimeMillis-Date.now()>0}function CL(n){return{token:EL(wL),error:n}}class bL{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ei(this.app);for(const t of e)ix(this.app,t.next);return Promise.resolve()}}const xN="app-check-internal";!function UL(){(0,Pi._registerComponent)(new Es.wA("app-check",n=>function DL(n,e){return new bL(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xN).initialize()})),(0,Pi._registerComponent)(new Es.wA(xN,n=>function TL(n){return{getToken:e=>aD(n,e),addTokenListener:e=>function rx(n,e,t,r){const{app:i}=n,a=Ei(i),l={next:t,error:r,type:e};if(mu(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&uD(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),wN(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>wN(n))}(n,"INTERNAL",e),removeTokenListener:e=>ix(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Pi.registerVersion)("@firebase/app-check","0.5.12")}();class x0{constructor(){return(0,ln.vb)("app-check")}}typeof window<"u"&&window;var cD=L(127);const lx=new m.OlP("angularfire2.auth.use-emulator"),cx=new m.OlP("angularfire2.auth.settings"),dx=new m.OlP("angularfire2.auth.tenant-id"),hx=new m.OlP("angularfire2.auth.langugage-code"),fx=new m.OlP("angularfire2.auth.use-device-language"),px=new m.OlP("angularfire.auth.persistence"),gx=(n,e,t,r,i,a,l,h)=>(0,Pr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),l)for(const[v,D]of Object.entries(l))g.settings[v]=D;return h&&g.setPersistence(h),g},[t,r,i,a,l,h]);let R0=(()=>{class n{constructor(t,r,i,a,l,h,g,v,D,S,N,V){const Q=new oi.x,Ee=rt(void 0).pipe((0,tD.Q)(l.outsideAngular),Pn(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,5881)))),(0,gt.U)(()=>(0,Pr.on)(t,a,r)),(0,gt.U)(xe=>gx(xe,a,h,v,D,S,g,N)),oN({bufferSize:1,refCount:!1}));if(nf(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{Ee.pipe(_n()).subscribe();const yt=Ee.pipe(Pn(_t=>_t.getRedirectResult().then(jt=>jt,()=>null)),ln.iC,oN({bufferSize:1,refCount:!1})),vt=Ee.pipe(Pn(_t=>new xr.y(jt=>({unsubscribe:a.runOutsideAngular(()=>_t.onAuthStateChanged(sn=>jt.next(sn),sn=>jt.error(sn),()=>jt.complete()))})))),It=Ee.pipe(Pn(_t=>new xr.y(jt=>({unsubscribe:a.runOutsideAngular(()=>_t.onIdTokenChanged(sn=>jt.next(sn),sn=>jt.error(sn),()=>jt.complete()))}))));this.authState=yt.pipe(aN(vt),(0,WA.R)(l.outsideAngular),(0,tD.Q)(l.insideAngular)),this.user=yt.pipe(aN(It),(0,WA.R)(l.outsideAngular),(0,tD.Q)(l.insideAngular)),this.idToken=this.user.pipe(Pn(_t=>_t?(0,dn.D)(_t.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(Pn(_t=>_t?(0,dn.D)(_t.getIdTokenResult()):rt(null))),this.credential=(0,GA.T)(yt,Q,this.authState.pipe(Ki(_t=>!_t))).pipe((0,gt.U)(_t=>_t?.user?_t:null),(0,WA.R)(l.outsideAngular),(0,tD.Q)(l.insideAngular))}return(0,Pr.pX)(this,Ee,a,{spy:{apply:(xe,yt,vt)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&vt.then(It=>Q.next(It))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Pr.Dh),m.LFG(Pr.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ln.HU),m.LFG(lx,8),m.LFG(cx,8),m.LFG(dx,8),m.LFG(hx,8),m.LFG(fx,8),m.LFG(px,8),m.LFG(x0,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GL=(()=>{class n{constructor(){cD.Z.registerVersion("angularfire",ln.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[R0]}),n})();function MN(n,e){return function WL(n,e=Ng.z){return new xr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function mx(n,e){return MN(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function dD(n,e){return mx(n,e).pipe(Hl(void 0),Sy(),(0,gt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const g=i.find(D=>D.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(D=>D.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function NN(n,e,t){return dD(n,t).pipe(qn((r,i)=>function qL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function KL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return _x(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return _x(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _x(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),UE(),(0,gt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function _x(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function PN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class kN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=dD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Hl(void 0),Sy(),Ki(([r,i])=>i.length>0||!r),(0,gt.U)(([r,i])=>i),ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(qn((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=PN(e);return NN(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return mx(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ln.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(ln.iC)}add(e){return this.ref.add(e)}doc(e){return new ON(this.ref.doc(e),this.afs)}}class ON{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=UN(r,t);return new kN(i,a,this.afs)}snapshotChanges(){return function zL(n,e){return MN(n,e).pipe(Hl(void 0),Sy(),(0,gt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,dn.D)(this.ref.get(e)).pipe(ln.iC)}}class ZL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?dD(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ki(t=>t.length>0),ln.iC):dD(this.query,this.afs.schedulers.outsideAngular).pipe(ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(qn((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=PN(e);return NN(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return mx(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ln.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(ln.iC)}}const LN=new m.OlP("angularfire2.enableFirestorePersistence"),FN=new m.OlP("angularfire2.firestore.persistenceSettings"),YL=new m.OlP("angularfire2.firestore.settings"),QL=new m.OlP("angularfire2.firestore.use-emulator");function UN(n,e=(t=>t)){return{query:e(n),ref:n}}let VN=(()=>{class n{constructor(t,r,i,a,l,h,g,v,D,S,N,V,Q,Ee,xe,yt,vt){this.schedulers=g;const It=(0,Pr.on)(t,h,r),_t=D;S&&gx(It,h,N,Q,Ee,xe,V,yt),[this.firestore,this.persistenceEnabled$]=(0,Pr.cc)(`${It.name}.firestore`,"AngularFirestore",It.name,()=>{const jt=h.runOutsideAngular(()=>It.firestore());if(a&&jt.settings(a),_t&&jt.useEmulator(..._t),i&&!nf(l)){const sn=()=>{try{return(0,dn.D)(jt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(ii){return typeof console<"u"&&console.warn(ii),rt(!1)}};return[jt,h.runOutsideAngular(sn)]}return[jt,rt(!1)]},[a,_t,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=UN(i,r),h=this.schedulers.ngZone.run(()=>a);return new kN(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new ZL(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new ON(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Pr.Dh),m.LFG(Pr.xv,8),m.LFG(LN,8),m.LFG(YL,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ln.HU),m.LFG(FN,8),m.LFG(QL,8),m.LFG(R0,8),m.LFG(lx,8),m.LFG(cx,8),m.LFG(dx,8),m.LFG(hx,8),m.LFG(fx,8),m.LFG(px,8),m.LFG(x0,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),JL=(()=>{class n{constructor(){cD.Z.registerVersion("angularfire",ln.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:LN,useValue:!0},{provide:FN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[VN]}),n})(),Hp=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new OT.Q).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(VN),m.LFG(R0),m.LFG(Yr),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),XL=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Hp))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-sign-in"]],decls:29,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Sign In"),m.qZA(),m.TgZ(5,"div",3),m._UZ(6,"input",4,5),m.qZA(),m.TgZ(8,"div",3),m._UZ(9,"input",6,7),m.qZA(),m.TgZ(11,"div",3)(12,"input",8),m.NdJ("click",function(){m.CHM(i);const l=m.MAs(7),h=m.MAs(10);return m.KtG(r.authService.SignIn(l.value,h.value))}),m.qZA()(),m.TgZ(13,"div",3)(14,"span",9)(15,"span",10),m._uU(16,"Or"),m.qZA()()(),m.TgZ(17,"div",3)(18,"button",11),m.NdJ("click",function(){return r.authService.GoogleAuth()}),m._UZ(19,"i",12),m._uU(20," Log in with Google "),m.qZA()(),m.TgZ(21,"div",13)(22,"span",14),m._uU(23,"Forgot Password?"),m.qZA()()(),m.TgZ(24,"div",15)(25,"span"),m._uU(26,"Don't have an account?"),m.TgZ(27,"span",16),m._uU(28," Sign Up"),m.qZA()()()()()}},dependencies:[oc]}),n})(),eF=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Hp))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-sign-up"]],decls:26,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Sign Up"),m.qZA(),m.TgZ(5,"div",3),m._UZ(6,"input",4,5),m.qZA(),m.TgZ(8,"div",3),m._UZ(9,"input",6,7),m.qZA(),m.TgZ(11,"div",3)(12,"input",8),m.NdJ("click",function(){m.CHM(i);const l=m.MAs(7),h=m.MAs(10);return m.KtG(r.authService.SignUp(l.value,h.value))}),m.qZA()(),m.TgZ(13,"div",3)(14,"span",9)(15,"span",10),m._uU(16,"Or"),m.qZA()()(),m.TgZ(17,"div",3)(18,"button",11),m.NdJ("click",function(){return r.authService.GoogleAuth()}),m._UZ(19,"i",12),m._uU(20," Continue with Google "),m.qZA()()(),m.TgZ(21,"div",13)(22,"span"),m._uU(23,"Already have an account? "),m.TgZ(24,"span",14),m._uU(25,"Log In"),m.qZA()()()()()}},dependencies:[oc]}),n})();function tF(n,e){if(1&n&&(m.TgZ(0,"div",4)(1,"div",18)(2,"div",19),m._UZ(3,"img",20),m.TgZ(4,"div",21)(5,"h1"),m._uU(6,"Hello: "),m.TgZ(7,"strong"),m._uU(8),m.qZA()(),m.TgZ(9,"p"),m._uU(10,"User ID: "),m.TgZ(11,"strong"),m._uU(12),m.qZA()(),m.TgZ(13,"p"),m._uU(14,"Email: "),m.TgZ(15,"strong"),m._uU(16),m.qZA()(),m.TgZ(17,"p"),m._uU(18,"Email Verified: "),m.TgZ(19,"strong"),m._uU(20),m.qZA()()()()()()),2&n){const t=e.ngIf;m.xp6(3),m.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",m.LSH),m.s9C("alt",t.displayName),m.xp6(5),m.Oqu(t.displayName?t.displayName:"User"),m.xp6(4),m.Oqu(t.uid),m.xp6(4),m.Oqu(t.email),m.xp6(4),m.Oqu(t.emailVerified)}}let nF=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Hp))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","positronX.io Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(m.TgZ(0,"nav",0)(1,"a",1),m._UZ(2,"img",2),m.qZA()(),m.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),m._UZ(10,"i",10),m._uU(11,"User Profile "),m.qZA()(),m.TgZ(12,"li",8)(13,"a",11),m.NdJ("click",function(){return r.authService.SignOut()}),m._UZ(14,"i",12),m._uU(15,"Log out "),m.qZA()()()()(),m.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),m._uU(20,"User Profile"),m.qZA()(),m.YNc(21,tF,21,6,"div",17),m.qZA()()()()),2&t&&(m.xp6(21),m.Q6J("ngIf",r.authService.userData))},dependencies:[Sr]}),n})(),rF=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Hp))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Reset Password"),m.qZA(),m.TgZ(5,"p",3),m._uU(6,"Please enter your email address to request a password reset."),m.qZA(),m.TgZ(7,"div",4),m._UZ(8,"input",5,6),m.qZA(),m.TgZ(10,"div",4)(11,"input",7),m.NdJ("click",function(){m.CHM(i);const l=m.MAs(9);return m.KtG(r.authService.ForgotPassword(l.value))}),m.qZA()()(),m.TgZ(12,"div",8)(13,"span"),m._uU(14,"Go back to ? "),m.TgZ(15,"span",9),m._uU(16,"Log In"),m.qZA()()()()()}},dependencies:[oc]}),n})();function iF(n,e){if(1&n&&(m.TgZ(0,"div",4)(1,"p",9),m._uU(2,"We have sent a confirmation email to "),m.TgZ(3,"strong"),m._uU(4),m.qZA(),m._uU(5,"."),m.qZA(),m.TgZ(6,"p",9),m._uU(7,"Please check your email and click on the link to verfiy your email address."),m.qZA()()),2&n){const t=e.ngIf;m.xp6(4),m.Oqu(t.email)}}const sF=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:XL},{path:"register-user",component:eF},{path:"dashboard",component:nF,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Hp),m.LFG(Yr))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"forgot-password",component:rF},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Hp))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Thank You for Registering"),m.qZA(),m.YNc(5,iF,8,1,"div",3),m.TgZ(6,"div",4)(7,"button",5),m.NdJ("click",function(){return r.authService.SendVerificationMail()}),m._UZ(8,"i",6),m._uU(9," Resend Verification Email "),m.qZA()()(),m.TgZ(10,"div",7)(11,"span"),m._uU(12,"Go back to?"),m.TgZ(13,"span",8),m._uU(14," Sign in"),m.qZA()()()()()),2&t&&(m.xp6(5),m.Q6J("ngIf",r.authService.userData))},dependencies:[Sr,oc]}),n})()}];let oF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Rg.forRoot(sF),Rg]}),n})(),BN=(()=>{class n{constructor(){this.title="angularGitHost"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[Z_]}),n})();const jN="firebasestorage.googleapis.com",$N="storageBucket";class Or extends k.ZR{constructor(e,t){super(yx(e),`Firebase Storage: ${t} (${yx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Or.prototype)}_codeEquals(e){return yx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function yx(n){return"storage/"+n}function vx(){return new Or("unknown","An unknown error occurred, please check the error payload for server response.")}function HN(){return new Or("canceled","User canceled the upload/download.")}function GN(){return new Or("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function E_(n){return new Or("invalid-argument",n)}function WN(){return new Or("app-deleted","The Firebase app was deleted.")}function zN(n){return new Or("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function M0(n,e){return new Or("invalid-format","String does not match format '"+n+"': "+e)}function N0(n){throw new Or("internal-error","Internal error: "+n)}class ns{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ns.makeFromUrl(e,t)}catch{return new ns(e,"")}if(""===r.path)return r;throw function _F(n){return new Or("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(_t){_t.path_=decodeURIComponent(_t.path)}const S=t.replace(/[.]/g,"\\."),It=[{regex:h,indices:{bucket:1,path:3},postModify:function a(_t){"/"===_t.path.charAt(_t.path.length-1)&&(_t.path_=_t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===jN?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let _t=0;_t<It.length;_t++){const jt=It[_t],sn=jt.regex.exec(e);if(sn){let Iu=sn[jt.indices.path];Iu||(Iu=""),r=new ns(sn[jt.indices.bucket],Iu),jt.postModify(r);break}}if(null==r)throw function mF(n){return new Or("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class EF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function hD(n){return"string"==typeof n||n instanceof String}function qN(n){return wx()&&n instanceof Blob}function wx(){return typeof Blob<"u"}function Ex(n,e,t,r){if(r<e)throw E_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw E_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Jc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function KN(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var jh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(jh||(jh={})),jh))();class SF{constructor(e,t,r,i,a,l,h,g,v,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,V)=>{this.resolve_=N,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function bF(n){return void 0!==n}(g)?a():a(g)}catch(g){l(g)}else if(null!==h){const g=vx();g.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,g):g)}else l(i.canceled?this.appDelete_?WN():HN():function gF(){return new Or("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new fD(!1,null,!0)):this.backoffId_=function IF(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function g(){return 2===h}let v=!1;function D(...xe){v||(v=!0,e.apply(null,xe))}function S(xe){i=setTimeout(()=>{i=null,n(V,g())},xe)}function N(){a&&clearTimeout(a)}function V(xe,...yt){if(v)return void N();if(xe)return N(),void D.call(null,xe,...yt);if(g()||l)return N(),void D.call(null,xe,...yt);let It;r<64&&(r*=2),1===h?(h=2,It=0):It=1e3*(r+Math.random()),S(It)}let Q=!1;function Ee(xe){Q||(Q=!0,N(),!v&&(null!==i?(xe||(h=2),clearTimeout(i),S(0)):xe||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,Ee(!0)},t),Ee}((r,i)=>{if(i)return void r(!1,new fD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===jh.NO_ERROR,g=a.getStatus();if(!h||this.isRetryStatusCode_(g)){const D=a.getErrorCode()===jh.ABORT;return void r(!1,new fD(!1,null,D))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new fD(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function CF(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class fD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kF(...n){const e=function PF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(wx())return new Blob(n);throw new Or("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Fo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ix{constructor(e,t){this.data=e,this.contentType=t||null}}function Cx(n,e){switch(n){case Fo.RAW:return new Ix(ZN(e));case Fo.BASE64:case Fo.BASE64URL:return new Ix(YN(n,e));case Fo.DATA_URL:return new Ix(function UF(n){const e=new QN(n);return e.base64?YN(Fo.BASE64,e.rest):function FF(n){let e;try{e=decodeURIComponent(n)}catch{throw M0(Fo.DATA_URL,"Malformed data URL.")}return ZN(e)}(e.rest)}(e),function VF(n){return new QN(n).contentType}(e))}throw vx()}function ZN(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function YN(n,e){switch(n){case Fo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw M0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Fo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw M0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function LF(n){return atob(n)}(e)}catch{throw M0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class QN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw M0(Fo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function BF(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class yl{constructor(e,t){let r=0,i="";qN(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(qN(this.data_)){const i=function OF(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new yl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new yl(r,!0)}}static getBlob(...e){if(wx()){const t=e.map(r=>r instanceof yl?r.data_:r);return new yl(kF.apply(null,t))}{const t=e.map(l=>hD(l)?Cx(Fo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new yl(i,!0)}}uploadData(){return this.data_}}function bx(n){let e;try{e=JSON.parse(n)}catch{return null}return function TF(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function JN(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function HF(n,e){return e}class xs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||HF}}let pD=null;function P0(){if(pD)return pD;const n=[];n.push(new xs("bucket")),n.push(new xs("generation")),n.push(new xs("metageneration")),n.push(new xs("name","fullPath",!0));const t=new xs("name");t.xform=function e(a,l){return function GF(n){return!hD(n)||n.length<2?n:JN(n)}(l)},n.push(t);const i=new xs("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new xs("timeCreated")),n.push(new xs("updated")),n.push(new xs("md5Hash",null,!0)),n.push(new xs("cacheControl",null,!0)),n.push(new xs("contentDisposition",null,!0)),n.push(new xs("contentEncoding",null,!0)),n.push(new xs("contentLanguage",null,!0)),n.push(new xs("contentType",null,!0)),n.push(new xs("metadata","customMetadata",!0)),pD=n,pD}function XN(n,e,t){const r=bx(e);return null===r?null:function zF(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function WF(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ns(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Dx(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const eP="prefixes";class vl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function wl(n){if(!n)throw vx()}function gD(n,e){return function t(r,i){const a=XN(n,i,e);return wl(null!==a),a}}function I_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function fF(){return new Or("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function hF(){return new Or("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function dF(n){return new Or("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function pF(n){return new Or("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function k0(n){const e=I_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function cF(n){return new Or("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function nP(n,e,t){const i=Jc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new vl(i,"GET",gD(n,t),l);return h.errorHandler=k0(e),h}function JF(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=Jc(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,D=new vl(h,"GET",function YF(n,e){return function t(r,i){const a=function ZF(n,e,t){const r=bx(t);return null===r?null:function KF(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[eP])for(const i of t[eP]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new ns(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ns(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return wl(null!==a),a}}(n,e.bucket),v);return D.urlParams=a,D.errorHandler=I_(e),D}function iP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function nU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class mD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Tx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{wl(!1)}return wl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const oU={STATE_CHANGED:"state_changed"},Rs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Sx(n){switch(n){case"running":case"pausing":case"canceling":return Rs.RUNNING;case"paused":return Rs.PAUSED;case"success":return Rs.SUCCESS;case"canceled":return Rs.CANCELED;default:return Rs.ERROR}}class aU{constructor(e,t,r){if(function DF(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function C_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class lU extends class uU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw N0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw N0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw N0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw N0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw N0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function _u(){return new lU}class uP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=P0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function rU(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=iP(e,r,i),h={name:l.fullPath},g=Jc(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=Dx(l,t),Q=new vl(g,"POST",function V(Ee){let xe;Tx(Ee);try{xe=Ee.getResponseHeader("X-Goog-Upload-URL")}catch{wl(!1)}return wl(hD(xe)),xe},n.maxUploadRetryTime);return Q.urlParams=h,Q.headers=D,Q.body=S,Q.errorHandler=I_(e),Q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,_u,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function iU(n,e,t,r){const g=new vl(t,"POST",function a(v){const D=Tx(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{wl(!1)}S||wl(!1);const N=Number(S);return wl(!isNaN(N)),new mD(N,r.size(),"final"===D)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=I_(e),g}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,_u,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new mD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function sU(n,e,t,r,i,a,l,h){const g=new mD(0,0);if(l?(g.current=l.current,g.total=l.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function vF(){return new Or("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=g.total-g.current;let D=v;i>0&&(D=Math.min(D,i));const S=g.current,Q={"X-Goog-Upload-Command":D===v?"upload, finalize":"upload","X-Goog-Upload-Offset":`${g.current}`},Ee=r.slice(S,S+D);if(null===Ee)throw GN();const It=new vl(t,"POST",function xe(_t,jt){const sn=Tx(_t,["active","final"]),ii=g.current+D,Iu=r.size();let VR;return VR="final"===sn?gD(e,a)(_t,jt):null,new mD(ii,Iu,"final"===sn,VR)},e.maxUploadRetryTime);return It.headers=Q,It.body=Ee.uploadData(),It.progressCallback=h||null,It.errorHandler=I_(n),It}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(l,_u,i,a);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=nP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,_u,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function sP(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let It="";for(let _t=0;_t<2;_t++)It+=Math.random().toString().slice(2);return It}();l["Content-Type"]="multipart/related; boundary="+g;const v=iP(e,r,i),D=Dx(v,t),V=yl.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+g+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===V)throw GN();const Q={name:v.fullPath},Ee=Jc(a,n.host,n._protocol),yt=n.maxUploadRetryTime,vt=new vl(Ee,"POST",gD(n,t),yt);return vt.urlParams=Q,vt.headers=l,vt.body=V.uploadData(),vt.errorHandler=I_(e),vt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,_u,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=HN(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Sx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new aU(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Sx(this._state)){case Rs.SUCCESS:C_(this._resolve.bind(null,this.snapshot))();break;case Rs.CANCELED:case Rs.ERROR:C_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Sx(this._state)){case Rs.RUNNING:case Rs.PAUSED:e.next&&C_(e.next.bind(e,this.snapshot))();break;case Rs.SUCCESS:e.complete&&C_(e.complete.bind(e))();break;default:e.error&&C_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Gp{constructor(e,t){this._service=e,this._location=t instanceof ns?t:ns.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Gp(e,t)}get root(){const e=new ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JN(this._location.path)}get storage(){return this._service}get parent(){const e=function jF(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ns(this._location.bucket,e);return new Gp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw zN(e)}}function cP(n,e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,be.Z)(function*(n,e,t){const i=yield dP(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield cP(n,e,i.nextPageToken))}),Ax.apply(this,arguments)}function dP(n,e){null!=e&&"number"==typeof e.maxResults&&Ex("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=JF(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,_u)}function EU(n){n._throwIfRoot("getDownloadURL");const e=function XF(n,e,t){const i=Jc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new vl(i,"GET",function QF(n,e){return function t(r,i){const a=XN(n,i,e);return wl(null!==a),function qF(n,e,t,r){const i=bx(e);if(null===i||!hD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return Jc("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+KN({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=k0(e),h}(n.storage,n._location,P0());return n.storage.makeRequestWithTokens(e,_u).then(t=>{if(null===t)throw function wF(){return new Or("no-download-url","The given file does not have any download URLs.")}();return t})}function hP(n,e){const t=function $F(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ns(n._location.bucket,t);return new Gp(n.storage,r)}function fP(n,e){if(n instanceof xx){const t=n;if(null==t._bucket)throw function yF(){return new Or("no-default-bucket","No default bucket found. Did you set the '"+$N+"' property when initializing the app?")}();const r=new Gp(t,t._bucket);return null!=e?fP(r,e):r}return void 0!==e?hP(n,e):n}function DU(n,e){if(e&&function CU(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof xx)return function bU(n,e){return new Gp(n,e)}(n,e);throw E_("To use ref(service, url), the first argument must be a Storage instance.")}return fP(n,e)}function pP(n,e){const t=e?.[$N];return null==t?null:ns.makeFromBucketSpec(t,n)}class xx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=jN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ns.makeFromBucketSpec(i,this._host):pP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ns.makeFromBucketSpec(this._url,e):pP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ex("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ex("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,be.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,be.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new EF(WN());{const a=function NF(n,e,t,r,i,a){const l=KN(n.urlParams),h=n.url+l,g=Object.assign({},n.headers);return function RF(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function AF(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function xF(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(g,a),function MF(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new SF(h,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,be.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const gP="@firebase/storage";function yP(n,e){return DU(n=(0,k.m9)(n),e)}function LU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new xx(t,r,i,e,Pi.SDK_VERSION)}!function FU(){(0,Pi._registerComponent)(new Es.wA("storage",LU,"PUBLIC").setMultipleInstances(!0)),(0,Pi.registerVersion)(gP,"0.9.9",""),(0,Pi.registerVersion)(gP,"0.9.9","esm2017")}();class _D{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class vP{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new _D(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new _D(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new _D(l,this,this._ref)):{next:t.next?l=>t.next(new _D(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class wP{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Xc(e,this._service))}get items(){return this._delegate.items.map(e=>new Xc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Xc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function kU(n,e){return hP(n,e)}(this._delegate,e);return new Xc(t,this.storage)}get root(){return new Xc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Xc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new vP(function SU(n,e,t){return function mU(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new uP(n,new yl(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Fo.RAW,r){this._throwIfRoot("putString");const i=Cx(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new vP(new uP(this._delegate,new yl(i.data,!0),a),this)}listAll(){return function MU(n){return function yU(n){const e={prefixes:[],items:[]};return cP(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new wP(e,this.storage))}list(e){return function RU(n,e){return dP(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new wP(t,this.storage))}getMetadata(){return function AU(n){return function vU(n){n._throwIfRoot("getMetadata");const e=nP(n.storage,n._location,P0());return n.storage.makeRequestWithTokens(e,_u)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function xU(n,e){return function wU(n,e){n._throwIfRoot("updateMetadata");const t=function eU(n,e,t,r){const a=Jc(e.fullServerUrl(),n.host,n._protocol),h=Dx(t,r),v=n.maxOperationRetryTime,D=new vl(a,"PATCH",gD(n,r),v);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=k0(e),D}(n.storage,n._location,e,P0());return n.storage.makeRequestWithTokens(t,_u)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function NU(n){return EU(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function PU(n){return function IU(n){n._throwIfRoot("deleteObject");const e=function tU(n,e){const r=Jc(e.fullServerUrl(),n.host,n._protocol),h=new vl(r,"DELETE",function l(g,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=k0(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,_u)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw zN(e)}}class EP{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(IP(e))throw E_("ref() expected a child path but got a URL, use refFromURL instead.");return new Xc(yP(this._delegate,e),this)}refFromURL(e){if(!IP(e))throw E_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ns.makeFromUrl(e,this._delegate.host)}catch{throw E_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Xc(yP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function OU(n,e,t,r={}){!function TU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function IP(n){return/^[A-Za-z]+:\/\//.test(n)}function jU(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new EP(t,r)}function CP(n){const e=function HU(n){return new xr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function aF(n,e=Ng.z){return(0,Mt.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function g(){const v=l+n,D=e.now();if(D<v)return i=this.schedule(void 0,v-D),void r.add(i);h()}t.subscribe((0,zn.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,gt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function yD(n){return{getDownloadURL:()=>rt(void 0).pipe(ln.fc,Pn(()=>n.getDownloadURL()),ln.iC),getMetadata:()=>rt(void 0).pipe(ln.fc,Pn(()=>n.getMetadata()),ln.iC),delete:()=>(0,dn.D)(n.delete()),child:e=>yD(n.child(e)),updateMetadata:e=>(0,dn.D)(n.updateMetadata(e)),put:(e,t)=>CP(n.put(e,t)),putString:(e,t,r)=>CP(n.putString(e,t,r)),list:e=>(0,dn.D)(n.list(e)),listAll:()=>(0,dn.D)(n.listAll())}}!function $U(n){const e={TaskState:Rs,TaskEvent:oU,StringFormat:Fo,Storage:EP,Reference:Xc};n.INTERNAL.registerComponent(new Es.wA("storage-compat",jU,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(Pg.Z);const GU=new m.OlP("angularfire2.storageBucket"),WU=new m.OlP("angularfire2.storage.maxUploadRetryTime"),zU=new m.OlP("angularfire2.storage.maxOperationRetryTime"),qU=new m.OlP("angularfire2.storage.use-emulator");let KU=(()=>{class n{constructor(t,r,i,a,l,h,g,v,D,S){const N=(0,Pr.on)(t,l,r);this.storage=(0,Pr.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const V=l.runOutsideAngular(()=>N.storage(i||void 0)),Q=D;return Q&&V.useEmulator(...Q),g&&V.setMaxUploadRetryTime(g),v&&V.setMaxOperationRetryTime(v),V},[g,v])}ref(t){return yD(this.storage.ref(t))}refFromURL(t){return yD(this.storage.refFromURL(t))}upload(t,r,i){return yD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Pr.Dh),m.LFG(Pr.xv,8),m.LFG(GU,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ln.HU),m.LFG(WU,8),m.LFG(zU,8),m.LFG(qU,8),m.LFG(x0,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ZU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),YU=(()=>{class n{constructor(){cD.Z.registerVersion("angularfire",ln.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[KU],imports:[ZU]}),n})();var QU=L(5032);const bP="@firebase/database";let Rx="";function TP(n){Rx=n}class eV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class tV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const SP=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new eV(e)}}catch{}return new tV},Wp=SP("localStorage"),Mx=SP("sessionStorage"),b_=new Qs.Yd("@firebase/database"),AP=function(){let n=1;return function(){return n++}}(),xP=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},O0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=O0.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let zp=null,RP=!0;const MP=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(b_.logLevel=Qs.in.VERBOSE,zp=b_.log.bind(b_),e&&Mx.set("logging_enabled",!0)):"function"==typeof n?zp=n:(zp=null,Mx.remove("logging_enabled"))},Ii=function(...n){if(!0===RP&&(RP=!1,null===zp&&!0===Mx.get("logging_enabled")&&MP(!0)),zp){const e=O0.apply(null,n);zp(e)}},L0=function(n){return function(...e){Ii(n,...e)}},Nx=function(...n){const e="FIREBASE INTERNAL ERROR: "+O0(...n);b_.error(e)},El=function(...n){const e=`FIREBASE FATAL ERROR: ${O0(...n)}`;throw b_.error(e),new Error(e)},rs=function(...n){const e="FIREBASE WARNING: "+O0(...n);b_.warn(e)},vD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ed="[MIN_NAME]",Il="[MAX_NAME]",qp=function(n,e){if(n===e)return 0;if(n===ed||e===Il)return-1;if(e===ed||n===Il)return 1;{const t=wD(n),r=wD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},iV=function(n,e){return n===e?0:n<e?-1:1},F0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},Px=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=Px(n[e[r]]);return t+="}",t},NP=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ci(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const PP=function(n){(0,k.hu)(!vD(n),"Invalid JSON number");const r=1023;let i,a,l,h,g;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const D=v.join("");let S="";for(g=0;g<64;g+=8){let N=parseInt(D.substr(g,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},uV=new RegExp("^-?(0*)\\d{1,10}$"),kP=-2147483648,kx=2147483647,wD=function(n){if(uV.test(n)){const e=Number(n);if(e>=kP&&e<=kx)return e}return null},D_=function(n){try{n()}catch(e){setTimeout(()=>{throw rs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},U0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class cV{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){rs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class dV{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ii("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rs(e)}}let V0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const VP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$P="websocket",HP="long_polling";class Lx{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function GP(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===$P)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==HP)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function hV(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ci(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class fV{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const Fx={},Ux={};function Vx(n){const e=n.toString();return Fx[e]||(Fx[e]=new fV),Fx[e]}class gV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&D_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class $h{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=L0(e),this.stats_=Vx(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),GP(t,HP,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new gV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Bx((...a)=>{const[l,h,g,v,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&VP.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$h.forceAllow_=!0}static forceDisallow(){$h.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!$h.forceAllow_&&($h.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=NP(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Bx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=AP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Bx.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Ii("frame writing exception"),h.stack&&Ii(h.stack),Ii(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ii("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ii("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let ID=null;typeof MozWebSocket<"u"?ID=MozWebSocket:typeof WebSocket<"u"&&(ID=WebSocket);let T_=(()=>{class n{constructor(t,r,i,a,l,h,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=L0(this.connId),this.stats_=Vx(r),this.connURL=n.connectionURL_(r,h,g,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&VP.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),GP(t,$P,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wp.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Rx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new ID(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==ID&&!n.forceDisallow_}static previouslyFailed(){return Wp.isInMemoryStorage||!0===Wp.get("previous_websocket_failure")}markConnectionHealthy(){Wp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=NP(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),QP=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[$h,T_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=T_&&T_.isAvailable();let i=r&&!T_.previouslyFailed();if(t.webSocketOnly&&(r||rs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[T_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class ik{constructor(e,t,r,i,a,l,h,g,v,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=L0("c:"+this.id+":"),this.transportManager_=new QP(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=U0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=F0("t",e),r=F0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=F0("t",e),r=F0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=F0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Nx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Nx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&rs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),U0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):U0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class sk{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class ok{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class CD extends ok{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new CD}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class An{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function yn(){return new An("")}function en(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Hh(n){return n.pieces_.length-n.pieceNum_}function Gn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new An(n.pieces_,e)}function $x(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function B0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function lk(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new An(e,0)}function vr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof An)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new An(t,0)}function tn(n){return n.pieceNum_>=n.pieces_.length}function Ms(n,e){const t=en(n),r=en(e);if(null===t)return e;if(t===r)return Ms(Gn(n),Gn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function FV(n,e){const t=B0(n,0),r=B0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=qp(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Hx(n,e){if(Hh(n)!==Hh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ea(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Hh(n)>Hh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class UV{constructor(e,t){this.errorPrefix_=t,this.parts_=B0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);ck(this)}}function ck(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Kp(n))}function Kp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Gx extends ok{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Gx}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const j0=1e3;let DD,Zp=(()=>{class n extends sk{constructor(t,r,i,a,l,h,g,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=L0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=j0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Gx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&CD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const g=h.d;"ok"===h.s?r.resolve(g):r.reject(g)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const v=g.d,D=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();rs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Nx("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=j0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=j0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=j0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,be.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let g=!1,v=null;const D=function(){v?v.close():(g=!0,a())};t.realtime_={close:D,sendRequest:function(V){(0,k.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(V)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,Q]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);g?Ii("getToken() completed but was canceled"):(Ii("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=Q&&Q.token,v=new ik(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Ee=>{rs(Ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(V){t.log_("Failed to get token: "+V),g||(t.repoInfo_.nodeAdmin&&rs(V),D())}}})()}interrupt(t){Ii("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ii("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=j0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>Px(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new An(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ii("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ii("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Rx.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=CD.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class rn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new rn(e,t)}}class bD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new rn(ed,e),i=new rn(ed,t);return 0!==this.compare(r,i)}minPost(){return rn.MIN}}class fk extends bD{static get __EMPTY_NODE(){return DD}static set __EMPTY_NODE(e){DD=e}compare(e,t){return qp(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return rn.MIN}maxPost(){return new rn(Il,DD)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new rn(e,DD)}toString(){return".key"}}const Cl=new fk;class TD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let zx,yu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??so.EMPTY_NODE,this.right=l??so.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return so.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return so.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class so{constructor(e,t=so.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new so(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,yu.BLACK,null,null))}remove(e){return new so(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new TD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new TD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new TD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new TD(this.root_,null,this.comparator_,!0,e)}}function zV(n,e){return qp(n.name,e.name)}function Wx(n,e){return qp(n,e)}so.EMPTY_NODE=new class WV{copy(e,t,r,i,a){return this}insert(e,t,r){return new yu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const pk=function(n){return"number"==typeof n?"number:"+PP(n):"string:"+n},gk=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===zx||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===zx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let mk,_k,yk,S_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),gk(this.priorityNode_)}static set __childrenNodeConstructor(t){mk=t}static get __childrenNodeConstructor(){return mk}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return tn(t)?this:".priority"===en(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=en(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Hh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Gn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+pk(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?PP(this.value_):this.value_,this.lazyHash_=xP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Qn=new class YV extends bD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?qp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return rn.MIN}maxPost(){return new rn(Il,new S_("[PRIORITY-POST]",yk))}makePost(e,t){const r=_k(e);return new rn(t,new S_("[PRIORITY-POST]",r))}toString(){return".priority"}},QV=Math.log(2);class JV{constructor(e){this.count=parseInt(Math.log(e+1)/QV,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const SD=function(n,e,t,r){n.sort(e);const i=function(g,v){const D=v-g;let S,N;if(0===D)return null;if(1===D)return S=n[g],N=t?t(S):S,new yu(N,S.node,yu.BLACK,null,null);{const V=parseInt(D/2,10)+g,Q=i(g,V),Ee=i(V+1,v);return S=n[V],N=t?t(S):S,new yu(N,S.node,yu.BLACK,Q,Ee)}},h=function(g){let v=null,D=null,S=n.length;const N=function(Q,Ee){const xe=S-Q,yt=S;S-=Q;const vt=i(xe+1,yt),It=n[xe],_t=t?t(It):It;V(new yu(_t,It.node,Ee,null,vt))},V=function(Q){v?(v.left=Q,v=Q):(D=Q,v=Q)};for(let Q=0;Q<g.count;++Q){const Ee=g.nextBitIsOne(),xe=Math.pow(2,g.count-(Q+1));Ee?N(xe,yu.BLACK):(N(xe,yu.BLACK),N(xe,yu.RED))}return D}(new JV(n.length));return new so(r||e,h)};let qx;const A_={};class td{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(A_&&Qn,"ChildrenNode.ts has not been loaded"),qx=qx||new td({".priority":A_},{".priority":Qn}),qx}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof so?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Cl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(rn.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?SD(r,e.getCompare()):A_;const g=e.toString(),v=Object.assign({},this.indexSet_);v[g]=e;const D=Object.assign({},this.indexes_);return D[g]=h,new td(D,v)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===A_){if(l.isDefinedOn(e.node)){const h=[],g=t.getIterator(rn.Wrap);let v=g.getNext();for(;v;)v.name!==e.name&&h.push(v),v=g.getNext();return h.push(e),SD(h,l.getCompare())}return A_}{const h=t.get(e.name);let g=i;return h&&(g=g.remove(new rn(e.name,h))),g.insert(e,e.node)}});return new td(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===A_)return i;{const a=t.get(e.name);return a?i.remove(new rn(e.name,a)):i}});return new td(r,this.indexSet_)}}let $0,Kt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&gk(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $0||($0=new n(new so(Wx),null,td.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?$0:r}}getChild(t){const r=en(t);return null===r?this:this.getImmediateChild(r).getChild(Gn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new rn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?$0:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=en(t);if(null===i)return r;{(0,k.hu)(".priority"!==en(t)||1===Hh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Gn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Qn,(h,g)=>{r[h]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const g in r)h[g]=r[g];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+pk(this.getPriority().val())+":"),this.forEachChild(Qn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":xP(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new rn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new rn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new rn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,rn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,rn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===H0?-1:0}withIndex(t){if(t===Cl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Cl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Qn),a=r.getIterator(Qn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Cl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const H0=new class XV extends Kt{constructor(){super(new so(Wx),Kt.EMPTY_NODE,td.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Kt.EMPTY_NODE}isEmpty(){return!1}};function Tr(n,e=null){if(null===n)return Kt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new S_(n,Tr(e));if(n instanceof Array){let t=Kt.EMPTY_NODE;return Ci(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Tr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Tr(e))}{const t=[];let r=!1;if(Ci(n,(l,h)=>{if("."!==l.substring(0,1)){const g=Tr(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new rn(l,g)))}}),0===t.length)return Kt.EMPTY_NODE;const a=SD(t,zV,l=>l.name,Wx);if(r){const l=SD(t,Qn.getCompare());return new Kt(a,Tr(e),new td({".priority":l},{".priority":Qn}))}return new Kt(a,Tr(e),td.Default)}}Object.defineProperties(rn,{MIN:{value:new rn(ed,Kt.EMPTY_NODE)},MAX:{value:new rn(Il,H0)}}),fk.__EMPTY_NODE=Kt.EMPTY_NODE,S_.__childrenNodeConstructor=Kt,function qV(n){zx=n}(H0),function ZV(n){yk=n}(H0),function KV(n){_k=n}(Tr);class Kx extends bD{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!tn(e)&&".priority"!==en(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?qp(e.name,t.name):a}makePost(e,t){const r=Tr(e),i=Kt.EMPTY_NODE.updateChild(this.indexPath_,r);return new rn(t,i)}maxPost(){const e=Kt.EMPTY_NODE.updateChild(this.indexPath_,H0);return new rn(Il,e)}toString(){return B0(this.indexPath_,0).join("/")}}const Zx=new class tB extends bD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?qp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return rn.MIN}maxPost(){return rn.MAX}makePost(e,t){const r=Tr(e);return new rn(t,r)}toString(){return".value"}},x_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",nB=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=x_.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=x_.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),Ek=function(n){if(n===""+kx)return"-";const e=wD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Il;const a=x_.charAt(x_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},Ik=function(n){if(n===""+kP)return ed;const e=wD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+kx:(delete t[t.length-1],t.join("")):(t[t.length-1]=x_.charAt(x_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Ck(n){return{type:"value",snapshotNode:n}}function R_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function G0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function W0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Qx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(G0(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(R_(t,r)):l.trackChildChange(W0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Qn,(i,a)=>{t.hasChild(i)||r.trackChildChange(G0(i,a))}),t.isLeafNode()||t.forEachChild(Qn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(W0(i,a,l))}else r.trackChildChange(R_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Kt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class z0{constructor(e){this.indexedFilter_=new Qx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=z0.getStartPost_(e),this.endPost_=z0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new rn(t,r))||(r=Kt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Kt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Kt.EMPTY_NODE);const a=this;return t.forEachChild(Qn,(l,h)=>{a.matches(new rn(l,h))||(i=i.updateImmediateChild(l,Kt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class iB{constructor(e){this.rangedFilter_=new z0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new rn(t,r))||(r=Kt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Kt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Kt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,g;if(i=t.withIndex(this.index_),i=i.updatePriority(Kt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(N,V)=>S(V,N)}else g=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let v=0,D=!1;for(;g.hasNext();){const S=g.getNext();!D&&h(a,S)<=0&&(D=!0),D&&v<this.limit_&&h(S,l)<=0?v++:i=i.updateImmediateChild(S.name,Kt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(N,V)=>S(V,N)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const g=new rn(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(g);if(h.hasChild(t)){const S=h.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=N&&(N.name===t||h.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const V=null==N?1:l(N,g);if(D&&!r.isEmpty()&&V>=0)return a?.trackChildChange(W0(t,r,S)),h.updateImmediateChild(t,r);{a?.trackChildChange(G0(t,S));const Ee=h.updateImmediateChild(t,Kt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(a?.trackChildChange(R_(N.name,N.node)),Ee.updateImmediateChild(N.name,N.node)):Ee}}return r.isEmpty()?e:D&&l(v,g)>=0?(null!=a&&(a.trackChildChange(G0(v.name,v.node)),a.trackChildChange(R_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,Kt.EMPTY_NODE)):e}}class AD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ed}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Il}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qn}copy(){const e=new AD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Jx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Xx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function xD(n,e){const t=n.copy();return t.index_=e,t}function bk(n){const e={};if(n.isDefault())return e;let t;return n.index_===Qn?t="$priority":n.index_===Zx?t="$value":n.index_===Cl?t="$key":((0,k.hu)(n.index_ instanceof Kx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Dk(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Qn&&(e.i=n.index_.toString()),e}class RD extends sk{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=L0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=RD.getListenId_(e,r),h={};this.listens_[l]=h;const g=bk(e._queryParams);this.restRequest_(a+".json",g,(v,D)=>{let S=D;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===h){let N;N=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(N,null)}})}unlisten(e,t){const r=RD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=bk(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,k.cI)(h.responseText)}catch{rs("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,g)}else 401!==h.status&&404!==h.status&&rs("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class cB{constructor(){this.rootNode_=Kt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function MD(){return{value:null,children:new Map}}function M_(n,e,t){if(tn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=en(e);n.children.has(r)||n.children.set(r,MD()),M_(n.children.get(r),e=Gn(e),t)}}function eR(n,e){if(tn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Qn,(r,i)=>{M_(n,new An(r),i)}),eR(n,e)}}if(n.children.size>0){const t=en(e);return e=Gn(e),n.children.has(t)&&eR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function tR(n,e,t){null!==n.value?t(e,n.value):function dB(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{tR(i,new An(e.toString()+"/"+r),t)})}class hB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ci(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class gB{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hB(e);const r=1e4+2e4*Math.random();U0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ci(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),U0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ia=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ia||(Ia={})),Ia))();function iR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ND{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ia.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(tn(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new An(e));return new ND(yn(),t,this.revert)}}return(0,k.hu)(en(this.path)===e,"operationForChild called for unrelated child."),new ND(Gn(this.path),this.affectedTree,this.revert)}}class q0{constructor(e,t){this.source=e,this.path=t,this.type=Ia.LISTEN_COMPLETE}operationForChild(e){return tn(this.path)?new q0(this.source,yn()):new q0(this.source,Gn(this.path))}}class Yp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ia.OVERWRITE}operationForChild(e){return tn(this.path)?new Yp(this.source,yn(),this.snap.getImmediateChild(e)):new Yp(this.source,Gn(this.path),this.snap)}}class N_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ia.MERGE}operationForChild(e){if(tn(this.path)){const t=this.children.subtree(new An(e));return t.isEmpty()?null:t.value?new Yp(this.source,yn(),t.value):new N_(this.source,yn(),t)}return(0,k.hu)(en(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new N_(this.source,Gn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Gh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tn(e))return this.isFullyInitialized()&&!this.filtered_;const t=en(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class mB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function K0(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,g)=>function vB(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new rn(e.childName,e.snapshotNode),i=new rn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,g)),l.forEach(h=>{const g=function yB(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(g,n.query_))})})}function PD(n,e){return{eventCache:n,serverCache:e}}function Z0(n,e,t,r){return PD(new Gh(e,t,r),n.serverCache)}function Sk(n,e,t,r){return PD(n.eventCache,new Gh(e,t,r))}function kD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Qp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let sR;class Jn{constructor(e,t=(()=>(sR||(sR=new so(iV)),sR))()){this.value=e,this.children=t}static fromObject(e){let t=new Jn(null);return Ci(e,(r,i)=>{t=t.set(new An(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:yn(),value:this.value};if(tn(e))return null;{const r=en(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Gn(e),t);return null!=a?{path:vr(new An(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tn(e))return this;{const t=en(e),r=this.children.get(t);return null!==r?r.subtree(Gn(e)):new Jn(null)}}set(e,t){if(tn(e))return new Jn(t,this.children);{const r=en(e),a=(this.children.get(r)||new Jn(null)).set(Gn(e),t),l=this.children.insert(r,a);return new Jn(this.value,l)}}remove(e){if(tn(e))return this.children.isEmpty()?new Jn(null):new Jn(null,this.children);{const t=en(e),r=this.children.get(t);if(r){const i=r.remove(Gn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Jn(null):new Jn(this.value,a)}return this}}get(e){if(tn(e))return this.value;{const t=en(e),r=this.children.get(t);return r?r.get(Gn(e)):null}}setTree(e,t){if(tn(e))return t;{const r=en(e),a=(this.children.get(r)||new Jn(null)).setTree(Gn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Jn(this.value,l)}}fold(e){return this.fold_(yn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(vr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,yn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(tn(e))return null;{const a=en(e),l=this.children.get(a);return l?l.findOnPath_(Gn(e),vr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,yn(),t)}foreachOnPath_(e,t,r){if(tn(e))return this;{this.value&&r(t,this.value);const i=en(e),a=this.children.get(i);return a?a.foreachOnPath_(Gn(e),vr(t,i),r):new Jn(null)}}foreach(e){this.foreach_(yn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(vr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class vu{constructor(e){this.writeTree_=e}static empty(){return new vu(new Jn(null))}}function Y0(n,e,t){if(tn(e))return new vu(new Jn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ms(i,e);return a=a.updateChild(l,t),new vu(n.writeTree_.set(i,a))}{const i=new Jn(t),a=n.writeTree_.setTree(e,i);return new vu(a)}}}function oR(n,e,t){let r=n;return Ci(t,(i,a)=>{r=Y0(r,vr(e,i),a)}),r}function Ak(n,e){if(tn(e))return vu.empty();{const t=n.writeTree_.setTree(e,new Jn(null));return new vu(t)}}function aR(n,e){return null!=Jp(n,e)}function Jp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ms(t.path,e)):null}function xk(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Qn,(r,i)=>{e.push(new rn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new rn(r,i.value))}),e}function Wh(n,e){if(tn(e))return n;{const t=Jp(n,e);return new vu(null!=t?new Jn(t):n.writeTree_.subtree(e))}}function uR(n){return n.writeTree_.isEmpty()}function P_(n,e){return Rk(yn(),n.writeTree_,e)}function Rk(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Rk(vr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(vr(n,".priority"),r)),t}}function OD(n,e){return Ok(e,n)}function DB(n,e){if(n.snap)return Ea(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ea(vr(n.path,t),e))return!0;return!1}function SB(n){return n.visible}function Mk(n,e,t){let r=vu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Ea(t,l)?(h=Ms(t,l),r=Y0(r,h,a.snap)):Ea(l,t)&&(h=Ms(l,t),r=Y0(r,yn(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Ea(t,l))h=Ms(t,l),r=oR(r,h,a.children);else if(Ea(l,t))if(h=Ms(l,t),tn(h))r=oR(r,yn(),a.children);else{const g=(0,k.DV)(a.children,en(h));if(g){const v=g.getChild(Gn(h));r=Y0(r,yn(),v)}}}}}return r}function Nk(n,e,t,r,i){if(r||i){const a=Wh(n.visibleWrites,e);return!i&&uR(a)?t:i||null!=t||aR(a,yn())?P_(Mk(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Ea(v.path,e)||Ea(e,v.path))},e),t||Kt.EMPTY_NODE):null}{const a=Jp(n.visibleWrites,e);if(null!=a)return a;{const l=Wh(n.visibleWrites,e);return uR(l)?t:null!=t||aR(l,yn())?P_(l,t||Kt.EMPTY_NODE):null}}}function LD(n,e,t,r){return Nk(n.writeTree,n.treePath,e,t,r)}function lR(n,e){return function AB(n,e,t){let r=Kt.EMPTY_NODE;const i=Jp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Qn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Wh(n.visibleWrites,e);return t.forEachChild(Qn,(l,h)=>{const g=P_(Wh(a,new An(l)),h);r=r.updateImmediateChild(l,g)}),xk(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return xk(Wh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function Pk(n,e,t,r){return function xB(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=vr(e,t);if(aR(n.visibleWrites,a))return null;{const l=Wh(n.visibleWrites,a);return uR(l)?i.getChild(t):P_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function FD(n,e){return function MB(n,e){return Jp(n.visibleWrites,e)}(n.writeTree,vr(n.treePath,e))}function cR(n,e,t){return function RB(n,e,t,r){const i=vr(e,t),a=Jp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?P_(Wh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function kk(n,e){return Ok(vr(n.treePath,e),n.writeTree)}function Ok(n,e){return{treePath:n,writeTree:e}}class OB{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,W0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,G0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,R_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,W0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Lk=new class LB{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class dR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Gh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qp(this.viewCache_),a=function kB(n,e,t,r,i,a){return function NB(n,e,t,r,i,a,l){let h;const g=Wh(n.visibleWrites,e),v=Jp(g,yn());if(null!=v)h=v;else{if(null==t)return[];h=P_(g,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),N=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let V=N.getNext();for(;V&&D.length<i;)0!==S(V,r)&&D.push(V),V=N.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Fk(n,e,t,r,i,a){const l=e.eventCache;if(null!=FD(r,t))return e;{let h,g;if(tn(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Qp(e),S=lR(r,v instanceof Kt?v:Kt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=LD(r,Qp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=en(t);if(".priority"===v){(0,k.hu)(1===Hh(t),"Can't have a priority with additional path components");const D=l.getNode();g=e.serverCache.getNode();const S=Pk(r,t,D,g);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Gn(t);let S;if(l.isCompleteForChild(v)){g=e.serverCache.getNode();const N=Pk(r,t,l.getNode(),g);S=null!=N?l.getNode().getImmediateChild(v).updateChild(D,N):l.getNode().getImmediateChild(v)}else S=cR(r,v,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),v,S,D,i,a):l.getNode()}}return Z0(e,h,l.isFullyInitialized()||tn(t),n.filter.filtersNodes())}}function UD(n,e,t,r,i,a,l,h){const g=e.serverCache;let v;const D=l?n.filter:n.filter.getIndexedFilter();if(tn(t))v=D.updateFullNode(g.getNode(),r,null);else if(D.filtersNodes()&&!g.isFiltered()){const V=g.getNode().updateChild(t,r);v=D.updateFullNode(g.getNode(),V,null)}else{const V=en(t);if(!g.isCompleteForPath(t)&&Hh(t)>1)return e;const Q=Gn(t),xe=g.getNode().getImmediateChild(V).updateChild(Q,r);v=".priority"===V?D.updatePriority(g.getNode(),xe):D.updateChild(g.getNode(),V,xe,Q,Lk,null)}const S=Sk(e,v,g.isFullyInitialized()||tn(t),D.filtersNodes());return Fk(n,S,t,i,new dR(i,S,a),h)}function hR(n,e,t,r,i,a,l){const h=e.eventCache;let g,v;const D=new dR(i,e,a);if(tn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=Z0(e,v,!0,n.filter.filtersNodes());else{const S=en(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),g=Z0(e,v,h.isFullyInitialized(),h.isFiltered());else{const N=Gn(t),V=h.getNode().getImmediateChild(S);let Q;if(tn(N))Q=r;else{const Ee=D.getCompleteChild(S);Q=null!=Ee?".priority"===$x(N)&&Ee.getChild(lk(N)).isEmpty()?Ee:Ee.updateChild(N,r):Kt.EMPTY_NODE}g=V.equals(Q)?e:Z0(e,n.filter.updateChild(h.getNode(),S,Q,N,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function Uk(n,e){return n.eventCache.isCompleteForChild(e)}function Vk(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function fR(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,g=e;v=tn(t)?r:new Jn(null).setTree(t,r);const D=e.serverCache.getNode();return v.children.inorderTraversal((S,N)=>{if(D.hasChild(S)){const Q=Vk(0,e.serverCache.getNode().getImmediateChild(S),N);g=UD(n,g,new An(S),Q,i,a,l,h)}}),v.children.inorderTraversal((S,N)=>{const V=!e.serverCache.isCompleteForChild(S)&&void 0===N.value;if(!D.hasChild(S)&&!V){const Ee=Vk(0,e.serverCache.getNode().getImmediateChild(S),N);g=UD(n,g,new An(S),Ee,i,a,l,h)}}),g}class WB{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Qx(r.getIndex()),a=function sB(n){return n.loadsAllData()?new Qx(n.getIndex()):n.hasLimit()?new iB(n):new z0(n)}(r);this.processor_=function FB(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,g=i.updateFullNode(Kt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Kt.EMPTY_NODE,h.getNode(),null),D=new Gh(g,l.isFullyInitialized(),i.filtersNodes()),S=new Gh(v,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=PD(S,D),this.eventGenerator_=new mB(this.query_)}get query(){return this.query_}}function KB(n,e){const t=Qp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!tn(e)&&!t.getImmediateChild(en(e)).isEmpty())?t.getChild(e):null}function Bk(n){return 0===n.eventRegistrations_.length}function jk(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function $k(n,e,t,r){e.type===Ia.MERGE&&null!==e.source.queryId&&((0,k.hu)(Qp(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(kD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function VB(n,e,t,r,i){const a=new OB;let l,h;if(t.type===Ia.OVERWRITE){const v=t;v.source.fromUser?l=hR(n,e,v.path,v.snap,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!tn(v.path),l=UD(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===Ia.MERGE){const v=t;v.source.fromUser?l=function jB(n,e,t,r,i,a,l){let h=e;return r.foreach((g,v)=>{const D=vr(t,g);Uk(e,en(D))&&(h=hR(n,h,D,v,i,a,l))}),r.foreach((g,v)=>{const D=vr(t,g);Uk(e,en(D))||(h=hR(n,h,D,v,i,a,l))}),h}(n,e,v.path,v.children,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),l=fR(n,e,v.path,v.children,r,i,h,a))}else if(t.type===Ia.ACK_USER_WRITE){const v=t;l=v.revert?function GB(n,e,t,r,i,a){let l;if(null!=FD(r,t))return e;{const h=new dR(r,e,i),g=e.eventCache.getNode();let v;if(tn(t)||".priority"===en(t)){let D;if(e.serverCache.isFullyInitialized())D=LD(r,Qp(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Kt,"serverChildren would be complete if leaf node"),D=lR(r,S)}v=n.filter.updateFullNode(g,D,a)}else{const D=en(t);let S=cR(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=g.getImmediateChild(D)),v=null!=S?n.filter.updateChild(g,D,S,Gn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(g,D,Kt.EMPTY_NODE,Gn(t),h,a):g,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=LD(r,Qp(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=FD(r,yn()),Z0(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function $B(n,e,t,r,i,a,l){if(null!=FD(i,t))return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(tn(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return UD(n,e,t,g.getNode().getChild(t),i,a,h,l);if(tn(t)){let v=new Jn(null);return g.getNode().forEachChild(Cl,(D,S)=>{v=v.set(new An(D),S)}),fR(n,e,t,v,i,a,h,l)}return e}{let v=new Jn(null);return r.foreach((D,S)=>{const N=vr(t,D);g.isCompleteForPath(N)&&(v=v.set(D,g.getNode().getChild(N)))}),fR(n,e,t,v,i,a,h,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==Ia.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function HB(n,e,t,r,i){const a=e.serverCache;return Fk(n,Sk(e,a.getNode(),a.isFullyInitialized()||tn(t),a.isFiltered()),t,r,Lk,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function BB(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=kD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(Ck(kD(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function UB(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,Hk(n,a.changes,a.viewCache.eventCache.getNode(),null)}function Hk(n,e,t,r){return function _B(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function rB(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),K0(n,i,"child_removed",e,r,t),K0(n,i,"child_added",e,r,t),K0(n,i,"child_moved",a,r,t),K0(n,i,"child_changed",e,r,t),K0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let VD,jD;class Gk{constructor(){this.views=new Map}}function pR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),$k(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat($k(l,e,t,r));return a}}function gR(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=LD(t,i?r:null),g=!1;h?g=!0:r instanceof Kt?(h=lR(t,r),g=!1):(h=Kt.EMPTY_NODE,g=!1);const v=PD(new Gh(h,g,!1),new Gh(r,i,!1));return new WB(e,v)}return l}function Wk(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function zh(n,e){let t=null;for(const r of n.views.values())t=t||KB(r,e);return t}function zk(n,e){return e._queryParams.loadsAllData()?BD(n):n.views.get(e._queryIdentifier)}function qk(n,e){return null!=zk(n,e)}function qh(n){return null!=BD(n)}function BD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let i2=1;class Kk{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Jn(null),this.pendingWriteTree_=function PB(){return{visibleWrites:vu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function mR(n,e,t,r,i){return function EB(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Y0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?k_(n,new Yp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Kh(n,e,t=!1){const r=function CB(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function bB(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&DB(h,r.path)?i=!1:Ea(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function TB(n){n.visibleWrites=Mk(n.allWrites,SB,yn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Ak(n.visibleWrites,r.path):Ci(r.children,g=>{n.visibleWrites=Ak(n.visibleWrites,vr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new Jn(null);return null!=r.snap?a=a.set(yn(),!0):Ci(r.children,l=>{a=a.set(new An(l),!0)}),k_(n,new ND(r.path,a,t))}return[]}function Q0(n,e,t){return k_(n,new Yp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function $D(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||qk(a,e))){const h=function t2(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=qh(n);if("default"===i)for(const[g,v]of n.views.entries())l=l.concat(jk(v,t,r)),Bk(v)&&(n.views.delete(g),v.query._queryParams.loadsAllData()||a.push(v.query));else{const g=n.views.get(i);g&&(l=l.concat(jk(g,t,r)),Bk(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||a.push(g.query)))}return h&&!qh(n)&&a.push(new(function JB(){return(0,k.hu)(VD,"Reference.ts has not been loaded"),VD}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function XB(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const g=h.removed;l=h.events;const v=-1!==g.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,N)=>qh(N));if(v&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const N=function h2(n){return n.fold((e,t,r)=>{if(t&&qh(t))return[BD(t)];{let i=[];return t&&(i=Wk(t)),Ci(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let V=0;V<N.length;++V){const Q=N[V],Ee=Q.query,xe=eO(n,Q);n.listenProvider_.startListening(X0(Ee),J0(n,Ee),xe.hashFn,xe.onComplete)}}}!D&&g.length>0&&!r&&(v?n.listenProvider_.stopListening(X0(e),null):g.forEach(S=>{const N=n.queryToTagMap.get(GD(S));n.listenProvider_.stopListening(X0(S),N)})),function f2(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=GD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,g)}return l}function Zk(n,e,t,r){const i=_R(n,r);if(null!=i){const a=yR(i),l=a.path,h=a.queryId,g=Ms(l,e);return vR(n,l,new Yp(iR(h),g,t))}return[]}function Yk(n,e){const t=n._path;let r=null,i=!1;e.syncPointTree_.foreachOnPath(t,(v,D)=>{const S=Ms(v,t);r=r||zh(D,S),i=i||qh(D)});let l,a=e.syncPointTree_.get(t);a?(i=i||qh(a),r=r||zh(a,yn())):(a=new Gk,e.syncPointTree_=e.syncPointTree_.set(t,a)),null!=r?l=!0:(l=!1,r=Kt.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((D,S)=>{const N=zh(S,yn());N&&(r=r.updateImmediateChild(D,N))}));const h=qk(a,n);if(!h&&!n._queryParams.loadsAllData()){const v=GD(n);(0,k.hu)(!e.queryToTagMap.has(v),"View does not exist, but we have a tag");const D=function p2(){return i2++}();e.queryToTagMap.set(v,D),e.tagToQueryMap.set(D,v)}return{syncPoint:a,writesCache:OD(e.pendingWriteTree_,t),serverCache:r,serverCacheComplete:l,foundAncestorDefaultView:i,viewAlreadyExists:h}}function Qk(n,e,t){const{syncPoint:r,serverCache:i,writesCache:a,serverCacheComplete:l,viewAlreadyExists:h,foundAncestorDefaultView:g}=Yk(e,n);let v=function e2(n,e,t,r,i,a){const l=gR(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function ZB(n,e){n.eventRegistrations_.push(e)}(l,t),function YB(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Qn,(a,l)=>{r.push(R_(a,l))}),t.isFullyInitialized()&&r.push(Ck(t.getNode())),Hk(n,r,t.getNode(),e)}(l,t)}(r,e,t,a,i,l);if(!h&&!g){const D=zk(r,e);v=v.concat(function g2(n,e,t){const r=e._path,i=J0(n,e),a=eO(n,t),l=n.listenProvider_.startListening(X0(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!qh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((v,D,S)=>{if(!tn(v)&&D&&qh(D))return[BD(D).query];{let N=[];return D&&(N=N.concat(Wk(D).map(V=>V.query))),Ci(S,(V,Q)=>{N=N.concat(Q)}),N}});for(let v=0;v<g.length;++v){const D=g[v];n.listenProvider_.stopListening(X0(D),J0(n,D))}}return l}(n,e,D))}return v}function HD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const v=zh(h,Ms(l,e));if(v)return v});return Nk(i,e,a,t,!0)}function k_(n,e){return Jk(e,n.syncPointTree_,null,OD(n.pendingWriteTree_,yn()))}function Jk(n,e,t,r){if(tn(n.path))return Xk(n,e,t,r);{const i=e.get(yn());null==t&&null!=i&&(t=zh(i,yn()));let a=[];const l=en(n.path),h=n.operationForChild(l),g=e.children.get(l);if(g&&h){const v=t?t.getImmediateChild(l):null,D=kk(r,l);a=a.concat(Jk(h,g,v,D))}return i&&(a=a.concat(pR(i,n,r,t))),a}}function Xk(n,e,t,r){const i=e.get(yn());null==t&&null!=i&&(t=zh(i,yn()));let a=[];return e.children.inorderTraversal((l,h)=>{const g=t?t.getImmediateChild(l):null,v=kk(r,l),D=n.operationForChild(l);D&&(a=a.concat(Xk(D,h,g,v)))}),i&&(a=a.concat(pR(i,n,r,t))),a}function eO(n,e){const t=e.query,r=J0(n,t);return{hashFn:()=>(function zB(n){return n.viewCache_.serverCache.getNode()}(e)||Kt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function u2(n,e,t){const r=_R(n,t);if(r){const i=yR(r),a=i.path,l=i.queryId,h=Ms(a,e);return vR(n,a,new q0(iR(l),h))}return[]}(n,t._path,r):function a2(n,e){return k_(n,new q0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function aV(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return $D(n,t,null,a)}}}}function J0(n,e){const t=GD(e);return n.queryToTagMap.get(t)}function GD(n){return n._path.toString()+"$"+n._queryIdentifier}function _R(n,e){return n.tagToQueryMap.get(e)}function yR(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new An(n.substr(0,e))}}function vR(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),pR(r,t,OD(n.pendingWriteTree_,e),null)}function X0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function r2(){return(0,k.hu)(jD,"Reference.ts has not been loaded"),jD}())(n._repo,n._path):n}class wR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new wR(t)}node(){return this.node_}}class ER{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=vr(this.path_,e);return new ER(this.syncTree_,t)}node(){return HD(this.syncTree_,this.path_)}}const tO=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?_2(n[".sv"],e,t):"object"==typeof n[".sv"]?y2(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},_2=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},y2=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},nO=function(n,e,t,r){return CR(e,new ER(t,n),r)},IR=function(n,e,t){return CR(n,new wR(e),t)};function CR(n,e,t){const r=n.getPriority().val(),i=tO(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=tO(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new S_(h,Tr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new S_(i))),l.forEachChild(Qn,(h,g)=>{const v=CR(g,e.getImmediateChild(h),t);v!==g&&(a=a.updateImmediateChild(h,v))}),a}}class bR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function WD(n,e){let t=e instanceof An?e:new An(e),r=n,i=en(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new bR(i,r,a),t=Gn(t),i=en(t)}return r}function Xp(n){return n.node.value}function DR(n,e){n.node.value=e,TR(n)}function rO(n){return n.node.childCount>0}function zD(n,e){Ci(n.node.children,(t,r)=>{e(new bR(t,n,r))})}function iO(n,e,t,r){t&&!r&&e(n),zD(n,i=>{iO(i,e,!0,r)}),t&&r&&e(n)}function eE(n){return new An(null===n.parent?n.name:eE(n.parent)+"/"+n.name)}function TR(n){null!==n.parent&&function E2(n,e,t){const r=function v2(n){return void 0===Xp(n)&&!rO(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,TR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,TR(n))}(n.parent,n.name,n)}const I2=/[\[\].#$\/\u0000-\u001F\u007F]/,C2=/[\[\].#$\u0000-\u001F\u007F]/,SR=10485760,qD=function(n){return"string"==typeof n&&0!==n.length&&!I2.test(n)},sO=function(n){return"string"==typeof n&&0!==n.length&&!C2.test(n)},tE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!vD(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},bl=function(n,e,t,r){r&&void 0===e||nE((0,k.gK)(n,"value"),e,t)},nE=function(n,e,t){const r=t instanceof An?new UV(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Kp(r));if("function"==typeof e)throw new Error(n+"contains a function "+Kp(r)+" with contents = "+e.toString());if(vD(e))throw new Error(n+"contains "+e.toString()+" "+Kp(r));if("string"==typeof e&&e.length>SR/3&&(0,k.ug)(e)>SR)throw new Error(n+"contains a string greater than "+SR+" utf8 bytes "+Kp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ci(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!qD(l)))throw new Error(n+" contains an invalid key ("+l+") "+Kp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function VV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),ck(n)})(r,l),nE(n,h,r),function BV(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Kp(r)+" in addition to actual children.")}},oO=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ci(e,(l,h)=>{const g=new An(l);if(nE(i,h,vr(t,g)),".priority"===$x(g)&&!tE(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=B0(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!qD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(FV);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ea(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},AR=function(n,e,t){if(!t||void 0!==e){if(vD(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!tE(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rE=function(n,e,t,r){if(!(r&&void 0===t||qD(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},iE=function(n,e,t,r){if(!(r&&void 0===t||sO(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ca=function(n,e){if(".info"===en(e))throw new Error(n+" failed = Can't modify data under /.info/")},aO=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!qD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sO(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class S2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function KD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Hx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function uO(n,e,t){KD(n,t),lO(n,r=>Hx(r,e))}function ba(n,e,t){KD(n,t),lO(n,r=>Ea(r,e)||Ea(e,r))}function lO(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(A2(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function A2(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();zp&&Ii("event: "+t.toString()),D_(r)}}}const cO="repo_interrupt";class R2{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new S2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=MD(),this.transactionQueueTree_=new bR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dO(n){const t=n.infoData_.getNode(new An(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function sE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:dO(n)})}function hO(n,e,t,r,i){n.dataUpdateCount++;const a=new An(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,k.UI)(t,v=>Tr(v));l=function c2(n,e,t,r){const i=_R(n,r);if(i){const a=yR(i),l=a.path,h=a.queryId,g=Ms(l,e),v=Jn.fromObject(t);return vR(n,l,new N_(iR(h),g,v))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=Tr(t);l=Zk(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,k.UI)(t,v=>Tr(v));l=function o2(n,e,t){const r=Jn.fromObject(t);return k_(n,new N_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=Tr(t);l=Q0(n.serverSyncTree_,a,g)}let h=a;l.length>0&&(h=O_(n,a)),ba(n.eventQueue_,h,l)}function fO(n,e){xR(n,"connected",e),!1===e&&function O2(n){eg(n,"onDisconnectEvents");const e=sE(n),t=MD();tR(n.onDisconnect_,yn(),(i,a)=>{const l=nO(i,a,n.serverSyncTree_,e);M_(t,i,l)});let r=[];tR(t,yn(),(i,a)=>{r=r.concat(Q0(n.serverSyncTree_,i,a));const l=PR(n,i);O_(n,l)}),n.onDisconnect_=MD(),ba(n.eventQueue_,yn(),r)}(n)}function xR(n,e,t){const r=new An("/.info/"+e),i=Tr(t);n.infoData_.updateSnapshot(r,i);const a=Q0(n.infoSyncTree_,r,i);ba(n.eventQueue_,r,a)}function ZD(n){return n.nextWriteId_++}function P2(n,e){const t=function d2(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,D)=>{const S=Ms(v,t);r=r||zh(D,S)});let i=n.syncPointTree_.get(t);i?r=r||zh(i,yn()):(i=new Gk,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Gh(r,!0,!1):null;return function qB(n){return kD(n.viewCache_)}(gR(i,e,OD(n.pendingWriteTree_,e._path),a?l.getNode():Kt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Tr(r).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())Q0(n.serverSyncTree_,e._path,i);else{const l=function l2(n,e){const{syncPoint:t,serverCache:r,writesCache:i,serverCacheComplete:a}=Yk(e,n),l=gR(t,e,i,r,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),e._queryParams.loadsAllData()?null:J0(n,e)}(n.serverSyncTree_,e);Zk(n.serverSyncTree_,e._path,i,l)}return $D(n.serverSyncTree_,e,null).length>0&&eg(n,"unexpected cancel events in repoGetValue"),i},r=>(eg(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}function RR(n,e,t,r,i){eg(n,"set",{path:e.toString(),value:t,priority:r});const a=sE(n),l=Tr(t,r),h=HD(n.serverSyncTree_,e),g=IR(l,h,a),v=ZD(n),D=mR(n.serverSyncTree_,e,g,v,!0);KD(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(N,V)=>{const Q="ok"===N;Q||rs("set at "+e+" failed: "+N);const Ee=Kh(n.serverSyncTree_,v,!Q);ba(n.eventQueue_,e,Ee),Zh(0,i,N,V)});const S=PR(n,e);O_(n,S),ba(n.eventQueue_,S,[])}function L2(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&eR(n.onDisconnect_,e),Zh(0,t,r,i)})}function pO(n,e,t,r){const i=Tr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&M_(n.onDisconnect_,e,i),Zh(0,r,a,l)})}function MR(n,e,t){let r;r=".info"===en(e._path)?$D(n.infoSyncTree_,e,t):$D(n.serverSyncTree_,e,t),uO(n.eventQueue_,e._path,r)}function gO(n){n.persistentConnection_&&n.persistentConnection_.interrupt(cO)}function eg(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ii(t,...e)}function Zh(n,e,t,r){e&&D_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function NR(n,e,t){return HD(n.serverSyncTree_,e,t)||Kt.EMPTY_NODE}function YD(n,e=n.transactionQueueTree_){if(e||QD(n,e),Xp(e)){const t=_O(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function $2(n,e,t){const r=t.map(v=>v.currentWriteId),i=NR(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const D=t[v];(0,k.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Ms(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;n.server_.put(g.toString(),h,v=>{eg(n,"transaction put response",{path:g.toString(),status:v});let D=[];if("ok"===v){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,D=D.concat(Kh(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();QD(n,WD(n.transactionQueueTree_,e)),YD(n,n.transactionQueueTree_),ba(n.eventQueue_,e,D);for(let N=0;N<S.length;N++)D_(S[N])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{rs("transaction at "+g.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}O_(n,e)}},l)}(n,eE(e),t)}else rO(e)&&zD(e,t=>{YD(n,t)})}function O_(n,e){const t=mO(n,e),r=eE(t);return function H2(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],v=Ms(t,g.path);let S,D=!1;if((0,k.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)D=!0,S=g.abortReason,i=i.concat(Kh(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)D=!0,S="maxretry",i=i.concat(Kh(n.serverSyncTree_,g.currentWriteId,!0));else{const N=NR(n,g.path,l);g.currentInputSnapshot=N;const V=e[h].update(N.val());if(void 0!==V){nE("transaction failed: Data returned ",V,g.path);let Q=Tr(V);"object"==typeof V&&null!=V&&(0,k.r3)(V,".priority")||(Q=Q.updatePriority(N.getPriority()));const xe=g.currentWriteId,yt=sE(n),vt=IR(Q,N,yt);g.currentOutputSnapshotRaw=Q,g.currentOutputSnapshotResolved=vt,g.currentWriteId=ZD(n),l.splice(l.indexOf(xe),1),i=i.concat(mR(n.serverSyncTree_,g.path,vt,g.currentWriteId,g.applyLocally)),i=i.concat(Kh(n.serverSyncTree_,xe,!0))}else D=!0,S="nodata",i=i.concat(Kh(n.serverSyncTree_,g.currentWriteId,!0))}ba(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}QD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)D_(r[h]);YD(n,n.transactionQueueTree_)}(n,_O(n,t),r),r}function mO(n,e){let t,r=n.transactionQueueTree_;for(t=en(e);null!==t&&void 0===Xp(r);)r=WD(r,t),t=en(e=Gn(e));return r}function _O(n,e){const t=[];return yO(n,e,t),t.sort((r,i)=>r.order-i.order),t}function yO(n,e,t){const r=Xp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);zD(e,i=>{yO(n,i,t)})}function QD(n,e){const t=Xp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,DR(e,t.length>0?t:void 0)}zD(e,r=>{QD(n,r)})}function PR(n,e){const t=eE(mO(n,e)),r=WD(n.transactionQueueTree_,e);return function w2(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{kR(n,i)}),kR(n,r),iO(r,i=>{kR(n,i)}),t}function kR(n,e){const t=Xp(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Kh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?DR(e,void 0):t.length=a+1,ba(n.eventQueue_,eE(e),i);for(let l=0;l<r.length;l++)D_(r[l])}}const OR=function(n,e){const t=z2(n),r=t.namespace;return"firebase.com"===t.domain&&El(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&El("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Lx(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new An(t.pathString)}},z2=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function G2(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,S)));const N=function W2(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):rs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===h||"wss"===h,g=parseInt(e.substring(v+1),10)):v=e.length;const V=e.slice(0,v);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const Q=e.indexOf(".");r=e.substring(0,Q).toLowerCase(),t=e.substring(Q+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class vO{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class wO{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class EO{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class IO{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return L2(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ca("OnDisconnect.remove",this._path);const e=new k.BH;return pO(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ca("OnDisconnect.set",this._path),bl("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return pO(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ca("OnDisconnect.setWithPriority",this._path),bl("OnDisconnect.setWithPriority",e,this._path,!1),AR("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function F2(n,e,t,r,i){const a=Tr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&M_(n.onDisconnect_,e,a),Zh(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ca("OnDisconnect.update",this._path),oO("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function U2(n,e,t,r){if((0,k.xb)(t))return Ii("onDisconnect().update() called with empty data.  Don't do anything."),void Zh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ci(t,(l,h)=>{const g=Tr(h);M_(n.onDisconnect_,vr(e,l),g)}),Zh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class oo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return tn(this._path)?null:$x(this._path)}get ref(){return new Da(this._repo,this._path)}get _queryIdentifier(){const e=Dk(this._queryParams),t=Px(e);return"{}"===t?"default":t}get _queryObject(){return Dk(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof oo))return!1;const t=this._repo===e._repo,r=Hx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function LV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function JD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Yh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Cl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ed)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Il)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Qn){if(null!=e&&!tE(e)||null!=t&&!tE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof Kx||n.getIndex()===Zx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function XD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Da extends oo{constructor(e,t){super(e,t,new AD,!1)}get parent(){const e=lk(this._path);return null===e?null:new Da(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class tg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new An(e),r=ng(this.ref,e);return new tg(this._node.getChild(t),r,Qn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new tg(i,ng(this.ref,r),Qn)))}hasChild(e){const t=new An(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function CO(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?ng(n._root,e):n._root}function bO(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=OR(e,n._repo.repoInfo_.nodeAdmin);aO("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&El("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),CO(n,t.path.toString())}function ng(n,e){return null===en((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),iE("child","path",t,!1)):iE("child","path",e,!1),new Da(n._repo,vr(n._path,e));var t}function LR(n,e){n=(0,k.m9)(n),Ca("set",n._path),bl("set",e,n._path,!1);const t=new k.BH;return RR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Q2(n,e){oO("update",e,n._path,!1);const t=new k.BH;return function k2(n,e,t,r){eg(n,"update",{path:e.toString(),value:t});let i=!0;const a=sE(n),l={};if(Ci(t,(h,g)=>{i=!1,l[h]=nO(vr(e,h),Tr(g),n.serverSyncTree_,a)}),i)Ii("update() called with empty data.  Don't do anything."),Zh(0,r,"ok",void 0);else{const h=ZD(n),g=function s2(n,e,t,r){!function IB(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=oR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Jn.fromObject(t);return k_(n,new N_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);KD(n.eventQueue_,g),n.server_.merge(e.toString(),t,(v,D)=>{const S="ok"===v;S||rs("update at "+e+" failed: "+v);const N=Kh(n.serverSyncTree_,h,!S),V=N.length>0?O_(n,e):e;ba(n.eventQueue_,V,N),Zh(0,r,v,D)}),Ci(t,v=>{const D=PR(n,vr(e,v));O_(n,D)}),ba(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class eT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new vO("value",this,new tg(e.snapshotNode,new Da(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wO(this,e,t):null}matches(e){return e instanceof eT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class tT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wO(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=ng(new Da(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new vO(e.type,this,new tg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof tT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function oE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const g=t,v=(D,S)=>{MR(n._repo,n,h),g(D,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new EO(t,a||void 0),h="value"===e?new eT(l):new tT(e,l);return function V2(n,e,t){let r;r=".info"===en(e._path)?Qk(n.infoSyncTree_,e,t):Qk(n.serverSyncTree_,e,t),uO(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>MR(n._repo,n,h)}function FR(n,e,t,r){return oE(n,"value",e,t,r)}function DO(n,e,t,r){return oE(n,"child_added",e,t,r)}function TO(n,e,t,r){return oE(n,"child_changed",e,t,r)}function SO(n,e,t,r){return oE(n,"child_moved",e,t,r)}function AO(n,e,t,r){return oE(n,"child_removed",e,t,r)}function xO(n,e,t){let r=null;const i=t?new EO(t):null;"value"===e?r=new eT(i):e&&(r=new tT(e,i)),MR(n._repo,n,r)}class wu{}class RO extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){bl("endAt",this._value,e._path,!0);const t=Xx(e._queryParams,this._value,this._key);if(XD(t),Yh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class ej extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){bl("endBefore",this._value,e._path,!1);const t=function lB(n,e,t){let r,i;return n.index_===Cl?("string"==typeof e&&(e=Ik(e)),i=Xx(n,e,t)):(r=null==t?ed:Ik(t),i=Xx(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(XD(t),Yh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class MO extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){bl("startAt",this._value,e._path,!0);const t=Jx(e._queryParams,this._value,this._key);if(XD(t),Yh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class rj extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){bl("startAfter",this._value,e._path,!1);const t=function uB(n,e,t){let r;if(n.index_===Cl)"string"==typeof e&&(e=Ek(e)),r=Jx(n,e,t);else{let i;i=null==t?Il:Ek(t),r=Jx(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(XD(t),Yh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class sj extends wu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new oo(e._repo,e._path,function oB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class aj extends wu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new oo(e._repo,e._path,function aB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class lj extends wu{constructor(e){super(),this._path=e}_apply(e){JD(e,"orderByChild");const t=new An(this._path);if(tn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Kx(t),i=xD(e._queryParams,r);return Yh(i),new oo(e._repo,e._path,i,!0)}}class dj extends wu{_apply(e){JD(e,"orderByKey");const t=xD(e._queryParams,Cl);return Yh(t),new oo(e._repo,e._path,t,!0)}}class fj extends wu{_apply(e){JD(e,"orderByPriority");const t=xD(e._queryParams,Qn);return Yh(t),new oo(e._repo,e._path,t,!0)}}class gj extends wu{_apply(e){JD(e,"orderByValue");const t=xD(e._queryParams,Zx);return Yh(t),new oo(e._repo,e._path,t,!0)}}class _j extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(bl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new RO(this._value,this._key)._apply(new MO(this._value,this._key)._apply(e))}}function Eu(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function QB(n){(0,k.hu)(!VD,"__referenceConstructor has already been defined"),VD=n})(Da),function n2(n){(0,k.hu)(!jD,"__referenceConstructor has already been defined"),jD=n}(Da);const UR={};function PO(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||El("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ii("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,l=OR(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,a=`http://${v}?ns=${h.namespace}`,l=OR(a,i),h=l.repoInfo):g=!l.repoInfo.secure;const D=i&&g?new V0(V0.OWNER):new dV(n.name,n.options,e);aO("Invalid Firebase Database URL",l),tn(l.path)||El("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function Ij(n,e,t,r){let i=UR[e.name];i||(i={},UR[e.name]=i);let a=i[n.toURLString()];return a&&El("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new R2(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new cV(n.name,t));return new bj(S,n)}class bj{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function M2(n,e,t){if(n.stats_=Vx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new RD(n.repoInfo_,(r,i,a,l)=>{hO(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fO(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Zp(n.repoInfo_,e,(r,i,a,l)=>{hO(n,r,i,a,l)},r=>{fO(n,r)},r=>{!function N2(n,e){Ci(e,(t,r)=>{xR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function pV(n,e){const t=n.toString();return Ux[t]||(Ux[t]=e()),Ux[t]}(n.repoInfo_,()=>new gB(n.stats_,n.server_)),n.infoData_=new cB,n.infoSyncTree_=new Kk({startListening:(r,i,a,l)=>{let h=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(h=Q0(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),xR(n,"connected",!1),n.serverSyncTree_=new Kk({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,g)=>{const v=l(h,g);ba(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Da(this._repo,yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Ej(n,e){const t=UR[e];(!t||t[n.key]!==n)&&El(`Database ${e}(${n.repoInfo_}) has already been deleted.`),gO(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&El("Cannot call "+e+" on a deleted database.")}}function kO(){QP.IS_TRANSPORT_INITIALIZED&&rs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Dj(){kO(),$h.forceDisallow()}function Tj(){kO(),T_.forceDisallow(),$h.forceAllow()}function Rj(n,e){MP(n,e)}const Nj={".sv":"timestamp"};class Oj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Zp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Zp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Mj(n){TP(Pi.SDK_VERSION),(0,Pi._registerComponent)(new Es.wA("database",(e,{instanceIdentifier:t})=>PO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Pi.registerVersion)(bP,"0.13.3",n),(0,Pi.registerVersion)(bP,"0.13.3","esm2017")}();const Vj=new Qs.Yd("@firebase/database-compat"),OO=function(n){Vj.warn("FIREBASE WARNING: "+n)};class $j{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,OO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Hj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Qh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),iE("DataSnapshot.child","path",e,!1),new Qh(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),iE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Qh(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Uo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ji{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=ji.getCancelAndContextArgs_("Query.on",r,i),h=(v,D)=>{t.call(l.context,new Qh(this.database,v),D)};h.userCallback=t,h.context=l.context;const g=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return FR(this._delegate,h,g),t;case"child_added":return DO(this._delegate,h,g),t;case"child_removed":return AO(this._delegate,h,g),t;case"child_changed":return TO(this._delegate,h,g),t;case"child_moved":return SO(this._delegate,h,g),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,xO(this._delegate,e,i)}else xO(this._delegate,e)}get(){return function J2(n){return P2((n=(0,k.m9)(n))._repo,n).then(e=>new tg(e,new Da(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new Qh(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=ji.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(v,D)=>{const S=new Qh(this.database,v);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const g=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":FR(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":DO(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":AO(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":TO(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":SO(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new ji(this.database,Eu(this._delegate,function oj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new sj(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new ji(this.database,Eu(this._delegate,function uj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new aj(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new ji(this.database,Eu(this._delegate,function cj(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return iE("orderByChild","path",n,!1),new lj(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new ji(this.database,Eu(this._delegate,function hj(){return new dj}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new ji(this.database,Eu(this._delegate,function pj(){return new fj}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new ji(this.database,Eu(this._delegate,function mj(){return new gj}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new ji(this.database,Eu(this._delegate,function nj(n=null,e){return rE("startAt","key",e,!0),new MO(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new ji(this.database,Eu(this._delegate,function ij(n,e){return rE("startAfter","key",e,!0),new rj(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new ji(this.database,Eu(this._delegate,function X2(n,e){return rE("endAt","key",e,!0),new RO(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new ji(this.database,Eu(this._delegate,function tj(n,e){return rE("endBefore","key",e,!0),new ej(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new ji(this.database,Eu(this._delegate,function yj(n,e){return rE("equalTo","key",e,!0),new _j(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ji))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Uo(this.database,new Da(this._delegate._repo,this._delegate._path))}}class Uo extends ji{constructor(e,t){super(e,new oo(t._repo,t._path,new AD,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Uo(this.database,ng(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Uo(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Uo(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=LR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,OO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ca("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=Q2(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Y2(n,e,t){if(Ca("setWithPriority",n._path),bl("setWithPriority",e,n._path,!1),AR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return RR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function K2(n){return Ca("remove",n._path),LR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Lj(n,e,t){var r;if(n=(0,k.m9)(n),Ca("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new k.BH,h=FR(n,()=>{});return function j2(n,e,t,r,i,a){eg(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:AP(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=NR(n,e,void 0);l.currentInputSnapshot=h;const g=l.update(h.val());if(void 0===g)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{nE("transaction failed: Data returned ",g,l.path),l.status=0;const v=WD(n.transactionQueueTree_,e),D=Xp(v)||[];let S;D.push(l),DR(v,D),"object"==typeof g&&null!==g&&(0,k.r3)(g,".priority")?(S=(0,k.DV)(g,".priority"),(0,k.hu)(tE(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(HD(n.serverSyncTree_,e)||Kt.EMPTY_NODE).getPriority().val();const N=sE(n),V=Tr(g,S),Q=IR(V,h,N);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=Q,l.currentWriteId=ZD(n);const Ee=mR(n.serverSyncTree_,e,Q,l.currentWriteId,l.applyLocally);ba(n.eventQueue_,e,Ee),YD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,v,D)=>{let S=null;g?a.reject(g):(S=new tg(D,new Da(n._repo,n._path),Qn),a.resolve(new Oj(v,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Hj(a.committed,new Qh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Z2(n,e){n=(0,k.m9)(n),Ca("setPriority",n._path),AR("setPriority",e,!1);const t=new k.BH;return RR(n._repo,vr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function q2(n,e){n=(0,k.m9)(n),Ca("push",n._path),bl("push",e,n._path,!0);const t=dO(n._repo),r=nB(t),i=ng(n,r),a=ng(n,r);let l;return l=null!=e?LR(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Uo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Uo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ca("Reference.onDisconnect",this._delegate._path),new $j(new IO(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class aE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Dj,forceLongPolling:Tj}}useEmulator(e,t,r={}){!function Sj(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&El("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&El('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new V0(V0.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new V0(l)}!function wj(n,e,t,r){n.repoInfo_=new Lx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Uo){const t=bO(this._delegate,e.toString());return new Uo(this,t)}{const t=CO(this._delegate,e);return new Uo(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=bO(this._delegate,e);return new Uo(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function Aj(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),gO(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function xj(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function B2(n){n.persistentConnection_&&n.persistentConnection_.resume(cO)}(n._repo)}(this._delegate)}}aE.ServerValue={TIMESTAMP:function Pj(){return Nj}(),increment:n=>function kj(n){return{".sv":{increment:n}}}(n)};var Wj=Object.freeze({__proto__:null,initStandalone:function Gj({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){TP(t);const l=new Es.zt("auth-internal",new Es.H0("database-standalone"));return l.setComponent(new Es.wA("auth-internal",()=>r,"PRIVATE")),{instance:new aE(PO(n,l,void 0,e,a),n),namespace:i}}});const zj=aE.ServerValue;function LO(n){return null==n}function FO(n){return"function"==typeof n.set}function UO(n,e){return FO(e)?e:n.ref(e)}function VO(n,e){if(function Kj(n){return"string"==typeof n}(n))return e.stringCase();if(FO(n))return e.firebaseCase();if(function Zj(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function uE(n,e,t="on",r=Ng.z){return new xr.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,gt.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,sN.B)())}function BO(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Jj(n,e){const{payload:t,prevKey:r,key:i}=e,a=BO(n,i),l=function Qj(n,e){if(LO(e))return 0;{const t=BO(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(g=>{const v={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function jO(n){return(LO(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function $O(n,e,t){return function Yj(n,e,t){return uE(n,"value","once",t).pipe(Pn(r=>{const i=[rt(r)];return e.forEach(a=>i.push(uE(n,a,"on",t))),(0,GA.T)(...i).pipe(qn(Jj,[]))}),UE())}(n,e=jO(e),t)}function HO(n,e,t){const r=(e=jO(e)).map(i=>uE(n,i,"on",t));return(0,GA.T)(...r)}function GO(n,e){return function(r,i){return VO(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function n$(n){return function(t){return t?VO(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function WO(n,e){return function(){return uE(n,"value","on",e)}}!function qj(n){n.INTERNAL.registerComponent(new Es.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new aE(i,r)},"PUBLIC").setServiceProps({Reference:Uo,Query:ji,Database:aE,DataSnapshot:Qh,enableLogging:Rj,INTERNAL:Wj,ServerValue:zj}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.3")}(Pg.Z);const s$=new m.OlP("angularfire2.realtimeDatabaseURL"),o$=new m.OlP("angularfire2.database.use-emulator");let a$=(()=>{class n{constructor(t,r,i,a,l,h,g,v,D,S,N,V,Q,Ee,xe){this.schedulers=h;const yt=g,vt=(0,Pr.on)(t,l,r);v&&gx(vt,l,D,N,V,Q,S,Ee),this.database=(0,Pr.cc)(`${vt.name}.database.${i}`,"AngularFireDatabase",vt.name,()=>{const It=l.runOutsideAngular(()=>vt.database(i||void 0));return yt&&It.useEmulator(...yt),It},[yt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>UO(this.database,t));let a=i;return r&&(a=r(i)),function r$(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:GO(r,"update"),set:GO(r,"set"),push:i=>r.push(i),remove:n$(r),snapshotChanges:i=>$O(n,i,t).pipe(ln.iC),stateChanges:i=>HO(n,i,t).pipe(ln.iC),auditTrail:i=>function Xj(n,e,t){return function t$(n,e,t){return function e$(n,e){return uE(n,"value","on",e).pipe((0,gt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function JU(...n){const e=(0,mn.jO)(n);return(0,Mt.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let g=0;g<i;g++)(0,Hs.Xf)(n[g]).subscribe((0,zn.x)(r,v=>{a[g]=v,!h&&!l[g]&&(l[g]=!0,(h=l.every(xi.y))&&(l=null))},QU.Z));t.subscribe((0,zn.x)(r,g=>{if(h){const v=[g,...a];r.next(e?e(...v):v)}}))})}(e),(0,gt.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(g=>g.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function XU(n){return(0,Mt.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,zn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,gt.U)(i=>i.actions))}(n,HO(n,e).pipe(qn((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(ln.iC),valueChanges:(i,a)=>$O(n,i,t).pipe((0,gt.U)(h=>h.map(g=>a&&a.idField?Object.assign(Object.assign({},g.payload.val()),{[a.idField]:g.key}):g.payload.val())),ln.iC)}}(a,this)}object(t){return function i$(n,e){return{query:n,snapshotChanges:()=>WO(n,e.schedulers.outsideAngular)().pipe(ln.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>WO(n,e.schedulers.outsideAngular)().pipe(ln.iC,(0,gt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>UO(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Pr.Dh),m.LFG(Pr.xv,8),m.LFG(s$,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ln.HU),m.LFG(o$,8),m.LFG(R0,8),m.LFG(lx,8),m.LFG(cx,8),m.LFG(dx,8),m.LFG(hx,8),m.LFG(fx,8),m.LFG(px,8),m.LFG(x0,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),u$=(()=>{class n{constructor(){cD.Z.registerVersion("angularfire",ln.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[a$]}),n})();const zO_firebaseConfig={apiKey:"AIzaSyCn_Tzm6bKkULIlFEP3hnNkmtnm2opZmR0",authDomain:"angular-git-host.firebaseapp.com",projectId:"angular-git-host",storageBucket:"angular-git-host.appspot.com",messagingSenderId:"733900350733",appId:"1:733900350733:web:c38877c6a16aa5fdf63c44",measurementId:"G-EP5D1DQ9B4"};let l$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[BN]}),n.\u0275inj=m.cJS({providers:[BN,Hp],imports:[Mn,oF,Pr.hO.initializeApp(zO_firebaseConfig,"angular-git-host"),GL,JL,YU,u$]}),n})();(0,m.G48)(),Fu().bootstrapModule(l$).catch(n=>console.error(n))},5867:(ht,ke,L)=>{L.d(ke,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=L(9681);(0,m.registerVersion)("firebase","9.9.1","app")},127:(ht,ke,L)=>{L.d(ke,{Z:()=>m.Z});var m=L(3942);m.Z.registerVersion("firebase","9.9.1","app-compat")},5881:(ht,ke,L)=>{L.r(ke);var m=L(5861),B=L(3942),P=L(6457),oe=L(2090),ge=(L(9681),L(1877),L(4859));function fe(){return window}function z(){return(z=(0,m.Z)(function*(te,$,H){var Ie;const{BuildInfo:Ge}=fe();(0,P.aq)($.sessionId,"AuthEvent did not contain a session ID");const Et=yield me($.sessionId),Ne={};return(0,P.ar)()?Ne.ibi=Ge.packageName:(0,P.as)()?Ne.apn=Ge.packageName:(0,P.at)(te,"operation-not-supported-in-this-environment"),Ge.displayName&&(Ne.appDisplayName=Ge.displayName),Ne.sessionId=Et,(0,P.au)(te,H,$.type,void 0,null!==(Ie=$.eventId)&&void 0!==Ie?Ie:void 0,Ne)})).apply(this,arguments)}function He(){return(He=(0,m.Z)(function*(te){const{BuildInfo:$}=fe(),H={};(0,P.ar)()?H.iosBundleId=$.packageName:(0,P.as)()?H.androidPackageName=$.packageName:(0,P.at)(te,"operation-not-supported-in-this-environment"),yield(0,P.av)(te,H)})).apply(this,arguments)}function it(){return(it=(0,m.Z)(function*(te,$,H){const{cordova:Ie}=fe();let Ge=()=>{};try{yield new Promise((Et,Ne)=>{let tt=null;function Dt(){var bt;Et();const dr=null===(bt=Ie.plugins.browsertab)||void 0===bt?void 0:bt.close;"function"==typeof dr&&dr(),"function"==typeof H?.close&&H.close()}function cn(){tt||(tt=window.setTimeout(()=>{Ne((0,P.aw)(te,"redirect-cancelled-by-user"))},2e3))}function wr(){"visible"===document?.visibilityState&&cn()}$.addPassiveListener(Dt),document.addEventListener("resume",cn,!1),(0,P.as)()&&document.addEventListener("visibilitychange",wr,!1),Ge=()=>{$.removePassiveListener(Dt),document.removeEventListener("resume",cn,!1),document.removeEventListener("visibilitychange",wr,!1),tt&&window.clearTimeout(tt)}})}finally{Ge()}})).apply(this,arguments)}function me(te){return et.apply(this,arguments)}function et(){return(et=(0,m.Z)(function*(te){const $=Xe(te),H=yield crypto.subtle.digest("SHA-256",$);return Array.from(new Uint8Array(H)).map(Ge=>Ge.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Xe(te){if((0,P.aq)(/[0-9a-zA-Z]+/.test(te),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(te);const $=new ArrayBuffer(te.length),H=new Uint8Array($);for(let Ie=0;Ie<te.length;Ie++)H[Ie]=te.charCodeAt(Ie);return H}class Oe extends P.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise($=>{this.resolveInialized=$})}addPassiveListener($){this.passiveListeners.add($)}removePassiveListener($){this.passiveListeners.delete($)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent($){return this.resolveInialized(),this.passiveListeners.forEach(H=>H($)),super.onEvent($)}initialized(){var $=this;return(0,m.Z)(function*(){yield $.initPromise})()}}function ie(te){return ye.apply(this,arguments)}function ye(){return(ye=(0,m.Z)(function*(te){const $=yield se()._get(ae(te));return $&&(yield se()._remove(ae(te))),$})).apply(this,arguments)}function J(){const te=[],$="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const Ie=Math.floor(Math.random()*$.length);te.push($.charAt(Ie))}return te.join("")}function se(){return(0,P.ay)(P.b)}function ae(te){return(0,P.az)("authEvent",te.config.apiKey,te.name)}function je(te){if(!te?.includes("?"))return{};const[$,...H]=te.split("?");return(0,oe.zd)(H.join("?"))}function qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function Ht(){var te;return(null===(te=self?.location)||void 0===te?void 0:te.protocol)||null}function En(te=(0,oe.z$)()){return!("file:"!==Ht()&&"ionic:"!==Ht()&&"capacitor:"!==Ht()||!te.toLowerCase().match(/iphone|ipad|ipod|android/))}function hi(){try{const te=self.localStorage,$=P.aI();if(te)return te.setItem($,"1"),te.removeItem($),!function is(te=(0,oe.z$)()){return function Lr(){return(0,oe.w1)()&&11===document?.documentMode}()||function xn(te=(0,oe.z$)()){return/Edge\/\d+/.test(te)}(te)}()||(0,oe.hl)()}catch{return Di()&&(0,oe.hl)()}return!1}function Di(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function jn(){return(function Jt(){return"http:"===Ht()||"https:"===Ht()}()||(0,oe.ru)()||En())&&!function bi(){return(0,oe.b$)()||(0,oe.UG)()}()&&hi()&&!Di()}function $i(){return En()&&typeof document<"u"}function Fr(){return(Fr=(0,m.Z)(function*(){return!!$i()&&new Promise(te=>{const $=setTimeout(()=>{te(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout($),te(!0)})})})).apply(this,arguments)}const Yt={LOCAL:"local",NONE:"none",SESSION:"session"},or=P.ax,Ur="persistence";function Cn(te){return ur.apply(this,arguments)}function ur(){return(ur=(0,m.Z)(function*(te){yield te._initializationPromise;const $=zt(),H=P.az(Ur,te.config.apiKey,te.name);$&&$.setItem(H,te._getPersistence())})).apply(this,arguments)}function zt(){var te;try{return(null===(te=function In(){return typeof window<"u"?window:null}())||void 0===te?void 0:te.sessionStorage)||null}catch{return null}}const Ze=P.ax;class ct{constructor(){this.browserResolver=P.ay(P.k),this.cordovaResolver=P.ay(class Zt{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize($){var H=this;return(0,m.Z)(function*(){const Ie=$._key();let Ge=H.eventManagers.get(Ie);return Ge||(Ge=new Oe($),H.eventManagers.set(Ie,Ge),H.attachCallbackListeners($,Ge)),Ge})()}_openPopup($){(0,P.at)($,"operation-not-supported-in-this-environment")}_openRedirect($,H,Ie,Ge){var Et=this;return(0,m.Z)(function*(){!function Ce(te){var $,H,Ie,Ge,Et,Ne,tt,Dt,cn,wr;const bt=fe();(0,P.ax)("function"==typeof(null===($=bt?.universalLinks)||void 0===$?void 0:$.subscribe),te,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(typeof(null===(H=bt?.BuildInfo)||void 0===H?void 0:H.packageName)<"u",te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(Et=null===(Ge=null===(Ie=bt?.cordova)||void 0===Ie?void 0:Ie.plugins)||void 0===Ge?void 0:Ge.browsertab)||void 0===Et?void 0:Et.openUrl),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(Dt=null===(tt=null===(Ne=bt?.cordova)||void 0===Ne?void 0:Ne.plugins)||void 0===tt?void 0:tt.browsertab)||void 0===Dt?void 0:Dt.isAvailable),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(wr=null===(cn=bt?.cordova)||void 0===cn?void 0:cn.InAppBrowser)||void 0===wr?void 0:wr.open),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}($);const Ne=yield Et._initialize($);yield Ne.initialized(),Ne.resetRedirect(),(0,P.aD)(),yield Et._originValidation($);const tt=function Ae(te,$,H=null){return{type:$,eventId:H,urlResponse:null,sessionId:J(),postBody:null,tenantId:te.tenantId,error:(0,P.aw)(te,"no-auth-event")}}($,Ie,Ge);yield function ze(te,$){return se()._set(ae(te),$)}($,tt);const Dt=yield function q(te,$,H){return z.apply(this,arguments)}($,tt,H),cn=yield function Ue(te){const{cordova:$}=fe();return new Promise(H=>{$.plugins.browsertab.isAvailable(Ie=>{let Ge=null;Ie?$.plugins.browsertab.openUrl(te):Ge=$.InAppBrowser.open(te,(0,P.ap)()?"_blank":"_system","location=yes"),H(Ge)})})}(Dt);return function Se(te,$,H){return it.apply(this,arguments)}($,Ne,cn)})()}_isIframeWebStorageSupported($,H){throw new Error("Method not implemented.")}_originValidation($){const H=$._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function X(te){return He.apply(this,arguments)}($)),this.originValidationPromises[H]}attachCallbackListeners($,H){const{universalLinks:Ie,handleOpenURL:Ge,BuildInfo:Et}=fe(),Ne=setTimeout((0,m.Z)(function*(){yield ie($),H.onEvent(qe())}),500),tt=function(){var wr=(0,m.Z)(function*(bt){clearTimeout(Ne);const dr=yield ie($);let vn=null;dr&&bt?.url&&(vn=function Te(te,$){var H,Ie;const Ge=function de(te){const $=je(te),H=$.link?decodeURIComponent($.link):void 0,Ie=je(H).link,Ge=$.deep_link_id?decodeURIComponent($.deep_link_id):void 0;return je(Ge).link||Ge||Ie||H||te}($);if(Ge.includes("/__/auth/callback")){const Et=je(Ge),Ne=Et.firebaseError?function ve(te){try{return JSON.parse(te)}catch{return null}}(decodeURIComponent(Et.firebaseError)):null,tt=null===(Ie=null===(H=Ne?.code)||void 0===H?void 0:H.split("auth/"))||void 0===Ie?void 0:Ie[1],Dt=tt?(0,P.aw)(tt):null;return Dt?{type:te.type,eventId:te.eventId,tenantId:te.tenantId,error:Dt,urlResponse:null,sessionId:null,postBody:null}:{type:te.type,eventId:te.eventId,tenantId:te.tenantId,sessionId:te.sessionId,urlResponse:Ge,postBody:null}}return null}(dr,bt.url)),H.onEvent(vn||qe())});return function(dr){return wr.apply(this,arguments)}}();typeof Ie<"u"&&"function"==typeof Ie.subscribe&&Ie.subscribe(null,tt);const Dt=Ge,cn=`${Et.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var wr=(0,m.Z)(function*(bt){if(bt.toLowerCase().startsWith(cn)&&tt({url:bt}),"function"==typeof Dt)try{Dt(bt)}catch(dr){console.error(dr)}});return function(bt){return wr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize($){var H=this;return(0,m.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize($)})()}_openPopup($,H,Ie,Ge){var Et=this;return(0,m.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openPopup($,H,Ie,Ge)})()}_openRedirect($,H,Ie,Ge){var Et=this;return(0,m.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openRedirect($,H,Ie,Ge)})()}_isIframeWebStorageSupported($,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported($,H)}_originValidation($){return this.assertedUnderlyingResolver._originValidation($)}get _shouldInitProactively(){return $i()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ze(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var $=this;return(0,m.Z)(function*(){if($.underlyingResolver)return;const H=yield function pt(){return Fr.apply(this,arguments)}();$.underlyingResolver=H?$.cordovaResolver:$.browserResolver})()}}function Ti(te){return te.unwrap()}function Rt(te){return bn(te)}function bn(te){const{_tokenResponse:$}=te instanceof oe.ZR?te.customData:te;if(!$)return null;if(!(te instanceof oe.ZR)&&"temporaryProof"in $&&"phoneNumber"in $)return P.P.credentialFromResult(te);const H=$.providerId;if(!H||H===P.o.PASSWORD)return null;let Ie;switch(H){case P.o.GOOGLE:Ie=P.Q;break;case P.o.FACEBOOK:Ie=P.N;break;case P.o.GITHUB:Ie=P.T;break;case P.o.TWITTER:Ie=P.W;break;default:const{oauthIdToken:Ge,oauthAccessToken:Et,oauthTokenSecret:Ne,pendingToken:tt,nonce:Dt}=$;return Et||Ne||Ge||tt?tt?H.startsWith("saml.")?P.aL._create(H,tt):P.J._fromParams({providerId:H,signInMethod:H,pendingToken:tt,idToken:Ge,accessToken:Et}):new P.U(H).credential({idToken:Ge,accessToken:Et,rawNonce:Dt}):null}return te instanceof oe.ZR?Ie.credentialFromError(te):Ie.credentialFromResult(te)}function Dn(te,$){return $.catch(H=>{throw H instanceof oe.ZR&&function Vr(te,$){var H,Ie;const Ge=null===(H=$.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Ie=$)||void 0===Ie?void 0:Ie.code))$.resolver=new G(te,P.an(te,$));else if(Ge){const Et=bn($),Ne=$;Et&&(Ne.credential=Et,Ne.tenantId=Ge.tenantId||void 0,Ne.email=Ge.email||void 0,Ne.phoneNumber=Ge.phoneNumber||void 0)}}(te,H),H}).then(H=>{const Ge=H.user;return{operationType:H.operationType,credential:Rt(H),additionalUserInfo:P.al(H),user:W.getOrCreate(Ge)}})}function on(te,$){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,m.Z)(function*(te,$){const H=yield $;return{verificationId:H.verificationId,confirm:Ie=>Dn(te,H.confirm(Ie))}})).apply(this,arguments)}class G{constructor($,H){this.resolver=H,this.auth=function lr(te){return te.wrapped()}($)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn($){return Dn(Ti(this.auth),this.resolver.resolveSignIn($))}}class W{constructor($){this._delegate=$,this.multiFactor=P.ao($)}static getOrCreate($){return W.USER_MAP.has($)||W.USER_MAP.set($,new W($)),W.USER_MAP.get($)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult($){return this._delegate.getIdTokenResult($)}getIdToken($){return this._delegate.getIdToken($)}linkAndRetrieveDataWithCredential($){return this.linkWithCredential($)}linkWithCredential($){var H=this;return(0,m.Z)(function*(){return Dn(H.auth,P.Z(H._delegate,$))})()}linkWithPhoneNumber($,H){var Ie=this;return(0,m.Z)(function*(){return on(Ie.auth,P.l(Ie._delegate,$,H))})()}linkWithPopup($){var H=this;return(0,m.Z)(function*(){return Dn(H.auth,P.d(H._delegate,$,ct))})()}linkWithRedirect($){var H=this;return(0,m.Z)(function*(){return yield Cn(P.aE(H.auth)),P.g(H._delegate,$,ct)})()}reauthenticateAndRetrieveDataWithCredential($){return this.reauthenticateWithCredential($)}reauthenticateWithCredential($){var H=this;return(0,m.Z)(function*(){return Dn(H.auth,P._(H._delegate,$))})()}reauthenticateWithPhoneNumber($,H){return on(this.auth,P.r(this._delegate,$,H))}reauthenticateWithPopup($){return Dn(this.auth,P.e(this._delegate,$,ct))}reauthenticateWithRedirect($){var H=this;return(0,m.Z)(function*(){return yield Cn(P.aE(H.auth)),P.h(H._delegate,$,ct)})()}sendEmailVerification($){return P.ab(this._delegate,$)}unlink($){var H=this;return(0,m.Z)(function*(){return yield P.ak(H._delegate,$),H})()}updateEmail($){return P.ag(this._delegate,$)}updatePassword($){return P.ah(this._delegate,$)}updatePhoneNumber($){return P.u(this._delegate,$)}updateProfile($){return P.af(this._delegate,$)}verifyBeforeUpdateEmail($,H){return P.ac(this._delegate,$,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}W.USER_MAP=new WeakMap;const j=P.ax;let K=(()=>{class te{constructor(H,Ie){if(this.app=H,Ie.isInitialized())return this._delegate=Ie.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ge}=H.options;j(Ge,"invalid-api-key",{appName:H.name}),j(Ge,"invalid-api-key",{appName:H.name});const Et=typeof window<"u"?ct:void 0;this._delegate=Ie.initialize({options:{persistence:Le(Ge,H.name),popupRedirectResolver:Et}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?W.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,Ie){P.G(this._delegate,H,Ie)}applyActionCode(H){return P.a2(this._delegate,H)}checkActionCode(H){return P.a3(this._delegate,H)}confirmPasswordReset(H,Ie){return P.a1(this._delegate,H,Ie)}createUserWithEmailAndPassword(H,Ie){var Ge=this;return(0,m.Z)(function*(){return Dn(Ge._delegate,P.a5(Ge._delegate,H,Ie))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return P.aa(this._delegate,H)}isSignInWithEmailLink(H){return P.a8(this._delegate,H)}getRedirectResult(){var H=this;return(0,m.Z)(function*(){j(jn(),H._delegate,"operation-not-supported-in-this-environment");const Ie=yield P.j(H._delegate,ct);return Ie?Dn(H._delegate,Promise.resolve(Ie)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function hn(te,$){(0,P.aE)(te)._logFramework($)}(this._delegate,H)}onAuthStateChanged(H,Ie,Ge){const{next:Et,error:Ne,complete:tt}=Z(H,Ie,Ge);return this._delegate.onAuthStateChanged(Et,Ne,tt)}onIdTokenChanged(H,Ie,Ge){const{next:Et,error:Ne,complete:tt}=Z(H,Ie,Ge);return this._delegate.onIdTokenChanged(Et,Ne,tt)}sendSignInLinkToEmail(H,Ie){return P.a7(this._delegate,H,Ie)}sendPasswordResetEmail(H,Ie){return P.a0(this._delegate,H,Ie||void 0)}setPersistence(H){var Ie=this;return(0,m.Z)(function*(){let Ge;switch(function ar(te,$){or(Object.values(Yt).includes($),te,"invalid-persistence-type"),(0,oe.b$)()?or($!==Yt.SESSION,te,"unsupported-persistence-type"):(0,oe.UG)()?or($===Yt.NONE,te,"unsupported-persistence-type"):Di()?or($===Yt.NONE||$===Yt.LOCAL&&(0,oe.hl)(),te,"unsupported-persistence-type"):or($===Yt.NONE||hi(),te,"unsupported-persistence-type")}(Ie._delegate,H),H){case Yt.SESSION:Ge=P.a;break;case Yt.LOCAL:Ge=(yield P.ay(P.i)._isAvailable())?P.i:P.b;break;case Yt.NONE:Ge=P.L;break;default:return P.at("argument-error",{appName:Ie._delegate.name})}return Ie._delegate.setPersistence(Ge)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return Dn(this._delegate,P.X(this._delegate))}signInWithCredential(H){return Dn(this._delegate,P.Y(this._delegate,H))}signInWithCustomToken(H){return Dn(this._delegate,P.$(this._delegate,H))}signInWithEmailAndPassword(H,Ie){return Dn(this._delegate,P.a6(this._delegate,H,Ie))}signInWithEmailLink(H,Ie){return Dn(this._delegate,P.a9(this._delegate,H,Ie))}signInWithPhoneNumber(H,Ie){return on(this._delegate,P.s(this._delegate,H,Ie))}signInWithPopup(H){var Ie=this;return(0,m.Z)(function*(){return j(jn(),Ie._delegate,"operation-not-supported-in-this-environment"),Dn(Ie._delegate,P.c(Ie._delegate,H,ct))})()}signInWithRedirect(H){var Ie=this;return(0,m.Z)(function*(){return j(jn(),Ie._delegate,"operation-not-supported-in-this-environment"),yield Cn(Ie._delegate),P.f(Ie._delegate,H,ct)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return P.a4(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return te.Persistence=Yt,te})();function Z(te,$,H){let Ie=te;"function"!=typeof te&&({next:Ie,error:$,complete:H}=te);const Ge=Ie;return{next:Ne=>Ge(Ne&&W.getOrCreate(Ne)),error:$,complete:H}}function Le(te,$){const H=function ss(te,$){const H=zt();if(!H)return[];const Ie=P.az(Ur,te,$);switch(H.getItem(Ie)){case Yt.NONE:return[P.L];case Yt.LOCAL:return[P.i,P.a];case Yt.SESSION:return[P.a];default:return[]}}(te,$);if(typeof self<"u"&&!H.includes(P.i)&&H.push(P.i),typeof window<"u")for(const Ie of[P.b,P.a])H.includes(Ie)||H.push(Ie);return H.includes(P.L)||H.push(P.L),H}class We{constructor(){this.providerId="phone",this._delegate=new P.P(Ti(B.Z.auth()))}static credential($,H){return P.P.credential($,H)}verifyPhoneNumber($,H){return this._delegate.verifyPhoneNumber($,H)}unwrap(){return this._delegate}}We.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,We.PROVIDER_ID=P.P.PROVIDER_ID;const Ct=P.ax;class an{constructor($,H,Ie=B.Z.app()){var Ge;Ct(null===(Ge=Ie.options)||void 0===Ge?void 0:Ge.apiKey,"invalid-api-key",{appName:Ie.name}),this._delegate=new P.R($,H,Ie.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function cr(te){te.INTERNAL.registerComponent(new ge.wA("auth-compat",$=>{const H=$.getProvider("app-compat").getImmediate(),Ie=$.getProvider("auth");return new K(H,Ie)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:We,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:an,TwitterAuthProvider:P.W,Auth:K,AuthCredential:P.H,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),te.registerVersion("@firebase/auth-compat","0.2.18")}(B.Z)},9751:(ht,ke,L)=>{L.d(ke,{y:()=>fe});var m=L(930),B=L(727),P=L(8822),oe=L(9635),ce=L(2416),_e=L(576),ge=L(2806);let fe=(()=>{class X{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const Se=new X;return Se.source=this,Se.operator=Ue,Se}subscribe(Ue,Se,it){const Ce=function z(X){return X&&X instanceof m.Lv||function q(X){return X&&(0,_e.m)(X.next)&&(0,_e.m)(X.error)&&(0,_e.m)(X.complete)}(X)&&(0,B.Nn)(X)}(Ue)?Ue:new m.Hp(Ue,Se,it);return(0,ge.x)(()=>{const{operator:me,source:et}=this;Ce.add(me?me.call(Ce,et):et?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(Se){Ue.error(Se)}}forEach(Ue,Se){return new(Se=we(Se))((it,Ce)=>{const me=new m.Hp({next:et=>{try{Ue(et)}catch(Xe){Ce(Xe),me.unsubscribe()}},error:Ce,complete:it});this.subscribe(me)})}_subscribe(Ue){var Se;return null===(Se=this.source)||void 0===Se?void 0:Se.subscribe(Ue)}[P.L](){return this}pipe(...Ue){return(0,oe.U)(Ue)(this)}toPromise(Ue){return new(Ue=we(Ue))((Se,it)=>{let Ce;this.subscribe(me=>Ce=me,me=>it(me),()=>Se(Ce))})}}return X.create=He=>new X(He),X})();function we(X){var He;return null!==(He=X??ce.v.Promise)&&void 0!==He?He:Promise}},7579:(ht,ke,L)=>{L.d(ke,{x:()=>ge});var m=L(9751),B=L(727);const oe=(0,L(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=L(8737),_e=L(2806);let ge=(()=>{class we extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const X=new fe(this,this);return X.operator=z,X}_throwIfClosed(){if(this.closed)throw new oe}next(z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(z)}})}error(z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:X}=this;for(;X.length;)X.shift().error(z)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:X,isStopped:He,observers:Ue}=this;return X||He?B.Lc:(this.currentObservers=null,Ue.push(z),new B.w0(()=>{this.currentObservers=null,(0,ce.P)(Ue,z)}))}_checkFinalizedStatuses(z){const{hasError:X,thrownError:He,isStopped:Ue}=this;X?z.error(He):Ue&&z.complete()}asObservable(){const z=new m.y;return z.source=this,z}}return we.create=(q,z)=>new fe(q,z),we})();class fe extends ge{constructor(q,z){super(),this.destination=q,this.source=z}next(q){var z,X;null===(X=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===X||X.call(z,q)}error(q){var z,X;null===(X=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===X||X.call(z,q)}complete(){var q,z;null===(z=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===z||z.call(q)}_subscribe(q){var z,X;return null!==(X=null===(z=this.source)||void 0===z?void 0:z.subscribe(q))&&void 0!==X?X:B.Lc}}},930:(ht,ke,L)=>{L.d(ke,{Hp:()=>it,Lv:()=>X});var m=L(576),B=L(727),P=L(2416),oe=L(7849),ce=L(5032);const _e=we("C",void 0,void 0);function we(Ve,Oe,Ae){return{kind:Ve,value:Oe,error:Ae}}var q=L(3410),z=L(2806);class X extends B.w0{constructor(Oe){super(),this.isStopped=!1,Oe?(this.destination=Oe,(0,B.Nn)(Oe)&&Oe.add(this)):this.destination=Xe}static create(Oe,Ae,ze){return new it(Oe,Ae,ze)}next(Oe){this.isStopped?et(function fe(Ve){return we("N",Ve,void 0)}(Oe),this):this._next(Oe)}error(Oe){this.isStopped?et(function ge(Ve){return we("E",void 0,Ve)}(Oe),this):(this.isStopped=!0,this._error(Oe))}complete(){this.isStopped?et(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Oe){this.destination.next(Oe)}_error(Oe){try{this.destination.error(Oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ue(Ve,Oe){return He.call(Ve,Oe)}class Se{constructor(Oe){this.partialObserver=Oe}next(Oe){const{partialObserver:Ae}=this;if(Ae.next)try{Ae.next(Oe)}catch(ze){Ce(ze)}}error(Oe){const{partialObserver:Ae}=this;if(Ae.error)try{Ae.error(Oe)}catch(ze){Ce(ze)}else Ce(Oe)}complete(){const{partialObserver:Oe}=this;if(Oe.complete)try{Oe.complete()}catch(Ae){Ce(Ae)}}}class it extends X{constructor(Oe,Ae,ze){let ie;if(super(),(0,m.m)(Oe)||!Oe)ie={next:Oe??void 0,error:Ae??void 0,complete:ze??void 0};else{let ye;this&&P.v.useDeprecatedNextContext?(ye=Object.create(Oe),ye.unsubscribe=()=>this.unsubscribe(),ie={next:Oe.next&&Ue(Oe.next,ye),error:Oe.error&&Ue(Oe.error,ye),complete:Oe.complete&&Ue(Oe.complete,ye)}):ie=Oe}this.destination=new Se(ie)}}function Ce(Ve){P.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Ve):(0,oe.h)(Ve)}function et(Ve,Oe){const{onStoppedNotification:Ae}=P.v;Ae&&q.z.setTimeout(()=>Ae(Ve,Oe))}const Xe={closed:!0,next:ce.Z,error:function me(Ve){throw Ve},complete:ce.Z}},727:(ht,ke,L)=>{L.d(ke,{Lc:()=>_e,w0:()=>ce,Nn:()=>ge});var m=L(576);const P=(0,L(3888).d)(we=>function(z){we(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((X,He)=>`${He+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var oe=L(8737);class ce{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Ue of z)Ue.remove(this);else z.remove(this);const{initialTeardown:X}=this;if((0,m.m)(X))try{X()}catch(Ue){q=Ue instanceof P?Ue.errors:[Ue]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ue of He)try{fe(Ue)}catch(Se){q=q??[],Se instanceof P?q=[...q,...Se.errors]:q.push(Se)}}if(q)throw new P(q)}}add(q){var z;if(q&&q!==this)if(this.closed)fe(q);else{if(q instanceof ce){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(q)}}_hasParent(q){const{_parentage:z}=this;return z===q||Array.isArray(z)&&z.includes(q)}_addParent(q){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(q),z):z?[z,q]:q}_removeParent(q){const{_parentage:z}=this;z===q?this._parentage=null:Array.isArray(z)&&(0,oe.P)(z,q)}remove(q){const{_finalizers:z}=this;z&&(0,oe.P)(z,q),q instanceof ce&&q._removeParent(this)}}ce.EMPTY=(()=>{const we=new ce;return we.closed=!0,we})();const _e=ce.EMPTY;function ge(we){return we instanceof ce||we&&"closed"in we&&(0,m.m)(we.remove)&&(0,m.m)(we.add)&&(0,m.m)(we.unsubscribe)}function fe(we){(0,m.m)(we)?we():we.unsubscribe()}},2416:(ht,ke,L)=>{L.d(ke,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,ke,L)=>{L.d(ke,{E:()=>B});const B=new(L(9751).y)(ce=>ce.complete())},8996:(ht,ke,L)=>{L.d(ke,{D:()=>Oe});var m=L(8421),B=L(5363),P=L(9468),_e=L(9751),fe=L(2202),we=L(576),q=L(9672);function X(Ae,ze){if(!Ae)throw new Error("Iterable cannot be null");return new _e.y(ie=>{(0,q.f)(ie,ze,()=>{const ye=Ae[Symbol.asyncIterator]();(0,q.f)(ie,ze,()=>{ye.next().then(Te=>{Te.done?ie.complete():ie.next(Te.value)})},0,!0)})})}var He=L(3670),Ue=L(8239),Se=L(1144),it=L(6495),Ce=L(2206),me=L(4532),et=L(3260);function Oe(Ae,ze){return ze?function Ve(Ae,ze){if(null!=Ae){if((0,He.c)(Ae))return function oe(Ae,ze){return(0,m.Xf)(Ae).pipe((0,P.R)(ze),(0,B.Q)(ze))}(Ae,ze);if((0,Se.z)(Ae))return function ge(Ae,ze){return new _e.y(ie=>{let ye=0;return ze.schedule(function(){ye===Ae.length?ie.complete():(ie.next(Ae[ye++]),ie.closed||this.schedule())})})}(Ae,ze);if((0,Ue.t)(Ae))return function ce(Ae,ze){return(0,m.Xf)(Ae).pipe((0,P.R)(ze),(0,B.Q)(ze))}(Ae,ze);if((0,Ce.D)(Ae))return X(Ae,ze);if((0,it.T)(Ae))return function z(Ae,ze){return new _e.y(ie=>{let ye;return(0,q.f)(ie,ze,()=>{ye=Ae[fe.h](),(0,q.f)(ie,ze,()=>{let Te,J;try{({value:Te,done:J}=ye.next())}catch(se){return void ie.error(se)}J?ie.complete():ie.next(Te)},0,!0)}),()=>(0,we.m)(ye?.return)&&ye.return()})}(Ae,ze);if((0,et.L)(Ae))return function Xe(Ae,ze){return X((0,et.Q)(Ae),ze)}(Ae,ze)}throw(0,me.z)(Ae)}(Ae,ze):(0,m.Xf)(Ae)}},8421:(ht,ke,L)=>{L.d(ke,{Xf:()=>He});var m=L(655),B=L(1144),P=L(8239),oe=L(9751),ce=L(3670),_e=L(2206),ge=L(4532),fe=L(6495),we=L(3260),q=L(576),z=L(7849),X=L(8822);function He(Ve){if(Ve instanceof oe.y)return Ve;if(null!=Ve){if((0,ce.c)(Ve))return function Ue(Ve){return new oe.y(Oe=>{const Ae=Ve[X.L]();if((0,q.m)(Ae.subscribe))return Ae.subscribe(Oe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ve);if((0,B.z)(Ve))return function Se(Ve){return new oe.y(Oe=>{for(let Ae=0;Ae<Ve.length&&!Oe.closed;Ae++)Oe.next(Ve[Ae]);Oe.complete()})}(Ve);if((0,P.t)(Ve))return function it(Ve){return new oe.y(Oe=>{Ve.then(Ae=>{Oe.closed||(Oe.next(Ae),Oe.complete())},Ae=>Oe.error(Ae)).then(null,z.h)})}(Ve);if((0,_e.D)(Ve))return me(Ve);if((0,fe.T)(Ve))return function Ce(Ve){return new oe.y(Oe=>{for(const Ae of Ve)if(Oe.next(Ae),Oe.closed)return;Oe.complete()})}(Ve);if((0,we.L)(Ve))return function et(Ve){return me((0,we.Q)(Ve))}(Ve)}throw(0,ge.z)(Ve)}function me(Ve){return new oe.y(Oe=>{(function Xe(Ve,Oe){var Ae,ze,ie,ye;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,m.KL)(Ve);!(ze=yield Ae.next()).done;)if(Oe.next(ze.value),Oe.closed)return}catch(Te){ie={error:Te}}finally{try{ze&&!ze.done&&(ye=Ae.return)&&(yield ye.call(Ae))}finally{if(ie)throw ie.error}}Oe.complete()})})(Ve,Oe).catch(Ae=>Oe.error(Ae))})}},6451:(ht,ke,L)=>{L.d(ke,{T:()=>_e});var m=L(8189),B=L(8421),P=L(515),oe=L(7669),ce=L(8996);function _e(...ge){const fe=(0,oe.yG)(ge),we=(0,oe._6)(ge,1/0),q=ge;return q.length?1===q.length?(0,B.Xf)(q[0]):(0,m.J)(we)((0,ce.D)(q,fe)):P.E}},5403:(ht,ke,L)=>{L.d(ke,{x:()=>B});var m=L(930);function B(oe,ce,_e,ge,fe){return new P(oe,ce,_e,ge,fe)}class P extends m.Lv{constructor(ce,_e,ge,fe,we,q){super(ce),this.onFinalize=we,this.shouldUnsubscribe=q,this._next=_e?function(z){try{_e(z)}catch(X){ce.error(X)}}:super._next,this._error=fe?function(z){try{fe(z)}catch(X){ce.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(z){ce.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},4004:(ht,ke,L)=>{L.d(ke,{U:()=>P});var m=L(4482),B=L(5403);function P(oe,ce){return(0,m.e)((_e,ge)=>{let fe=0;_e.subscribe((0,B.x)(ge,we=>{ge.next(oe.call(ce,we,fe++))}))})}},8189:(ht,ke,L)=>{L.d(ke,{J:()=>P});var m=L(5577),B=L(4671);function P(oe=1/0){return(0,m.z)(B.y,oe)}},5577:(ht,ke,L)=>{L.d(ke,{z:()=>fe});var m=L(4004),B=L(8421),P=L(4482),oe=L(9672),ce=L(5403),ge=L(576);function fe(we,q,z=1/0){return(0,ge.m)(q)?fe((X,He)=>(0,m.U)((Ue,Se)=>q(X,Ue,He,Se))((0,B.Xf)(we(X,He))),z):("number"==typeof q&&(z=q),(0,P.e)((X,He)=>function _e(we,q,z,X,He,Ue,Se,it){const Ce=[];let me=0,et=0,Xe=!1;const Ve=()=>{Xe&&!Ce.length&&!me&&q.complete()},Oe=ze=>me<X?Ae(ze):Ce.push(ze),Ae=ze=>{Ue&&q.next(ze),me++;let ie=!1;(0,B.Xf)(z(ze,et++)).subscribe((0,ce.x)(q,ye=>{He?.(ye),Ue?Oe(ye):q.next(ye)},()=>{ie=!0},void 0,()=>{if(ie)try{for(me--;Ce.length&&me<X;){const ye=Ce.shift();Se?(0,oe.f)(q,Se,()=>Ae(ye)):Ae(ye)}Ve()}catch(ye){q.error(ye)}}))};return we.subscribe((0,ce.x)(q,Oe,()=>{Xe=!0,Ve()})),()=>{it?.()}}(X,He,we,z)))}},5363:(ht,ke,L)=>{L.d(ke,{Q:()=>oe});var m=L(9672),B=L(4482),P=L(5403);function oe(ce,_e=0){return(0,B.e)((ge,fe)=>{ge.subscribe((0,P.x)(fe,we=>(0,m.f)(fe,ce,()=>fe.next(we),_e),()=>(0,m.f)(fe,ce,()=>fe.complete(),_e),we=>(0,m.f)(fe,ce,()=>fe.error(we),_e)))})}},3099:(ht,ke,L)=>{L.d(ke,{B:()=>ce});var m=L(8421),B=L(7579),P=L(930),oe=L(4482);function ce(ge={}){const{connector:fe=(()=>new B.x),resetOnError:we=!0,resetOnComplete:q=!0,resetOnRefCountZero:z=!0}=ge;return X=>{let He,Ue,Se,it=0,Ce=!1,me=!1;const et=()=>{Ue?.unsubscribe(),Ue=void 0},Xe=()=>{et(),He=Se=void 0,Ce=me=!1},Ve=()=>{const Oe=He;Xe(),Oe?.unsubscribe()};return(0,oe.e)((Oe,Ae)=>{it++,!me&&!Ce&&et();const ze=Se=Se??fe();Ae.add(()=>{it--,0===it&&!me&&!Ce&&(Ue=_e(Ve,z))}),ze.subscribe(Ae),!He&&it>0&&(He=new P.Hp({next:ie=>ze.next(ie),error:ie=>{me=!0,et(),Ue=_e(Xe,we,ie),ze.error(ie)},complete:()=>{Ce=!0,et(),Ue=_e(Xe,q),ze.complete()}}),(0,m.Xf)(Oe).subscribe(He))})(X)}}function _e(ge,fe,...we){if(!0===fe)return void ge();if(!1===fe)return;const q=new P.Hp({next:()=>{q.unsubscribe(),ge()}});return fe(...we).subscribe(q)}},9468:(ht,ke,L)=>{L.d(ke,{R:()=>B});var m=L(4482);function B(P,oe=0){return(0,m.e)((ce,_e)=>{_e.add(P.schedule(()=>ce.subscribe(_e),oe))})}},8505:(ht,ke,L)=>{L.d(ke,{b:()=>ce});var m=L(576),B=L(4482),P=L(5403),oe=L(4671);function ce(_e,ge,fe){const we=(0,m.m)(_e)||ge||fe?{next:_e,error:ge,complete:fe}:_e;return we?(0,B.e)((q,z)=>{var X;null===(X=we.subscribe)||void 0===X||X.call(we);let He=!0;q.subscribe((0,P.x)(z,Ue=>{var Se;null===(Se=we.next)||void 0===Se||Se.call(we,Ue),z.next(Ue)},()=>{var Ue;He=!1,null===(Ue=we.complete)||void 0===Ue||Ue.call(we),z.complete()},Ue=>{var Se;He=!1,null===(Se=we.error)||void 0===Se||Se.call(we,Ue),z.error(Ue)},()=>{var Ue,Se;He&&(null===(Ue=we.unsubscribe)||void 0===Ue||Ue.call(we)),null===(Se=we.finalize)||void 0===Se||Se.call(we)}))}):oe.y}},4408:(ht,ke,L)=>{L.d(ke,{o:()=>ce});var m=L(727);class B extends m.w0{constructor(ge,fe){super()}schedule(ge,fe=0){return this}}const P={setInterval(_e,ge,...fe){const{delegate:we}=P;return we?.setInterval?we.setInterval(_e,ge,...fe):setInterval(_e,ge,...fe)},clearInterval(_e){const{delegate:ge}=P;return(ge?.clearInterval||clearInterval)(_e)},delegate:void 0};var oe=L(8737);class ce extends B{constructor(ge,fe){super(ge,fe),this.scheduler=ge,this.work=fe,this.pending=!1}schedule(ge,fe=0){if(this.closed)return this;this.state=ge;const we=this.id,q=this.scheduler;return null!=we&&(this.id=this.recycleAsyncId(q,we,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(q,this.id,fe),this}requestAsyncId(ge,fe,we=0){return P.setInterval(ge.flush.bind(ge,this),we)}recycleAsyncId(ge,fe,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return fe;P.clearInterval(fe)}execute(ge,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(ge,fe);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,fe){let q,we=!1;try{this.work(ge)}catch(z){we=!0,q=z||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:ge,scheduler:fe}=this,{actions:we}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(we,this),null!=ge&&(this.id=this.recycleAsyncId(fe,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,ke,L)=>{L.d(ke,{v:()=>P});var m=L(6063);class B{constructor(ce,_e=B.now){this.schedulerActionCtor=ce,this.now=_e}schedule(ce,_e=0,ge){return new this.schedulerActionCtor(this,ce).schedule(ge,_e)}}B.now=m.l.now;class P extends B{constructor(ce,_e=B.now){super(ce,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ce){const{actions:_e}=this;if(this._active)return void _e.push(ce);let ge;this._active=!0;do{if(ge=ce.execute(ce.state,ce.delay))break}while(ce=_e.shift());if(this._active=!1,ge){for(;ce=_e.shift();)ce.unsubscribe();throw ge}}}},4986:(ht,ke,L)=>{L.d(ke,{z:()=>P});var m=L(4408);const P=new(L(7565).v)(m.o)},6063:(ht,ke,L)=>{L.d(ke,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(ht,ke,L)=>{L.d(ke,{z:()=>m});const m={setTimeout(B,P,...oe){const{delegate:ce}=m;return ce?.setTimeout?ce.setTimeout(B,P,...oe):setTimeout(B,P,...oe)},clearTimeout(B){const{delegate:P}=m;return(P?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(ht,ke,L)=>{L.d(ke,{h:()=>B});const B=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,ke,L)=>{L.d(ke,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ht,ke,L)=>{L.d(ke,{_6:()=>_e,jO:()=>oe,yG:()=>ce});var m=L(576);function P(ge){return ge[ge.length-1]}function oe(ge){return(0,m.m)(P(ge))?ge.pop():void 0}function ce(ge){return function B(ge){return ge&&(0,m.m)(ge.schedule)}(P(ge))?ge.pop():void 0}function _e(ge,fe){return"number"==typeof P(ge)?ge.pop():fe}},8737:(ht,ke,L)=>{function m(B,P){if(B){const oe=B.indexOf(P);0<=oe&&B.splice(oe,1)}}L.d(ke,{P:()=>m})},3888:(ht,ke,L)=>{function m(B){const oe=B(ce=>{Error.call(ce),ce.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}L.d(ke,{d:()=>m})},2806:(ht,ke,L)=>{L.d(ke,{O:()=>oe,x:()=>P});var m=L(2416);let B=null;function P(ce){if(m.v.useDeprecatedSynchronousErrorHandling){const _e=!B;if(_e&&(B={errorThrown:!1,error:null}),ce(),_e){const{errorThrown:ge,error:fe}=B;if(B=null,ge)throw fe}}else ce()}function oe(ce){m.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=ce)}},9672:(ht,ke,L)=>{function m(B,P,oe,ce=0,_e=!1){const ge=P.schedule(function(){oe(),_e?B.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(B.add(ge),!_e)return ge}L.d(ke,{f:()=>m})},4671:(ht,ke,L)=>{function m(B){return B}L.d(ke,{y:()=>m})},1144:(ht,ke,L)=>{L.d(ke,{z:()=>m});const m=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(ht,ke,L)=>{L.d(ke,{D:()=>B});var m=L(576);function B(P){return Symbol.asyncIterator&&(0,m.m)(P?.[Symbol.asyncIterator])}},576:(ht,ke,L)=>{function m(B){return"function"==typeof B}L.d(ke,{m:()=>m})},3670:(ht,ke,L)=>{L.d(ke,{c:()=>P});var m=L(8822),B=L(576);function P(oe){return(0,B.m)(oe[m.L])}},6495:(ht,ke,L)=>{L.d(ke,{T:()=>P});var m=L(2202),B=L(576);function P(oe){return(0,B.m)(oe?.[m.h])}},8239:(ht,ke,L)=>{L.d(ke,{t:()=>B});var m=L(576);function B(P){return(0,m.m)(P?.then)}},3260:(ht,ke,L)=>{L.d(ke,{L:()=>oe,Q:()=>P});var m=L(655),B=L(576);function P(ce){return(0,m.FC)(this,arguments,function*(){const ge=ce.getReader();try{for(;;){const{value:fe,done:we}=yield(0,m.qq)(ge.read());if(we)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(fe)}}finally{ge.releaseLock()}})}function oe(ce){return(0,B.m)(ce?.getReader)}},4482:(ht,ke,L)=>{L.d(ke,{A:()=>B,e:()=>P});var m=L(576);function B(oe){return(0,m.m)(oe?.lift)}function P(oe){return ce=>{if(B(ce))return ce.lift(function(_e){try{return oe(_e,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ht,ke,L)=>{function m(){}L.d(ke,{Z:()=>m})},9635:(ht,ke,L)=>{L.d(ke,{U:()=>P,z:()=>B});var m=L(4671);function B(...oe){return P(oe)}function P(oe){return 0===oe.length?m.y:1===oe.length?oe[0]:function(_e){return oe.reduce((ge,fe)=>fe(ge),_e)}}},7849:(ht,ke,L)=>{L.d(ke,{h:()=>P});var m=L(2416),B=L(3410);function P(oe){B.z.setTimeout(()=>{const{onUnhandledError:ce}=m.v;if(!ce)throw oe;ce(oe)})}},4532:(ht,ke,L)=>{function m(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(ke,{z:()=>m})},655:(ht,ke,L)=>{function oe(J,se){var ae={};for(var ve in J)Object.prototype.hasOwnProperty.call(J,ve)&&se.indexOf(ve)<0&&(ae[ve]=J[ve]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var de=0;for(ve=Object.getOwnPropertySymbols(J);de<ve.length;de++)se.indexOf(ve[de])<0&&Object.prototype.propertyIsEnumerable.call(J,ve[de])&&(ae[ve[de]]=J[ve[de]])}return ae}function fe(J,se,ae,ve){return new(ae||(ae=Promise))(function(je,wt){function Zt(hn){try{qe(ve.next(hn))}catch(Bn){wt(Bn)}}function $t(hn){try{qe(ve.throw(hn))}catch(Bn){wt(Bn)}}function qe(hn){hn.done?je(hn.value):function de(je){return je instanceof ae?je:new ae(function(wt){wt(je)})}(hn.value).then(Zt,$t)}qe((ve=ve.apply(J,se||[])).next())})}function Ce(J){return this instanceof Ce?(this.v=J,this):new Ce(J)}function me(J,se,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,ve=ae.apply(J,se||[]),je=[];return de={},wt("next"),wt("throw"),wt("return"),de[Symbol.asyncIterator]=function(){return this},de;function wt(fn){ve[fn]&&(de[fn]=function(Qt){return new Promise(function(Ht,Jt){je.push([fn,Qt,Ht,Jt])>1||Zt(fn,Qt)})})}function Zt(fn,Qt){try{!function $t(fn){fn.value instanceof Ce?Promise.resolve(fn.value.v).then(qe,hn):Bn(je[0][2],fn)}(ve[fn](Qt))}catch(Ht){Bn(je[0][3],Ht)}}function qe(fn){Zt("next",fn)}function hn(fn){Zt("throw",fn)}function Bn(fn,Qt){fn(Qt),je.shift(),je.length&&Zt(je[0][0],je[0][1])}}function Xe(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,se=J[Symbol.asyncIterator];return se?se.call(J):(J=function X(J){var se="function"==typeof Symbol&&Symbol.iterator,ae=se&&J[se],ve=0;if(ae)return ae.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&ve>=J.length&&(J=void 0),{value:J&&J[ve++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ae={},ve("next"),ve("throw"),ve("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function ve(je){ae[je]=J[je]&&function(wt){return new Promise(function(Zt,$t){!function de(je,wt,Zt,$t){Promise.resolve($t).then(function(qe){je({value:qe,done:Zt})},wt)}(Zt,$t,(wt=J[je](wt)).done,wt.value)})}}}L.d(ke,{FC:()=>me,KL:()=>Xe,_T:()=>oe,mG:()=>fe,qq:()=>Ce})},4650:(ht,ke,L)=>{L.d(ke,{$8M:()=>Hs,$Z:()=>Hg,AFp:()=>Ow,AaK:()=>fe,CHM:()=>go,CRH:()=>XC,CZH:()=>Ph,CqO:()=>hm,D6c:()=>p0,EJc:()=>Uw,EpF:()=>Av,F4k:()=>Qi,FYo:()=>Tf,FiY:()=>Pe,G48:()=>vA,GfV:()=>Sf,JOm:()=>ca,KtG:()=>Mu,LFG:()=>Hn,LSH:()=>wg,Lbi:()=>aA,Lck:()=>HS,MAs:()=>Nt,MMx:()=>km,NdJ:()=>fm,OlP:()=>Mt,Oqu:()=>Vv,PXZ:()=>bb,Q6J:()=>Cc,QGY:()=>dm,QP$:()=>$c,Qsj:()=>CE,R0b:()=>ts,RDi:()=>$_,Rgc:()=>Ah,SBq:()=>Df,Sil:()=>dA,Suo:()=>ww,TTD:()=>ls,TgZ:()=>Zn,X6Q:()=>t0,XFs:()=>pt,Xpm:()=>j,Xts:()=>Yi,Y36:()=>el,YKP:()=>RC,YNc:()=>Tv,Yjl:()=>te,Yz7:()=>Qt,ZZ4:()=>Mp,_UZ:()=>sh,_Vd:()=>ic,_c5:()=>f0,_uU:()=>Nn,aQg:()=>h0,c2e:()=>uA,cJS:()=>Jt,cg1:()=>Kv,dDg:()=>pA,deG:()=>Id,dqk:()=>Ze,eFA:()=>Zw,eoX:()=>Ib,f3M:()=>Kl,g9A:()=>Lw,h0i:()=>bh,hGG:()=>Bb,iGM:()=>vw,ifc:()=>zt,ip1:()=>Nh,kL8:()=>Zv,lG2:()=>cr,lqb:()=>rc,lri:()=>Gw,oAB:()=>Ct,q4F:()=>sy,qLn:()=>Ud,qZA:()=>Ye,rWj:()=>qc,s9C:()=>Rv,sBO:()=>wA,sIi:()=>Qf,s_b:()=>hu,soG:()=>Wc,tb:()=>i_,tp0:()=>ft,uIk:()=>Ec,vHH:()=>Se,vpe:()=>ko,wAp:()=>St,xp6:()=>Oy,z2F:()=>d_,zSh:()=>ty,zs3:()=>mr});var m=L(7579),B=L(727),P=L(9751),oe=L(6451),ce=L(3099);function _e(s){for(let o in s)if(s[o]===_e)return o;throw Error("Could not find renamed property on target object.")}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function we(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const q=_e({__forward_ref__:_e});function z(s){return s.__forward_ref__=z,s.toString=function(){return fe(this())},s}function X(s){return function He(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===z}(s)?s():s}class Se extends Error{constructor(o,u){super(function it(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Ce(s){return"string"==typeof s?s:null==s?"":String(s)}function Oe(s,o){throw new Se(-201,!1)}function $t(s,o){null==s&&function qe(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Qt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Jt(s){return{providers:s.providers||[],imports:s.imports||[]}}function En(s){return bi(s,hi)||bi(s,jn)}function bi(s,o){return s.hasOwnProperty(o)?s[o]:null}function is(s){return s&&(s.hasOwnProperty(Di)||s.hasOwnProperty($i))?s[Di]:null}const hi=_e({\u0275prov:_e}),Di=_e({\u0275inj:_e}),jn=_e({ngInjectableDef:_e}),$i=_e({ngInjectorDef:_e});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Fr;function Yt(s){const o=Fr;return Fr=s,o}function or(s,o,u){const c=En(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&pt.Optional?null:void 0!==o?o:void Oe(fe(s))}function ar(s){return{toString:s}.toString()}var Cn=(()=>((Cn=Cn||{})[Cn.OnPush=0]="OnPush",Cn[Cn.Default=1]="Default",Cn))(),zt=(()=>{return(s=zt||(zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",zt;var s})();const Ze=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),lr={},Rt=[],Vr=_e({\u0275cmp:_e}),bn=_e({\u0275dir:_e}),Dn=_e({\u0275pipe:_e}),on=_e({\u0275mod:_e}),Xn=_e({\u0275fac:_e}),G=_e({__NG_ELEMENT_ID__:_e});let W=0;function j(s){return ar(()=>{const u=!0===s.standalone,c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Cn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Rt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||zt.Emulated,id:"c"+W++,styles:s.styles||Rt,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.dependencies,y=s.features;return d.inputs=Xt(s.inputs,c),d.outputs=Xt(s.outputs),y&&y.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Z).filter(Le):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(Ie).filter(Le):null,d})}function Z(s){return $(s)||H(s)}function Le(s){return null!==s}const We={};function Ct(s){return ar(()=>{const o={type:s.type,bootstrap:s.bootstrap||Rt,declarations:s.declarations||Rt,imports:s.imports||Rt,exports:s.exports||Rt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(We[s.id]=s.type),o})}function Xt(s,o){if(null==s)return lr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=c,o&&(o[d]=f)}return u}const cr=j;function te(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function $(s){return s[Vr]||null}function H(s){return s[bn]||null}function Ie(s){return s[Dn]||null}function Ge(s,o){const u=s[on]||null;if(!u&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return u}function Sr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Br(s){return Array.isArray(s)&&!0===s[1]}function Sl(s){return 0!=(8&s.flags)}function co(s){return 2==(2&s.flags)}function Sa(s){return 1==(1&s.flags)}function fi(s){return null!==s.template}function bu(s){return 0!=(256&s[2])}function Si(s,o){return s.hasOwnProperty(Xn)?s[Xn]:null}class us{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function ls(){return ho}function ho(s){return s.type.prototype.ngOnChanges&&(s.setInput=od),ef}function ef(){const s=Su(this),o=s?.current;if(o){const u=s.previous;if(u===lr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function od(s,o,u,c){const d=Su(s)||function Ho(s,o){return s[Tu]=o}(s,{previous:lr,current:null}),f=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[u],C=y[E];f[E]=new us(C&&C.currentValue,o,y===lr),s[c]=o}ls.ngInherit=!0;const Tu="__ngSimpleChanges__";function Su(s){return s[Tu]||null}function Rn(s){for(;Array.isArray(s);)s=s[0];return s}function fr(s,o){return Rn(o[s.index])}function fo(s,o){return s.data[o]}function pr(s,o){const u=o[s];return Sr(u)?u:u[0]}function Wo(s){return 4==(4&s[2])}function Us(s){return 64==(64&s[2])}function Ai(s,o){return null==o?null:s[o]}function ds(s){s[18]=0}function zo(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const lt={lFrame:hd(null),bindingsEnabled:!0};function hs(){return lt.bindingsEnabled}function Me(){return lt.lFrame.lView}function Gt(){return lt.lFrame.tView}function go(s){return lt.lFrame.contextLView=s,s[8]}function Mu(s){return lt.lFrame.contextLView=null,s}function Tn(){let s=Nu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Nu(){return lt.lFrame.currentTNode}function zi(s,o){const u=lt.lFrame;u.currentTNode=s,u.isParent=o}function mo(){return lt.lFrame.isParent}function gs(){return lt.lFrame.bindingIndex++}function ku(s,o){const u=lt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ou(o)}function Ou(s){lt.lFrame.currentDirectiveIndex=s}function dd(){return lt.lFrame.currentQueryIndex}function yo(s){lt.lFrame.currentQueryIndex=s}function rf(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Bs(s,o,u){if(u&pt.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&pt.Host||(d=rf(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const c=lt.lFrame=ka();return c.currentTNode=o,c.lView=s,!0}function Ol(s){const o=ka(),u=s[1];lt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function ka(){const s=lt.lFrame,o=null===s?null:s.child;return null===o?hd(s):o}function hd(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Zo(){const s=lt.lFrame;return lt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const fd=Zo;function Lu(){const s=Zo();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Ir(){return lt.lFrame.selectedIndex}function Kr(s){lt.lFrame.selectedIndex=s}function Mn(){const s=lt.lFrame;return fo(s.tView,s.selectedIndex)}function md(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:M}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(u,M)}}function af(s,o,u){vo(s,o,3,u)}function Vu(s,o,u,c){(3&s[2])===u&&vo(s,o,u,c)}function _d(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function vo(s,o,u,c){const f=c??-1,y=o.length-1;let E=0;for(let C=void 0!==c?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=c&&E>=c)break}else o[C]<0&&(s[18]+=65536),(E<f||-1==f)&&(Ll(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Ll(s,o,u,c){const d=u[c]<0,f=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class _s{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Fa(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const f=u[c++],y=u[c++],E=u[c++];s.setAttribute(o,y,E,f)}else{const f=d,y=u[++c];Ua(f)?s.setProperty(o,f,y):s.setAttribute(o,f,y),c++}}return c}function Bu(s){return 3===s||4===s||6===s}function Ua(s){return 64===s.charCodeAt(0)}function Fl(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||lf(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function lf(s,o,u,c,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const E=s[f++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=f-1;break}}}for(;f<s.length;){const E=s[f];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[f+1]=d));if(c===s[f+1])return void(s[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==d&&s.splice(f++,0,d)}function cf(s){return-1!==s}function ju(s){return 32767&s}function $u(s,o){let u=function si(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Hu=!0;function Ul(s){const o=Hu;return Hu=s,o}let mn=0;const rt={};function Ar(s,o){const u=Vl(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,xr(c.data,s),xr(o,null),xr(c.blueprint,null));const d=Gu(s,o),f=s.injectorIndex;if(cf(d)){const y=ju(d),E=$u(d,o),C=E[1].data;for(let A=0;A<8;A++)o[f+A]=E[y+A]|C[y+A]}return o[f+8]=d,f}function xr(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Vl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Gu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=zu(d),null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Ba(s,o,u){!function oi(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(G)&&(c=u[G]),null==c&&(c=u[G]=mn++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function ja(s,o,u){if(u&pt.Optional)return s;Oe()}function $a(s,o,u,c){if(u&pt.Optional&&void 0===c&&(c=null),0==(u&(pt.Self|pt.Host))){const d=s[9],f=Yt(void 0);try{return d?d.get(o,c,u&pt.Optional):or(o,c,u&pt.Optional)}finally{Yt(f)}}return ja(c,0,u)}function xi(s,o,u,c=pt.Default,d){if(null!==s){if(1024&o[2]){const y=function Wu(s,o,u,c,d){let f=s,y=o;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const E=gt(f,y,u,c|pt.Self,rt);if(E!==rt)return E;let C=f.parent;if(!C){const A=y[21];if(A){const M=A.get(u,rt,c);if(M!==rt)return M}C=zu(y),y=y[15]}f=C}return d}(s,o,u,c,rt);if(y!==rt)return y}const f=gt(s,o,u,c,rt);if(f!==rt)return f}return $a(o,u,c,d)}function gt(s,o,u,c,d){const f=function Ha(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(G)?s[G]:void 0;return"number"==typeof o?o>=0?255&o:Ed:o}(u);if("function"==typeof f){if(!Bs(o,s,c))return c&pt.Host?ja(d,0,c):$a(o,u,c,d);try{const y=f(c);if(null!=y||c&pt.Optional)return y;Oe()}finally{fd()}}else if("number"==typeof f){let y=null,E=Vl(s,o),C=-1,A=c&pt.Host?o[16][6]:null;for((-1===E||c&pt.SkipSelf)&&(C=-1===E?Gu(s,o):o[E+8],-1!==C&&Qo(c,!1)?(y=o[1],E=ju(C),o=$u(C,o)):E=-1);-1!==E;){const M=o[1];if(zn(f,E,M.data)){const F=hf(E,o,u,y,c,A);if(F!==rt)return F}C=o[E+8],-1!==C&&Qo(c,o[1].data[E+8]===A)&&zn(f,E,o)?(y=M,E=ju(C),o=$u(C,o)):E=-1}}return d}function hf(s,o,u,c,d,f){const y=o[1],E=y.data[s+8],M=$s(E,y,u,null==c?co(E)&&Hu:c!=y&&0!=(3&E.type),d&pt.Host&&f===E);return null!==M?Yo(o,y,M,E):rt}function $s(s,o,u,c,d){const f=s.providerIndexes,y=o.data,E=1048575&f,C=s.directiveStart,M=f>>20,Y=d?E+M:s.directiveEnd;for(let re=c?E:E+M;re<Y;re++){const le=y[re];if(re<C&&u===le||re>=C&&le.type===u)return re}if(d){const re=y[C];if(re&&fi(re)&&re.type===u)return C}return null}function Yo(s,o,u,c){let d=s[u];const f=o.data;if(function js(s){return s instanceof _s}(d)){const y=d;y.resolving&&function et(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Se(-200,`Circular dependency in DI detected for ${s}${u}`)}(function me(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ce(s)}(f[u]));const E=Ul(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?Yt(y.injectImpl):null;Bs(s,c,pt.Default);try{d=s[u]=y.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function cg(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const y=ho(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==C&&Yt(C),Ul(E),y.resolving=!1,fd()}}return d}function zn(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Qo(s,o){return!(s&pt.Self||s&pt.Host&&o)}class qi{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return xi(this._tNode,this._lView,o,c,u)}}function Ed(){return new qi(Tn(),Me())}function zu(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Hs(s){return function Bl(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const f=u[d];if(Bu(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(Tn(),s)}const Rr="__parameters__";function pi(s,o,u){return ar(()=>{const c=function Io(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return E.annotation=y,E;function E(C,A,M){const F=C.hasOwnProperty(Rr)?C[Rr]:Object.defineProperty(C,Rr,{value:[]})[Rr];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(y),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Mt{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Qt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Id=new Mt("AnalyzeForEntryComponents");function qn(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),qn(c,o)):o!==s&&o.push(c)}return o}function ui(s,o){s.forEach(u=>Array.isArray(u)?ui(u,o):o(u))}function Gl(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function ea(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const Zr={},Ka="__NG_DI_FLAG__",Za="ngTempTokenPath",jr=/\n/gm,gi="__source";let sa;function mi(s){const o=sa;return sa=s,o}function zl(s,o=pt.Default){if(void 0===sa)throw new Se(-203,!1);return null===sa?or(s,void 0,o):sa.get(s,o&pt.Optional?null:void 0,o)}function Hn(s,o=pt.Default){return(function In(){return Fr}()||zl)(X(s),o)}function Kl(s,o=pt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Hn(s,o)}function b(s){const o=[];for(let u=0;u<s.length;u++){const c=X(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Se(900,!1);let d,f=pt.Default;for(let y=0;y<c.length;y++){const E=c[y],C=R(E);"number"==typeof C?-1===C?d=E.token:f|=C:d=E}o.push(Hn(d,f))}else o.push(Hn(c))}return o}function T(s,o){return s[Ka]=o,s.prototype[Ka]=o,s}function R(s){return s[Ka]}const Pe=T(pi("Optional"),8),ft=T(pi("SkipSelf"),4);let ua;function $_(s){ua=s}class Zs{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const x=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ne=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Nr=(()=>((Nr=Nr||{})[Nr.NONE=0]="NONE",Nr[Nr.HTML=1]="HTML",Nr[Nr.STYLE=2]="STYLE",Nr[Nr.SCRIPT=3]="SCRIPT",Nr[Nr.URL=4]="URL",Nr[Nr.RESOURCE_URL=5]="RESOURCE_URL",Nr))();function wg(s){const o=function tc(){const s=Me();return s&&s[12]}();return o?o.sanitize(Nr.URL,s)||"":function Jl(s,o){const u=function mg(s){return s instanceof Zs&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?function Ys(s){return s instanceof Zs?s.changingThisBreaksApplicationSecurity:s}(s):function Re(s){return(s=String(s)).match(x)||s.match(ne)?s:"unsafe:"+s}(Ce(s))}const Yi=new Mt("ENVIRONMENT_INITIALIZER"),Q_=new Mt("INJECTOR",-1),J_=new Mt("INJECTOR_DEF_TYPES");class pE{get(o,u=Zr){if(u===Zr){const c=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw c.name="NullInjectorError",c}return u}}function oT(...s){return{\u0275providers:X_(0,s)}}function X_(s,...o){const u=[],c=new Set;let d;return ui(o,f=>{const y=f;ey(y,u,[],c)&&(d||(d=[]),d.push(y))}),void 0!==d&&Cf(d,u),u}function Cf(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];ui(d,f=>{o.push(f)})}}function ey(s,o,u,c){if(!(s=X(s)))return!1;let d=null,f=is(s);const y=!f&&$(s);if(f||y){if(y&&!y.standalone)return!1;d=s}else{const C=s.ngModule;if(f=is(C),!f)return!1;d=C}const E=c.has(d);if(y){if(E)return!1;if(c.add(d),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of C)ey(A,o,u,c)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let A;c.add(d);try{ui(f.imports,M=>{ey(M,o,u,c)&&(A||(A=[]),A.push(M))})}finally{}void 0!==A&&Cf(A,o)}if(!E){const A=Si(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:Rt},{provide:J_,useValue:d,multi:!0},{provide:Yi,useValue:()=>Hn(d),multi:!0})}const C=f.providers;null==C||E||ui(C,M=>{o.push(M)})}}return d!==s&&void 0!==s.providers}const Eg=_e({provide:String,useValue:_e});function nc(s){return null!==s&&"object"==typeof s&&Eg in s}function xo(s){return"function"==typeof s}const ty=new Mt("Set Injector scope."),Ig={},aT={};let ny;function Cg(){return void 0===ny&&(ny=new pE),ny}class rc{}class uT extends rc{constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,iy(o,y=>this.processProvider(y)),this.records.set(Q_,Ld(void 0,this)),d.has("environment")&&this.records.set(rc,Ld(void 0,this));const f=this.records.get(ty);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(J_.multi,Rt,pt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=mi(this),c=Yt(void 0);try{return o()}finally{mi(u),Yt(c)}}get(o,u=Zr,c=pt.Default){this.assertNotDestroyed();const d=mi(this),f=Yt(void 0);try{if(!(c&pt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function dT(s){return"function"==typeof s||"object"==typeof s&&s instanceof Mt}(o)&&En(o);E=C&&this.injectableDefInScope(C)?Ld(ry(o),Ig):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&pt.Self?Cg():this.parent).get(o,u=c&pt.Optional&&u===Zr?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Za]=y[Za]||[]).unshift(fe(o)),d)throw y;return function U(s,o,u,c){const d=s[Za];throw o[gi]&&d.unshift(o[gi]),s.message=function ee(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=fe(o);if(Array.isArray(o))d=o.map(fe).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):fe(E)))}d=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(jr,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Za]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Yt(f),mi(d)}}resolveInjectorInitializers(){const o=mi(this),u=Yt(void 0);try{const c=this.get(Yi.multi,Rt,pt.Self);for(const d of c)d()}finally{mi(o),Yt(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(fe(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(o){let u=xo(o=X(o))?o:X(o&&o.provide);const c=function Od(s){return nc(s)?Ld(void 0,s.useValue):Ld(function _E(s,o,u){let c;if(xo(s)){const d=X(s);return Si(d)||ry(d)}if(nc(s))c=()=>X(s.useValue);else if(function mE(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...b(s.deps||[]));else if(function gE(s){return!(!s||!s.useExisting)}(s))c=()=>Hn(X(s.useExisting));else{const d=X(s&&(s.useClass||s.provide));if(!function lT(s){return!!s.deps}(s))return Si(d)||ry(d);c=()=>new d(...b(s.deps))}return c}(s),Ig)}(o);if(xo(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Ld(void 0,Ig,!0),d.factory=()=>b(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Ig&&(u.value=aT,u.value=u.factory()),"object"==typeof u.value&&u.value&&function cT(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=X(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function ry(s){const o=En(s),u=null!==o?o.factory:Si(s);if(null!==u)return u;if(s instanceof Mt)throw new Se(204,!1);if(s instanceof Function)return function bg(s){const o=s.length;if(o>0)throw function zs(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Se(204,!1);const u=function Lr(s){const o=s&&(s[hi]||s[jn]);if(o){const u=function xn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Se(204,!1)}function Ld(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function hT(s){return!!s.\u0275providers}function iy(s,o){for(const u of s)Array.isArray(u)?iy(u,o):hT(u)?iy(u.\u0275providers,o):o(u)}class yE{}class IE{resolveComponentFactory(o){throw function vE(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let ic=(()=>{class s{}return s.NULL=new IE,s})();function Dg(){return Fd(Tn(),Me())}function Fd(s,o){return new Df(fr(s,o))}let Df=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Dg,s})();function pT(s){return s instanceof Df?s.nativeElement:s}class Tf{}let CE=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function bE(){const s=Me(),u=pr(Tn().index,s);return(Sr(u)?u:s)[11]}(),s})(),Tg=(()=>{class s{}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:()=>null}),s})();class Sf{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const sy=new Sf("14.1.0"),sc={};function Ag(s){return s.ngOriginalError}class Ud{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Ag(o);for(;u&&Ag(u);)u=Ag(u);return u||null}}const Af=new Map;let CT=0;const _y="__ngContext__";function yi(s,o){Sr(o)?(s[_y]=o[20],function DT(s){Af.set(s[20],s)}(o)):s[_y]=o}function Rf(s){const o=s[_y];return"number"==typeof o?function fy(s){return Af.get(s)||null}(o):o||null}function yy(s){const o=Rf(s);return o?Sr(o)?o:o.lView:null}const NE=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Ze))();function eu(s){return s instanceof Function?s():s}var ca=(()=>((ca=ca||{})[ca.Important=1]="Important",ca[ca.DashCase=2]="DashCase",ca))();function Ey(s,o){return undefined(s,o)}function Vd(s){const o=s[3];return Br(o)?o[3]:o}function Iy(s){return by(s[13])}function Cy(s){return by(s[4])}function by(s){for(;null!==s&&!Br(s);)s=s[4];return s}function Bd(s,o,u,c,d){if(null!=c){let f,y=!1;Br(c)?f=c:Sr(c)&&(y=!0,c=c[0]);const E=Rn(c);0===s&&null!==u?null==d?Pg(o,u,E):jd(o,u,E,d||null,!0):1===s&&null!==u?jd(o,u,E,d||null,!0):2===s?function Qr(s,o,u){const c=ut(s,o);c&&function LT(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=f&&function FT(s,o,u,c,d){const f=u[7];f!==Rn(u)&&Bd(o,s,c,f,d);for(let E=10;E<u.length;E++){const C=u[E];Cr(C[1],C,s,o,c,f)}}(o,s,f,u,d)}}function Ty(s,o,u){return s.createElement(o,u)}function Qs(s,o){const u=s[9],c=u.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,zo(d,-1)),u.splice(c,1)}function Es(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&Qs(d,c),o>0&&(s[u-1][4]=c[4]);const f=ea(s,10+o);!function PT(s,o){Cr(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Ng(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&Cr(s,o,u,3,null,null),function OT(s){let o=s[13];if(!o)return ln(s[1],s);for(;o;){let u=null;if(Sr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Sr(o)&&ln(o[1],o),o=o[3];null===o&&(o=s),Sr(o)&&ln(o[1],o),u=o&&o[4]}o=u}}(o)}}function ln(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function UE(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof _s)){const f=u[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=d[f[y]],C=f[y+1];try{C.call(E)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function Sy(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const y=u[f+1],E="function"==typeof y?y(o):Rn(o[y]),C=c[d=u[f+2]],A=u[f+3];"boolean"==typeof A?E.removeEventListener(u[f],C,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),f+=2}else{const y=c[d=u[f+1]];u[f].call(y)}if(null!==c){for(let f=d+1;f<c.length;f++)(0,c[f])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&Br(o[3])){u!==o[3]&&Qs(u,o);const c=o[19];null!==c&&c.detachView(s)}!function py(s){Af.delete(s[20])}(o)}}function VE(s,o,u){return function Pr(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===zt.None||d===zt.Emulated)return null}return fr(c,u)}(s,o.parent,u)}function jd(s,o,u,c,d){s.insertBefore(o,u,c,d)}function Pg(s,o,u){s.appendChild(o,u)}function be(s,o,u,c,d){null!==c?jd(s,o,u,c,d):Pg(s,o,u)}function ut(s,o){return s.parentNode(o)}let kg=function Mf(s,o,u){return 40&s.type?fr(s,u):null};function $d(s,o,u,c){const d=VE(s,c,o),f=o[11],E=function kt(s,o,u){return kg(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)be(f,d,u[C],E,!1);else be(f,d,u,E,!1)}function Og(s,o){if(null!==o){const u=o.type;if(3&u)return fr(o,s);if(4&u)return xy(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Og(s,c);{const d=s[o.index];return Br(d)?xy(-1,d):Rn(d)}}if(32&u)return Ey(o,s)()||Rn(s[o.index]);{const c=jE(s,o);return null!==c?Array.isArray(c)?c[0]:Og(Vd(s[16]),c):Og(s,o.next)}}return null}function jE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function xy(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return Og(c,d)}return o[7]}function Hd(s,o,u,c,d,f,y){for(;null!=u;){const E=c[u.index],C=u.type;if(y&&0===o&&(E&&yi(Rn(E),c),u.flags|=4),64!=(64&u.flags))if(8&C)Hd(s,o,u.child,c,d,f,!1),Bd(o,s,d,E,f);else if(32&C){const A=Ey(u,c);let M;for(;M=A();)Bd(o,s,d,M,f);Bd(o,s,d,E,f)}else 16&C?$E(s,o,c,u,d,f):Bd(o,s,d,E,f);u=y?u.projectionNext:u.next}}function Cr(s,o,u,c,d,f){Hd(u,c,s.firstChild,o,d,f,!1)}function $E(s,o,u,c,d,f){const y=u[16],C=y[6].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)Bd(o,s,d,C[A],f);else Hd(s,o,C,y[3],d,f,!0)}function Ry(s,o,u){s.setAttribute(o,"style",u)}function My(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function Ny(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||s.charCodeAt(d+f)<=32)return d}u=d+1}}const Nf="ng-template";function WE(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==Ny(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function vi(s){return 4===s.type&&s.value!==Nf}function Py(s,o,u){return o===(4!==s.type||u?s.value:Nf)}function ki(s,o,u){let c=4;const d=s.attrs||[],f=function KE(s){for(let o=0;o<s.length;o++)if(Bu(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!Py(s,C,u)||""===C&&1===o.length){if(Js(c))return!1;y=!0}}else{const A=8&c?C:o[++E];if(8&c&&null!==s.attrs){if(!WE(s.attrs,A,u)){if(Js(c))return!1;y=!0}continue}const F=zE(8&c?"class":C,d,vi(s),u);if(-1===F){if(Js(c))return!1;y=!0;continue}if(""!==A){let Y;Y=F>f?"":d[F+1].toLowerCase();const re=8&c?Y:null;if(re&&-1!==Ny(re,A,0)||2&c&&A!==Y){if(Js(c))return!1;y=!0}}}}else{if(!y&&!Js(c)&&!Js(C))return!1;if(y&&Js(C))continue;y=!1,c=C|1&c}}return Js(c)||y}function Js(s){return 0==(1&s)}function zE(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function ZE(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Lg(s,o,u=!1){for(let c=0;c<o.length;c++)if(ki(s,o[c],u))return!0;return!1}function YE(s,o){return s?":not("+o.trim()+")":o}function UT(s){let o=s[0],u=1,c=2,d="",f=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Js(y)&&(o+=YE(f,d),d=""),c=y,f=f||!Js(c);u++}return""!==d&&(o+=YE(f,d)),o}const Ot={};function Oy(s){JE(Gt(),Me(),Ir()+s,!1)}function JE(s,o,u,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&af(o,f,u)}else{const f=s.preOrderHooks;null!==f&&Vu(o,f,0,u)}Kr(u)}function eI(s,o=null,u=null,c){const d=tI(s,o,u,c);return d.resolveInjectorInitializers(),d}function tI(s,o=null,u=null,c,d=new Set){const f=[u||Rt,oT(s)];return c=c||("object"==typeof s?void 0:fe(s)),new uT(f,o||Cg(),c||null,d)}let mr=(()=>{class s{static create(u,c){if(Array.isArray(u))return eI({name:""},c,u,"");{const d=u.name??"";return eI({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=Zr,s.NULL=new pE,s.\u0275prov=Qt({token:s,providedIn:"any",factory:()=>Hn(Q_)}),s.__NG_ELEMENT_ID__=-1,s})();function el(s,o=pt.Default){const u=Me();return null===u?Hn(s,o):xi(Tn(),u,X(s),o)}function Hg(){throw new Error("invalid")}function mI(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],f=u[c+1];if(-1!==f){const y=s.data[f];yo(d),y.contentQueries(2,o[f],f)}}}function Yd(s,o,u,c,d,f,y,E,C,A,M){const F=o.blueprint.slice();return F[0]=d,F[2]=76|c,(null!==M||s&&1024&s[2])&&(F[2]|=1024),ds(F),F[3]=F[15]=s,F[8]=u,F[10]=y||s&&s[10],F[11]=E||s&&s[11],F[12]=C||s&&s[12]||null,F[9]=A||s&&s[9]||null,F[6]=f,F[20]=function bT(){return CT++}(),F[21]=M,F[16]=2==o.type?s[16]:F,F}function eo(s,o,u,c,d){let f=s.data[o];if(null===f)f=function Qg(s,o,u,c,d){const f=Nu(),y=mo(),C=s.data[o]=function yI(s,o,u,c,d,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==f&&(y?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C)),C}(s,o,u,c,d),function cd(){return lt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=d;const y=function fs(){const s=lt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return zi(f,!0),f}function Qd(s,o,u,c){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function ha(s,o,u){Ol(o);try{const c=s.viewQuery;null!==c&&Xd(1,c,u);const d=s.template;null!==d&&$f(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&mI(s,o),s.staticViewQueries&&Xd(2,s.viewQuery,u);const f=s.components;null!==f&&function Zd(s,o){for(let u=0;u<o.length;u++)rS(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Lu()}}function Is(s,o,u,c){const d=o[2];if(128!=(128&d)){Ol(o);try{ds(o),function Pl(s){return lt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&$f(s,o,u,2,c);const y=3==(3&d);if(y){const A=s.preOrderCheckHooks;null!==A&&af(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Vu(o,A,0,null),_d(o,0)}if(function DI(s){for(let o=Iy(s);null!==o;o=Cy(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],f=d[3];0==(512&d[2])&&zo(f,1),d[2]|=512}}}(o),function fv(s){for(let o=Iy(s);null!==o;o=Cy(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];Us(c)&&Is(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&mI(s,o),y){const A=s.contentCheckHooks;null!==A&&af(o,A)}else{const A=s.contentHooks;null!==A&&Vu(o,A,1),_d(o,1)}!function rv(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Kr(~d);else{const f=d,y=u[++c],E=u[++c];ku(y,f),E(2,o[f])}}}finally{Kr(-1)}}(s,o);const E=s.components;null!==E&&function iv(s,o){for(let u=0;u<o.length;u++)qf(s,o[u])}(o,E);const C=s.viewQuery;if(null!==C&&Xd(2,C,c),y){const A=s.viewCheckHooks;null!==A&&af(o,A)}else{const A=s.viewHooks;null!==A&&Vu(o,A,2),_d(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,zo(o[3],-1))}finally{Lu()}}}function Jg(s,o,u,c){const d=o[10],y=Wo(o);try{!y&&d.begin&&d.begin(),y&&ha(s,o,c),Is(s,o,u,c)}finally{!y&&d.end&&d.end()}}function $f(s,o,u,c,d){const f=Ir(),y=2&c;try{Kr(-1),y&&o.length>22&&JE(s,o,22,!1),u(c,d)}finally{Kr(f)}}function Xg(s,o,u){!hs()||(function tS(s,o,u,c){const d=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||Ar(u,o),yi(c,o);const y=u.initialInputs;for(let E=d;E<f;E++){const C=s.data[E],A=fi(C);A&&dv(o,u,C);const M=Yo(o,s,E,u);yi(M,o),null!==y&&nS(0,E-d,M,C,0,y),A&&(pr(u.index,o)[8]=M)}}(s,o,u,fr(u,o)),128==(128&u.flags)&&function II(s,o,u){const c=u.directiveStart,d=u.directiveEnd,f=u.index,y=function kl(){return lt.lFrame.currentDirectiveIndex}();try{Kr(f);for(let E=c;E<d;E++){const C=s.data[E],A=o[E];Ou(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&CI(C,A)}}finally{Kr(-1),Ou(y)}}(s,o,u))}function Fn(s,o,u=fr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],E=-1===y?u(o,s):s[y];s[d++]=E}}}function Gf(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=sv(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function sv(s,o,u,c,d,f,y,E,C,A){const M=22+c,F=M+d,Y=function QT(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ot);return u}(M,F),re="function"==typeof A?A():A;return Y[1]={type:s,blueprint:Y,template:u,queries:null,viewQuery:E,declTNode:o,data:Y.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:re,incompleteFirstPass:!1}}function _I(s,o,u,c){const d=_v(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&SI(s).push(c,d.length-1))}function vI(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function wI(s,o){const c=o.directiveEnd,d=s.data,f=o.attrs,y=[];let E=null,C=null;for(let A=o.directiveStart;A<c;A++){const M=d[A],F=M.inputs,Y=null===f||vi(o)?null:nm(F,f);y.push(Y),E=vI(F,A,E),C=vI(M.outputs,A,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=C}function Cs(s,o,u,c,d,f,y,E){const C=fr(o,u);let M,A=o.inputs;!E&&null!=A&&(M=A[c])?(sm(s,u,M,c,d),co(o)&&Jd(u,o.index)):3&o.type&&(c=function JT(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,f.setProperty(C,c,d))}function Jd(s,o){const u=pr(o,s);16&u[2]||(u[2]|=32)}function tm(s,o,u,c){let d=!1;if(hs()){const f=function bI(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];Lg(u,y.selectors,!1)&&(d||(d=[]),Ba(Ar(u,o),s,y.type),fi(y)?(ov(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===c?null:{"":-1};if(null!==f){d=!0,lv(u,s.data.length,f.length);for(let M=0;M<f.length;M++){const F=f[M];F.providersResolver&&F.providersResolver(F)}let E=!1,C=!1,A=Qd(s,o,f.length,null);for(let M=0;M<f.length;M++){const F=f[M];u.mergedAttrs=Fl(u.mergedAttrs,F.hostAttrs),cv(s,u,o,A,F),uv(A,F,y),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const Y=F.type.prototype;!E&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!C&&(Y.ngOnChanges||Y.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),A++}wI(s,u)}y&&function av(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new Se(-301,!1);c.push(o[d],f)}}}(u,c,y)}return u.mergedAttrs=Fl(u.mergedAttrs,u.attrs),d}function pc(s,o,u,c,d,f){const y=f.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function eS(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=C&&E.push(C),E.push(c,d,y)}}function CI(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function ov(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function uv(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;fi(o)&&(u[""]=s)}}function lv(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function cv(s,o,u,c,d){s.data[c]=d;const f=d.factory||(d.factory=Si(d.type)),y=new _s(f,fi(d),el);s.blueprint[c]=y,u[c]=y,pc(s,o,0,c,Qd(s,u,d.hostVars,Ot),d)}function dv(s,o,u){const c=fr(o,s),d=Gf(u),f=s[10],y=Kf(s,Yd(s,d,null,u.onPush?32:16,c,o,f,f.createRenderer(c,u),null,null,null));s[o.index]=y}function fa(s,o,u,c,d,f){const y=fr(s,o);!function hv(s,o,u,c,d,f,y){if(null==f)s.removeAttribute(o,d,u);else{const E=null==y?Ce(f):y(f,c||"",d);s.setAttribute(o,d,E,u)}}(o[11],y,f,s.value,u,c,d)}function nS(s,o,u,c,d,f){const y=f[o];if(null!==y){const E=c.setInput;for(let C=0;C<y.length;){const A=y[C++],M=y[C++],F=y[C++];null!==E?c.setInput(u,F,A,M):u[M]=F}}}function nm(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function zf(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function qf(s,o){const u=pr(o,s);if(Us(u)){const c=u[1];48&u[2]?Is(c,u,c.template,u[8]):u[5]>0&&gc(u)}}function gc(s){for(let c=Iy(s);null!==c;c=Cy(c))for(let d=10;d<c.length;d++){const f=c[d];if(512&f[2]){const y=f[1];Is(y,f,y.template,f[8])}else f[5]>0&&gc(f)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=pr(u[c],s);Us(d)&&d[5]>0&&gc(d)}}function rS(s,o){const u=pr(o,s),c=u[1];(function kr(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),ha(c,u,u[8])}function Kf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function pv(s){for(;s;){s[2]|=32;const o=Vd(s);if(bu(s)&&!o)return s;s=o}return null}function mv(s){!function TI(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=yy(u);if(null!==c){const d=c[1];Jg(d,c,d.template,u)}}}(s[8])}function Xd(s,o,u){yo(0),o(s,u)}const iu=(()=>Promise.resolve(null))();function _v(s){return s[7]||(s[7]=[])}function SI(s){return s.cleanup||(s.cleanup=[])}function eh(s,o){const u=s[9],c=u?u.get(Ud,null):null;c&&c.handleError(o)}function sm(s,o,u,c,d){for(let f=0;f<u.length;){const y=u[f++],E=u[f++],C=o[y],A=s.data[y];null!==A.setInput?A.setInput(C,d,c,E):C[E]=d}}function Mo(s,o,u){const c=function Ra(s,o){return Rn(o[s])}(o,s);!function FE(s,o,u){s.setValue(o,u)}(s[11],c,u)}function mc(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?f=E:1==f?d=we(d,E):2==f&&(c=we(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function Zf(s,o,u,c,d=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push(Rn(f)),Br(f))for(let E=10;E<f.length;E++){const C=f[E],A=C[1].firstChild;null!==A&&Zf(C[1],C,A,c)}const y=u.type;if(8&y)Zf(s,o,u.child,c);else if(32&y){const E=Ey(u,o);let C;for(;C=E();)c.push(C)}else if(16&y){const E=jE(o,u);if(Array.isArray(E))c.push(...E);else{const C=Vd(o[16]);Zf(C[1],C,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class _c{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Zf(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Br(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Es(o,c),ea(u,c))}this._attachedToViewContainer=!1}Ng(this._lView[1],this._lView)}onDestroy(o){_I(this._lView[1],this._lView,null,o)}markForCheck(){pv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function gv(s,o,u){const c=o[10];c.begin&&c.begin();try{Is(s,o,s.template,u)}catch(d){throw eh(o,d),d}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function iM(s,o){Cr(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=o}}class om extends _c{constructor(o){super(o),this._view=o}detectChanges(){mv(this._view)}checkNoChanges(){}get context(){return null}}class yv extends ic{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=$(o);return new th(u,this.ngModule)}}function vv(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class AI{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const d=this.injector.get(o,sc,c);return d!==sc||u===sc?d:this.parentInjector.get(o,u,c)}}class th extends yE{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Gd(s){return s.map(UT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return vv(this.componentDef.inputs)}get outputs(){return vv(this.componentDef.outputs)}create(o,u,c,d){let f=(d=d||this.ngModule)instanceof rc?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new AI(o,f):o,E=y.get(Tf,null);if(null===E)throw new Se(407,!1);const C=y.get(Tg,null),A=E.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",F=c?function Wf(s,o,u){return s.selectRootElement(o,u===zt.ShadowDom)}(A,c,this.componentDef.encapsulation):Ty(E.createRenderer(null,this.componentDef),M,function Yf(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),Y=this.componentDef.onPush?288:272,re=function yc(s,o){return{components:[],scheduler:s||NE,clean:iu,playerHandler:o||null,flags:0}}(),le=sv(0,null,null,1,0,null,null,null,null,null),$e=Yd(null,le,re,Y,null,null,E,A,C,y,null);let Je,st;Ol($e);try{const xt=function MI(s,o,u,c,d,f){const y=u[1];u[22]=s;const C=eo(y,22,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(mc(C,A,!0),null!==s&&(Fa(d,s,A),null!==C.classes&&My(d,s,C.classes),null!==C.styles&&Ry(d,s,C.styles)));const M=c.createRenderer(s,o),F=Yd(u,Gf(o),null,o.onPush?32:16,u[22],C,c,M,f||null,null,null);return y.firstCreatePass&&(Ba(Ar(C,u),y,o.type),ov(y,C),lv(C,u.length,1)),Kf(u,F),u[22]=F}(F,this.componentDef,$e,E,A);if(F)if(c)Fa(A,F,["ng-version",sy.full]);else{const{attrs:De,classes:at}=function QE(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++c]):8===d&&u.push(f);else{if(!Js(d))break;d=f}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);De&&Fa(A,F,De),at&&at.length>0&&My(A,F,at.join(" "))}if(st=fo(le,22),void 0!==u){const De=st.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const Ut=u[at];De.push(null!=Ut?Array.from(Ut):null)}}Je=function NI(s,o,u,c,d){const f=u[1],y=function EI(s,o,u){const c=Tn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),cv(s,c,o,Qd(s,o,1,null),u),wI(s,c));const d=Yo(o,s,c.directiveStart,c);yi(d,o);const f=fr(c,o);return f&&yi(f,o),d}(f,u,o);if(c.components.push(y),s[8]=y,null!==d)for(const C of d)C(y,o);if(o.contentQueries){const C=Tn();o.contentQueries(1,y,C.directiveStart)}const E=Tn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Kr(E.index),pc(u[1],E,0,E.directiveStart,E.directiveEnd,o),CI(o,y)),y}(xt,this.componentDef,$e,re,[PI]),ha(le,$e,null)}finally{Lu()}return new RI(this.componentType,Je,Fd(st,$e),$e,st)}}class RI extends class fT{}{constructor(o,u,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new om(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const f=this._rootLView;sm(f[1],f,d,o,u),Jd(f,this._tNode.index)}}get injector(){return new qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function PI(){const s=Tn();md(Me()[1],s)}let um=null;function vc(){if(!um){const s=Ze.Symbol;if(s&&s.iterator)um=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(um=c)}}}return um}function Qf(s){return!!cm(s)&&(Array.isArray(s)||!(s instanceof Map)&&vc()in s)}function cm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Xr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Ec(s,o,u,c){const d=Me();return Xr(d,gs(),o)&&(Gt(),fa(Mn(),d,s,o,u,c)),Ec}function ot(s,o,u,c){return Xr(s,gs(),u)?o+Ce(u)+c:Ot}function Tv(s,o,u,c,d,f,y,E){const C=Me(),A=Gt(),M=s+22,F=A.firstCreatePass?function ih(s,o,u,c,d,f,y,E,C){const A=o.consts,M=eo(o,s,4,y||null,Ai(A,E));tm(o,u,M,Ai(A,C)),md(o,M);const F=M.tViews=sv(2,M,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,M),F.queries=o.queries.embeddedTView(M)),M}(M,A,C,o,u,c,d,f,y):A.data[M];zi(F,!1);const Y=C[11].createComment("");$d(A,C,Y,F),yi(Y,C),Kf(C,C[M]=zf(Y,C,Y,F)),Sa(F)&&Xg(A,C,F),null!=y&&Fn(C,F,E)}function Nt(s){return function Fs(s,o){return s[o]}(function ld(){return lt.lFrame.contextLView}(),22+s)}function Cc(s,o,u){const c=Me();return Xr(c,gs(),o)&&Cs(Gt(),Mn(),c,s,o,c[11],u,!1),Cc}function nn(s,o,u,c,d){const y=d?"class":"style";sm(s,u,o.inputs[y],y,c)}function Zn(s,o,u,c){const d=Me(),f=Gt(),y=22+s,E=d[11],C=d[y]=Ty(E,o,function Uu(){return lt.lFrame.currentNamespace}()),A=f.firstCreatePass?function pS(s,o,u,c,d,f,y){const E=o.consts,A=eo(o,s,2,d,Ai(E,f));return tm(o,u,A,Ai(E,y)),null!==A.attrs&&mc(A,A.attrs,!1),null!==A.mergedAttrs&&mc(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,d,0,o,u,c):f.data[y];zi(A,!0);const M=A.mergedAttrs;null!==M&&Fa(E,C,M);const F=A.classes;null!==F&&My(E,C,F);const Y=A.styles;return null!==Y&&Ry(E,C,Y),64!=(64&A.flags)&&$d(f,d,C,A),0===function ud(){return lt.lFrame.elementDepthCount}()&&yi(C,d),function Ma(){lt.lFrame.elementDepthCount++}(),Sa(A)&&(Xg(f,d,A),function Hf(s,o,u){if(Sl(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,u[f],f)}}}(f,A,d)),null!==c&&Fn(d,A),Zn}function Ye(){let s=Tn();mo()?function Pa(){lt.lFrame.isParent=!1}():(s=s.parent,zi(s,!1));const o=s;!function Na(){lt.lFrame.elementDepthCount--}();const u=Gt();return u.firstCreatePass&&(md(u,s),Sl(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function vd(s){return 0!=(16&s.flags)}(o)&&nn(u,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function dg(s){return 0!=(32&s.flags)}(o)&&nn(u,o,Me(),o.stylesWithoutHost,!1),Ye}function sh(s,o,u,c){return Zn(s,o,u,c),Ye(),sh}function Av(){return Me()}function dm(s){return!!s&&"function"==typeof s.then}function Qi(s){return!!s&&"function"==typeof s.subscribe}const hm=Qi;function fm(s,o,u,c){const d=Me(),f=Gt(),y=Tn();return function pm(s,o,u,c,d,f,y,E){const C=Sa(c),M=s.firstCreatePass&&SI(s),F=o[8],Y=_v(o);let re=!0;if(3&c.type||E){const Je=fr(c,o),st=E?E(Je):Je,xt=Y.length,De=E?Ut=>E(Rn(Ut[c.index])):c.index;let at=null;if(!E&&C&&(at=function il(s,o,u,c){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===u&&d[f+1]===c){const E=o[7],C=d[f+2];return E.length>C?E[C]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,c.index)),null!==at)(at.__ngLastListenerFn__||at).__ngNextListenerFn__=f,at.__ngLastListenerFn__=f,re=!1;else{f=Jf(c,o,F,f,!1);const Ut=u.listen(st,d,f);Y.push(f,Ut),M&&M.push(d,De,xt,xt+1)}}else f=Jf(c,o,F,f,!1);const le=c.outputs;let $e;if(re&&null!==le&&($e=le[d])){const Je=$e.length;if(Je)for(let st=0;st<Je;st+=2){const Un=o[$e[st]][$e[st+1]].subscribe(f),Zc=Y.length;Y.push(f,Un),M&&M.push(d,c.index,Zc,-(Zc+1))}}}(f,d,d[11],y,s,o,0,c),fm}function he(s,o,u,c){try{return!1!==u(c)}catch(d){return eh(s,d),!1}}function Jf(s,o,u,c,d){return function f(y){if(y===Function)return c;pv(2&s.flags?pr(s.index,o):o);let C=he(o,0,c,y),A=f.__ngNextListenerFn__;for(;A;)C=he(o,0,A,y)&&C,A=A.__ngNextListenerFn__;return d&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function Rv(s,o,u){return ou(s,"",o,"",u),Rv}function ou(s,o,u,c,d){const f=Me(),y=ot(f,o,u,c);return y!==Ot&&Cs(Gt(),Mn(),f,s,y,f[11],d,!1),ou}function Nn(s,o=""){const u=Me(),c=Gt(),d=s+22,f=c.firstCreatePass?eo(c,d,1,o,null):c.data[d],y=u[d]=function Mg(s,o){return s.createText(o)}(u[11],o);$d(c,u,y,f),zi(f,!1)}function Vv(s){return wm("",s,""),Vv}function wm(s,o,u){const c=Me(),d=ot(c,s,o,u);return d!==Ot&&Mo(c,Ir(),d),wm}const Ac=void 0;var iC=["en",[["a","p"],["AM","PM"],Ac],[["AM","PM"],Ac,Ac],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ac,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ac,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ac,"{1} 'at' {0}",Ac],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function rC(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let xc={};function Kv(s){const o=function Mc(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Rc(o);if(u)return u;const c=o.split("-")[0];if(u=Rc(c),u)return u;if("en"===c)return iC;throw new Se(701,!1)}function Zv(s){return Kv(s)[St.PluralCase]}function Rc(s){return s in xc||(xc[s]=Ze.ng&&Ze.ng.common&&Ze.ng.common.locales&&Ze.ng.common.locales[s]),xc[s]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const Nc="en-US";let op=Nc;class bh{}class RC{}function HS(s,o){return new MC(s,o??null)}class MC extends bh{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yv(this);const c=Ge(o);this._bootstrapComponents=eu(c.bootstrap),this._r3Injector=tI(o,u,[{provide:bh,useValue:this},{provide:ic,useValue:this.componentFactoryResolver}],fe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class cw extends RC{constructor(o){super(),this.moduleType=o}create(o){return new MC(this.moduleType,o)}}class GS extends bh{constructor(o,u,c){super(),this.componentFactoryResolver=new yv(this),this.instance=null;const d=new uT([...o,{provide:bh,useValue:this},{provide:ic,useValue:this.componentFactoryResolver}],u||Cg(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function km(s,o,u=null){return new GS(s,o,u).injector}function Fc(s){return o=>{setTimeout(s,void 0,o)}}const ko=class jm extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,f=u||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),f=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(f=Fc(f),d&&(d=Fc(d)),y&&(y=Fc(y)));const E=super.subscribe({next:d,error:f,complete:y});return o instanceof B.w0&&o.add(E),E}};function zC(){return this._results[vc()]()}class wi{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=vc(),c=wi.prototype;c[u]||(c[u]=zC)}get changes(){return this._changes||(this._changes=new ko)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=qn(o);(this._changesDetected=!function qu(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],f=o[c];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ah=(()=>{class s{}return s.__NG_ELEMENT_ID__=qC,s})();const $m=Ah,Hm=class extends $m{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,d=Yd(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(d[19]=y.createEmbeddedView(c)),ha(c,d,o),new _c(d)}};function qC(){return Oo(Tn(),Me())}function Oo(s,o){return 4&s.type?new Hm(o,s,Fd(s,o)):null}let hu=(()=>{class s{}return s.__NG_ELEMENT_ID__=KC,s})();function KC(){return fu(Tn(),Me())}const Uc=hu,ZC=class extends Uc{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Fd(this._hostTNode,this._hostLView)}get injector(){return new qi(this._hostTNode,this._hostLView)}get parentInjector(){const o=Gu(this._hostTNode,this._hostLView);if(cf(o)){const u=$u(o,this._hostLView),c=ju(o);return new qi(u[1].data[c+8],u)}return new qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Vc(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const y=o.createEmbeddedView(u||{},f);return this.insert(y,d),y}createComponent(o,u,c,d,f){const y=o&&!function kn(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const F=u||{};E=F.index,c=F.injector,d=F.projectableNodes,f=F.environmentInjector||F.ngModuleRef}const C=y?o:new th($(o)),A=c||this.parentInjector;if(!f&&null==C.ngModule){const Y=(y?A:this.parentInjector).get(rc,null);Y&&(f=Y)}const M=C.create(A,d,void 0,f);return this.insert(M.hostView,E),M}insert(o,u){const c=o._lView,d=c[1];if(function po(s){return Br(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const F=c[3],Y=new ZC(F,F[6],F[3]);Y.detach(Y.indexOf(o))}}const f=this._adjustIndex(u),y=this._lContainer;!function k(s,o,u,c){const d=10+c,f=u.length;c>0&&(u[d-1][4]=o),c<f-10?(o[4]=u[d],Gl(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function Pi(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(d,c,y,f);const E=xy(f,y),C=c[11],A=ut(C,y[7]);return null!==A&&function kT(s,o,u,c,d,f){c[0]=d,c[6]=o,Cr(s,c,u,1,d,f)}(d,y[6],C,c,A,E),o.attachToViewContainerRef(),Gl(Gm(y),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Vc(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Es(this._lContainer,u);c&&(ea(Gm(this._lContainer),u),Ng(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Es(this._lContainer,u);return c&&null!=ea(Gm(this._lContainer),u)?new _c(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function Vc(s){return s[8]}function Gm(s){return s[8]||(s[8]=[])}function fu(s,o){let u;const c=o[s.index];if(Br(c))u=c;else{let d;if(8&s.type)d=Rn(c);else{const f=o[11];d=f.createComment("");const y=fr(s,o);jd(f,ut(f,y),d,function Ay(s,o){return s.nextSibling(o)}(f,y),!1)}o[s.index]=u=zf(c,o,d,s),Kf(o,u)}return new ZC(u,s,o)}class mw{constructor(o){this.queryList=o,this.matches=null}clone(){return new mw(this.queryList)}setDirty(){this.queryList.setDirty()}}class _w{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<c;f++){const y=u.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new _w(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==eb(o,u).matches&&this.queries[u].setDirty()}}class _p{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Wm{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new Wm(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class yw{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new yw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,u,QC(u,f)),this.matchTNodeWithReadOption(o,u,$s(u,o,f,!1,!1))}else c===Ah?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,$s(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Df||d===hu||d===Ah&&4&u.type)this.addMatch(u.index,-2);else{const f=$s(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function QC(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function JC(s,o,u,c){return-1===u?function JS(s,o){return 11&s.type?Fd(s,o):4&s.type?Oo(s,o):null}(o,s):-2===u?function Bc(s,o,u){return u===Df?Fd(o,s):u===Ah?Oo(o,s):u===hu?fu(o,s):void 0}(s,o,c):Yo(s,s[1],u,o)}function xh(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const f=s.data,y=u.matches,E=[];for(let C=0;C<y.length;C+=2){const A=y[C];E.push(A<0?null:JC(o,f[A],y[C+1],u.metadata.read))}d.matches=E}return d.matches}function zm(s,o,u,c){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const y=xh(s,o,d,u);for(let E=0;E<f.length;E+=2){const C=f[E];if(C>0)c.push(y[E/2]);else{const A=f[E+1],M=o[-C];for(let F=10;F<M.length;F++){const Y=M[F];Y[17]===Y[3]&&zm(Y[1],Y,A,c)}if(null!==M[9]){const F=M[9];for(let Y=0;Y<F.length;Y++){const re=F[Y];zm(re[1],re,A,c)}}}}}return c}function vw(s){const o=Me(),u=Gt(),c=dd();yo(c+1);const d=eb(u,c);if(s.dirty&&Wo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?zm(u,o,c,[]):xh(u,o,d,c);s.reset(f,pT),s.notifyOnChanges()}return!0}return!1}function ww(s,o,u,c){const d=Gt();if(d.firstCreatePass){const f=Tn();(function zr(s,o,u){null===s.queries&&(s.queries=new Wm),s.queries.track(new yw(o,u))})(d,new _p(o,u,c),f.index),function tA(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function qm(s,o,u){const c=new wi(4==(4&u));_I(s,o,c,c.destroy),null===o[19]&&(o[19]=new _w),o[19].queries.push(new mw(c))}(d,Me(),u)}function XC(){return function eA(s,o){return s[19].queries[o].queryList}(Me(),dd())}function eb(s,o){return s.queries.getByIndex(o)}function $c(s){const o=$(s)||H(s)||Ie(s);return null!==o&&o.standalone}function Mh(...s){}const Nh=new Mt("Application Initializer");let Ph=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Mh,this.reject=Mh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(dm(f))u.push(f);else if(hm(f)){const y=new Promise((E,C)=>{f.subscribe({complete:E,error:C})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Hn(Nh,8))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Ow=new Mt("AppId",{providedIn:"root",factory:function r_(){return`${_a()}${_a()}${_a()}`}});function _a(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Lw=new Mt("Platform Initializer"),aA=new Mt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),i_=new Mt("appBootstrapListener");let uA=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Wc=new Mt("LocaleId",{providedIn:"root",factory:()=>Kl(Wc,pt.Optional|pt.SkipSelf)||function Fw(){return typeof $localize<"u"&&$localize.locale||Nc}()}),Uw=new Mt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class cA{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let dA=(()=>{class s{compileModuleSync(u){return new cw(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),f=eu(Ge(u).declarations).reduce((y,E)=>{const C=$(E);return C&&y.push(new th(C)),y},[]);return new cA(c,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Vw=(()=>Promise.resolve(0))();function Bw(s){typeof Zone>"u"?Vw.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ts{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ko(!1),this.onMicrotaskEmpty=new ko(!1),this.onStable=new ko(!1),this.onError=new ko(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function jw(){let s=Ze.requestAnimationFrame,o=Ze.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function kh(s){const o=()=>{!function Hw(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ze,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ya(s),s.isCheckStableRunning=!0,Tp(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ya(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,f,y,E)=>{try{return o_(s),u.invokeTask(d,f,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),zc(s)}},onInvoke:(u,c,d,f,y,E,C)=>{try{return o_(s),u.invoke(d,f,y,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),zc(s)}},onHasTask:(u,c,d,f)=>{u.hasTask(d,f),c===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,ya(s),Tp(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ts.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(ts.isInAngularZone())throw new Se(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,$w,Mh,Mh);try{return f.runTask(y,u,c)}finally{f.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const $w={};function Tp(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ya(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function o_(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function zc(s){s._nesting--,Tp(s)}class Oh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ko,this.onMicrotaskEmpty=new ko,this.onStable=new ko,this.onError=new ko}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const Gw=new Mt(""),qc=new Mt("");let Sp,pA=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Sp||(function Ww(s){Sp=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ts.assertNotInAngularZone(),Bw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Bw(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Hn(ts),Hn(Ib),Hn(qc))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})(),Ib=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Sp?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),va=null;const a_=new Mt("AllowMultipleToken"),zw=new Mt("PlatformDestroyListeners");class bb{constructor(o,u){this.name=o,this.token=u}}function Zw(s,o,u=[]){const c=`Platform: ${o}`,d=new Mt(c);return(f=[])=>{let y=Yw();if(!y||y.injector.get(a_,!1)){const E=[...u,...f,{provide:d,useValue:!0}];s?s(E):function mA(s){if(va&&!va.get(a_,!1))throw new Se(400,!1);va=s;const o=s.get(u_);(function Kw(s){const o=s.get(Lw,null);o&&o.forEach(u=>u())})(s)}(function Tb(s=[],o){return mr.create({name:o,providers:[{provide:ty,useValue:"platform"},{provide:zw,useValue:new Set([()=>va=null])},...s]})}(E,c))}return function yA(s){const o=Yw();if(!o)throw new Se(401,!1);return o}()}}function Yw(){return va?.get(u_)??null}let u_=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function Qw(s,o){let u;return u="noop"===s?new Oh:("zone.js"===s?void 0:s)||new ts(o),u}(c?.ngZone,function l_(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:ts,useValue:d}];return d.run(()=>{const y=mr.create({providers:f,parent:this.injector,name:u.moduleType.name}),E=u.create(y),C=E.injector.get(Ud,null);if(!C)throw new Se(402,!1);return d.runOutsideAngular(()=>{const A=d.onError.subscribe({next:M=>{C.handleError(M)}});E.onDestroy(()=>{Lh(this._modules,E),A.unsubscribe()})}),function Sb(s,o,u){try{const c=u();return dm(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,d,()=>{const A=E.injector.get(Ph);return A.runInitializers(),A.donePromise.then(()=>(function ap(s){$t(s,"Expected localeId to be defined"),"string"==typeof s&&(op=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Wc,Nc)||Nc),this._moduleDoBootstrap(E),E))})})}bootstrapModule(u,c=[]){const d=c_({},c);return function qw(s,o,u){const c=new cw(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const c=u.injector.get(d_);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Se(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(zw,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Hn(mr))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function c_(s,o){return Array.isArray(o)?o.reduce(c_,s):{...s,...o}}let d_=(()=>{class s{constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new P.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),y=new P.y(E=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{ts.assertNotInAngularZone(),Bw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{ts.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=(0,oe.T)(f,y.pipe((0,ce.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const d=u instanceof yE;if(!this._injector.get(Ph).done)throw!d&&$c(u),new Se(405,false);let y;y=d?u:this._injector.get(ic).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const E=function gA(s){return s.isBoundToModule}(y)?void 0:this._injector.get(bh),A=y.create(mr.NULL,[],c||y.selector,E),M=A.location.nativeElement,F=A.injector.get(Gw,null);return F?.registerApplication(M),A.onDestroy(()=>{this.detachView(A.hostView),Lh(this.components,A),F?.unregisterApplication(M)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Lh(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(i_,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Lh(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Se(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(Hn(ts),Hn(rc),Hn(Ud))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Lh(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let e0=!0,Ab=!1;function t0(){return Ab=!0,e0}function vA(){if(Ab)throw new Error("Cannot enable prod mode after platform setup.");e0=!1}let wA=(()=>{class s{}return s.__NG_ELEMENT_ID__=n0,s})();function n0(s){return function r0(s,o,u){if(co(s)&&!u){const c=pr(s.index,o);return new _c(c,c)}return 47&s.type?new _c(o[16],o):null}(Tn(),Me(),16==(16&s))}class Ob{constructor(){}supports(o){return Qf(o)}create(o){return new c0(o)}}const DA=(s,o)=>o;class c0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||DA}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,f=null;for(;u||c;){const y=!c||u&&u.currentIndex<m_(c,d,f)?u:c,E=m_(y,d,f),C=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{f||(f=[]);const A=E-d,M=C-d;if(A!=M){for(let Y=0;Y<A;Y++){const re=Y<f.length?f[Y]:f[Y]=0,le=re+Y;M<=le&&le<A&&(f[Y]=re+1)}f[y.previousIndex]=M-A}}E!==C&&o(y,E,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Qf(o))throw new Se(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],y=this._trackByFn(E,f),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,f,y,E)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,y,E),c=!0),u=u._next}else d=0,function hS(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[vc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new TA(u,c),f,d),o}_verifyReinsertion(o,u,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new g_),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new g_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class TA{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class d0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class g_{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new d0,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function m_(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class Lb{constructor(){}supports(o){return o instanceof Map||cm(o)}create(){return new Fb}}class Fb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||cm(o)))throw new Se(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new Ub(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Ub{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Vb(){return new Mp([new Ob])}let Mp=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Vb()),deps:[[s,new ft,new Pe]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Se(901,!1)}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:Vb}),s})();function Np(){return new h0([new Lb])}let h0=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Np()),deps:[[s,new ft,new Pe]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new Se(901,!1)}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:Np}),s})();const f0=Zw(null,"core",[]);let Bb=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Hn(d_))},s.\u0275mod=Ct({type:s}),s.\u0275inj=Jt({}),s})();function p0(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(ht,ke,L)=>{L.d(ke,{Z:()=>Se});var m=L(2090),B=L(4859),P=L(9681),oe=L(1877);class ce{constructor(Ce,me){this._delegate=Ce,this.firebase=me,(0,P._addComponent)(Ce,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Ce,me=P._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const Xe=this._delegate.container.getProvider(Ce);return!Xe.isInitialized()&&"EXPLICIT"===(null===(et=Xe.getComponent())||void 0===et?void 0:et.instantiationMode)&&Xe.initialize(),Xe.getImmediate({identifier:me})}_removeServiceInstance(Ce,me=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(me)}_addComponent(Ce){(0,P._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,P._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function we(){const it=function fe(it){const Ce={},me={__esModule:!0,initializeApp:function Ve(ie,ye={}){const Te=P.initializeApp(ie,ye);if((0,m.r3)(Ce,Te.name))return Ce[Te.name];const J=new it(Te,me);return Ce[Te.name]=J,J},app:Xe,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ae(ie){const ye=ie.name,Te=ye.replace("-compat","");if(P._registerComponent(ie)&&"PUBLIC"===ie.type){const J=(se=Xe())=>{if("function"!=typeof se[Te])throw ge.create("invalid-app-argument",{appName:ye});return se[Te]()};void 0!==ie.serviceProps&&(0,m.ZB)(J,ie.serviceProps),me[Te]=J,it.prototype[Te]=function(...se){return this._getService.bind(this,ye).apply(this,ie.multipleInstances?se:[])}}return"PUBLIC"===ie.type?me[Te]:null},removeApp:function et(ie){delete Ce[ie]},useAsService:function ze(ie,ye){return"serverAuth"===ye?null:ye},modularAPIs:P}};function Xe(ie){if(!(0,m.r3)(Ce,ie=ie||P._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:ie});return Ce[ie]}return me.default=me,Object.defineProperty(me,"apps",{get:function Oe(){return Object.keys(Ce).map(ie=>Ce[ie])}}),Xe.App=it,me}(ce);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function Ce(me){(0,m.ZB)(it,me)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),it}(),z=new oe.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=q;!function Ue(it){(0,P.registerVersion)("@firebase/app-compat","0.1.30",it)}()},9681:(ht,ke,L)=>{L.r(ke),L.d(ke,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>hi,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>fn,_addOrOverwriteComponent:()=>Qt,_apps:()=>hn,_clearComponents:()=>bi,_components:()=>Bn,_getProvider:()=>Jt,_registerComponent:()=>Ht,_removeServiceInstance:()=>En,deleteApp:()=>pt,getApp:()=>jn,getApps:()=>$i,initializeApp:()=>Di,onLog:()=>Yt,registerVersion:()=>In,setLogLevel:()=>or});var m=L(5861),B=L(4859),P=L(1877),oe=L(2090),ce=L(8766);class _e{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map(Z=>{if(function ge(j){return"VERSION"===j.getComponent()?.type}(Z)){const Le=Z.getImmediate();return`${Le.library}/${Le.version}`}return null}).filter(Z=>Z).join(" ")}}const fe="@firebase/app",q=new P.Yd("@firebase/app"),$t="[DEFAULT]",qe={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hn=new Map,Bn=new Map;function fn(j,K){try{j.container.addComponent(K)}catch(Z){q.debug(`Component ${K.name} failed to register with FirebaseApp ${j.name}`,Z)}}function Qt(j,K){j.container.addOrOverwriteComponent(K)}function Ht(j){const K=j.name;if(Bn.has(K))return q.debug(`There were multiple attempts to register component ${K}.`),!1;Bn.set(K,j);for(const Z of hn.values())fn(Z,j);return!0}function Jt(j,K){const Z=j.container.getProvider("heartbeat").getImmediate({optional:!0});return Z&&Z.triggerHeartbeat(),j.container.getProvider(K)}function En(j,K,Z=$t){Jt(j,K).clearInstance(Z)}function bi(){Bn.clear()}const xn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class is{constructor(K,Z,Le){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},Z),this._name=Z.name,this._automaticDataCollectionEnabled=Z.automaticDataCollectionEnabled,this._container=Le,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw xn.create("app-deleted",{appName:this._name})}}const hi="9.9.1";function Di(j,K={}){"object"!=typeof K&&(K={name:K});const Z=Object.assign({name:$t,automaticDataCollectionEnabled:!1},K),Le=Z.name;if("string"!=typeof Le||!Le)throw xn.create("bad-app-name",{appName:String(Le)});const We=hn.get(Le);if(We){if((0,oe.vZ)(j,We.options)&&(0,oe.vZ)(Z,We.config))return We;throw xn.create("duplicate-app",{appName:Le})}const Ct=new B.H0(Le);for(const Xt of Bn.values())Ct.addComponent(Xt);const an=new is(j,Z,Ct);return hn.set(Le,an),an}function jn(j=$t){const K=hn.get(j);if(!K)throw xn.create("no-app",{appName:j});return K}function $i(){return Array.from(hn.values())}function pt(j){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,m.Z)(function*(j){const K=j.name;hn.has(K)&&(hn.delete(K),yield Promise.all(j.container.getProviders().map(Z=>Z.delete())),j.isDeleted=!0)})).apply(this,arguments)}function In(j,K,Z){var Le;let We=null!==(Le=qe[j])&&void 0!==Le?Le:j;Z&&(We+=`-${Z}`);const Ct=We.match(/\s|\//),an=K.match(/\s|\//);if(Ct||an){const Xt=[`Unable to register library "${We}" with version "${K}":`];return Ct&&Xt.push(`library name "${We}" contains illegal characters (whitespace or "/")`),Ct&&an&&Xt.push("and"),an&&Xt.push(`version name "${K}" contains illegal characters (whitespace or "/")`),void q.warn(Xt.join(" "))}Ht(new B.wA(`${We}-version`,()=>({library:We,version:K}),"VERSION"))}function Yt(j,K){if(null!==j&&"function"!=typeof j)throw xn.create("invalid-log-argument");(0,P.Am)(j,K)}function or(j){(0,P.Ub)(j)}const Cn="firebase-heartbeat-store";let ur=null;function ss(){return ur||(ur=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(j,K)=>{0===K&&j.createObjectStore(Cn)}}).catch(j=>{throw xn.create("storage-open",{originalErrorMessage:j.message})})),ur}function Ze(){return(Ze=(0,m.Z)(function*(j){var K;try{return(yield ss()).transaction(Cn).objectStore(Cn).get(lr(j))}catch(Z){throw xn.create("storage-get",{originalErrorMessage:null===(K=Z)||void 0===K?void 0:K.message})}})).apply(this,arguments)}function ct(j,K){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,m.Z)(function*(j,K){var Z;try{const We=(yield ss()).transaction(Cn,"readwrite");return yield We.objectStore(Cn).put(K,lr(j)),We.done}catch(Le){throw xn.create("storage-set",{originalErrorMessage:null===(Z=Le)||void 0===Z?void 0:Z.message})}})).apply(this,arguments)}function lr(j){return`${j.name}!${j.options.appId}`}class bn{constructor(K){this.container=K,this._heartbeatsCache=null;const Z=this.container.getProvider("app").getImmediate();this._storage=new Xn(Z),this._heartbeatsCachePromise=this._storage.read().then(Le=>(this._heartbeatsCache=Le,Le))}triggerHeartbeat(){var K=this;return(0,m.Z)(function*(){const Le=K.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),We=Dn();if(null===K._heartbeatsCache&&(K._heartbeatsCache=yield K._heartbeatsCachePromise),K._heartbeatsCache.lastSentHeartbeatDate!==We&&!K._heartbeatsCache.heartbeats.some(Ct=>Ct.date===We))return K._heartbeatsCache.heartbeats.push({date:We,agent:Le}),K._heartbeatsCache.heartbeats=K._heartbeatsCache.heartbeats.filter(Ct=>{const an=new Date(Ct.date).valueOf();return Date.now()-an<=2592e6}),K._storage.overwrite(K._heartbeatsCache)})()}getHeartbeatsHeader(){var K=this;return(0,m.Z)(function*(){if(null===K._heartbeatsCache&&(yield K._heartbeatsCachePromise),null===K._heartbeatsCache||0===K._heartbeatsCache.heartbeats.length)return"";const Z=Dn(),{heartbeatsToSend:Le,unsentEntries:We}=function on(j,K=1024){const Z=[];let Le=j.slice();for(const We of j){const Ct=Z.find(an=>an.agent===We.agent);if(Ct){if(Ct.dates.push(We.date),G(Z)>K){Ct.dates.pop();break}}else if(Z.push({agent:We.agent,dates:[We.date]}),G(Z)>K){Z.pop();break}Le=Le.slice(1)}return{heartbeatsToSend:Z,unsentEntries:Le}}(K._heartbeatsCache.heartbeats),Ct=(0,oe.L)(JSON.stringify({version:2,heartbeats:Le}));return K._heartbeatsCache.lastSentHeartbeatDate=Z,We.length>0?(K._heartbeatsCache.heartbeats=We,yield K._storage.overwrite(K._heartbeatsCache)):(K._heartbeatsCache.heartbeats=[],K._storage.overwrite(K._heartbeatsCache)),Ct})()}}function Dn(){return(new Date).toISOString().substring(0,10)}class Xn{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var K=this;return(0,m.Z)(function*(){return(yield K._canUseIndexedDBPromise)&&(yield function zt(j){return Ze.apply(this,arguments)}(K.app))||{heartbeats:[]}})()}overwrite(K){var Z=this;return(0,m.Z)(function*(){var Le;if(yield Z._canUseIndexedDBPromise){const Ct=yield Z.read();return ct(Z.app,{lastSentHeartbeatDate:null!==(Le=K.lastSentHeartbeatDate)&&void 0!==Le?Le:Ct.lastSentHeartbeatDate,heartbeats:K.heartbeats})}})()}add(K){var Z=this;return(0,m.Z)(function*(){var Le;if(yield Z._canUseIndexedDBPromise){const Ct=yield Z.read();return ct(Z.app,{lastSentHeartbeatDate:null!==(Le=K.lastSentHeartbeatDate)&&void 0!==Le?Le:Ct.lastSentHeartbeatDate,heartbeats:[...Ct.heartbeats,...K.heartbeats]})}})()}}function G(j){return(0,oe.L)(JSON.stringify({version:2,heartbeats:j})).length}!function W(j){Ht(new B.wA("platform-logger",K=>new _e(K),"PRIVATE")),Ht(new B.wA("heartbeat",K=>new bn(K),"PRIVATE")),In(fe,"0.7.29",j),In(fe,"0.7.29","esm2017"),In("fire-js","")}("")},4859:(ht,ke,L)=>{L.d(ke,{H0:()=>fe,wA:()=>P,zt:()=>ce});var m=L(5861),B=L(2090);class P{constructor(q,z,X){this.name=q,this.instanceFactory=z,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const oe="[DEFAULT]";class ce{constructor(q,z){this.name=q,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const z=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(z)){const X=new B.BH;if(this.instancesDeferred.set(z,X),this.isInitialized(z)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:z});He&&X.resolve(He)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(q){var z;const X=this.normalizeInstanceIdentifier(q?.identifier),He=null!==(z=q?.optional)&&void 0!==z&&z;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Ue){if(He)return null;throw Ue}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function ge(we){return"EAGER"===we.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[z,X]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(z);try{const Ue=this.getOrInitializeService({instanceIdentifier:He});X.resolve(Ue)}catch{}}}}clearInstance(q=oe){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,m.Z)(function*(){const z=Array.from(q.instances.values());yield Promise.all([...z.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...z.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=oe){return this.instances.has(q)}getOptions(q=oe){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:z={}}=q,X=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:X,options:z});for(const[Ue,Se]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Ue)&&Se.resolve(He);return He}onInit(q,z){var X;const He=this.normalizeInstanceIdentifier(z),Ue=null!==(X=this.onInitCallbacks.get(He))&&void 0!==X?X:new Set;Ue.add(q),this.onInitCallbacks.set(He,Ue);const Se=this.instances.get(He);return Se&&q(Se,He),()=>{Ue.delete(q)}}invokeOnInitCallbacks(q,z){const X=this.onInitCallbacks.get(z);if(X)for(const He of X)try{He(q,z)}catch{}}getOrInitializeService({instanceIdentifier:q,options:z={}}){let X=this.instances.get(q);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(we=q,we===oe?void 0:we),options:z}),this.instances.set(q,X),this.instancesOptions.set(q,z),this.invokeOnInitCallbacks(X,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,X)}catch{}var we;return X||null}normalizeInstanceIdentifier(q=oe){return this.component?this.component.multipleInstances?q:oe:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const z=this.getProvider(q.name);if(z.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);z.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const z=new ce(q,this);return this.providers.set(q,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,ke,L)=>{L.d(ke,{Am:()=>we,Ub:()=>fe,Yd:()=>ge,in:()=>B});const m=[];var B=(()=>{return(q=B||(B={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",B;var q})();const P={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},oe=B.INFO,ce={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},_e=(q,z,...X)=>{if(z<q.logLevel)return;const He=(new Date).toISOString(),Ue=ce[z];if(!Ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Ue](`[${He}]  ${q.name}:`,...X)};class ge{constructor(z){this.name=z,this._logLevel=oe,this._logHandler=_e,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in B))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?P[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...z),this._logHandler(this,B.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...z),this._logHandler(this,B.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,B.INFO,...z),this._logHandler(this,B.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,B.WARN,...z),this._logHandler(this,B.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...z),this._logHandler(this,B.ERROR,...z)}}function fe(q){m.forEach(z=>{z.setLogLevel(q)})}function we(q,z){for(const X of m){let He=null;z&&z.level&&(He=P[z.level]),X.userLogHandler=null===q?null:(Ue,Se,...it)=>{const Ce=it.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch{return null}}).filter(me=>me).join(" ");Se>=(He??Ue.logLevel)&&q({level:B[Se].toLowerCase(),message:Ce,args:it,type:Ue.name})}}}},8766:(ht,ke,L)=>{L.d(ke,{Lj:()=>Ve,X3:()=>Xe});var m=L(5861);let P,oe;const ge=new WeakMap,fe=new WeakMap,we=new WeakMap,q=new WeakMap,z=new WeakMap;let Ue={get(ye,Te,J){if(ye instanceof IDBTransaction){if("done"===Te)return fe.get(ye);if("objectStoreNames"===Te)return ye.objectStoreNames||we.get(ye);if("store"===Te)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return me(ye[Te])},set:(ye,Te,J)=>(ye[Te]=J,!0),has:(ye,Te)=>ye instanceof IDBTransaction&&("done"===Te||"store"===Te)||Te in ye};function Ce(ye){return"function"==typeof ye?function it(ye){return ye!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ye)?function(...Te){return ye.apply(et(this),Te),me(ge.get(this))}:function(...Te){return me(ye.apply(et(this),Te))}:function(Te,...J){const se=ye.call(et(this),Te,...J);return we.set(se,Te.sort?Te.sort():[Te]),me(se)}}(ye):(ye instanceof IDBTransaction&&function He(ye){if(fe.has(ye))return;const Te=new Promise((J,se)=>{const ae=()=>{ye.removeEventListener("complete",ve),ye.removeEventListener("error",de),ye.removeEventListener("abort",de)},ve=()=>{J(),ae()},de=()=>{se(ye.error||new DOMException("AbortError","AbortError")),ae()};ye.addEventListener("complete",ve),ye.addEventListener("error",de),ye.addEventListener("abort",de)});fe.set(ye,Te)}(ye),((ye,Te)=>Te.some(J=>ye instanceof J))(ye,function ce(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ye,Ue):ye)}function me(ye){if(ye instanceof IDBRequest)return function X(ye){const Te=new Promise((J,se)=>{const ae=()=>{ye.removeEventListener("success",ve),ye.removeEventListener("error",de)},ve=()=>{J(me(ye.result)),ae()},de=()=>{se(ye.error),ae()};ye.addEventListener("success",ve),ye.addEventListener("error",de)});return Te.then(J=>{J instanceof IDBCursor&&ge.set(J,ye)}).catch(()=>{}),z.set(Te,ye),Te}(ye);if(q.has(ye))return q.get(ye);const Te=Ce(ye);return Te!==ye&&(q.set(ye,Te),z.set(Te,ye)),Te}const et=ye=>z.get(ye);function Xe(ye,Te,{blocked:J,upgrade:se,blocking:ae,terminated:ve}={}){const de=indexedDB.open(ye,Te),je=me(de);return se&&de.addEventListener("upgradeneeded",wt=>{se(me(de.result),wt.oldVersion,wt.newVersion,me(de.transaction))}),J&&de.addEventListener("blocked",()=>J()),je.then(wt=>{ve&&wt.addEventListener("close",()=>ve()),ae&&wt.addEventListener("versionchange",()=>ae())}).catch(()=>{}),je}function Ve(ye,{blocked:Te}={}){const J=indexedDB.deleteDatabase(ye);return Te&&J.addEventListener("blocked",()=>Te()),me(J).then(()=>{})}const Oe=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],ze=new Map;function ie(ye,Te){if(!(ye instanceof IDBDatabase)||Te in ye||"string"!=typeof Te)return;if(ze.get(Te))return ze.get(Te);const J=Te.replace(/FromIndex$/,""),se=Te!==J,ae=Ae.includes(J);if(!(J in(se?IDBIndex:IDBObjectStore).prototype)||!ae&&!Oe.includes(J))return;const ve=function(){var de=(0,m.Z)(function*(je,...wt){const Zt=this.transaction(je,ae?"readwrite":"readonly");let $t=Zt.store;return se&&($t=$t.index(wt.shift())),(yield Promise.all([$t[J](...wt),ae&&Zt.done]))[0]});return function(wt){return de.apply(this,arguments)}}();return ze.set(Te,ve),ve}!function Se(ye){Ue=ye(Ue)}(ye=>({...ye,get:(Te,J,se)=>ie(Te,J)||ye.get(Te,J,se),has:(Te,J)=>!!ie(Te,J)||ye.has(Te,J)}))},5861:(ht,ke,L)=>{function m(P,oe,ce,_e,ge,fe,we){try{var q=P[fe](we),z=q.value}catch(X){return void ce(X)}q.done?oe(z):Promise.resolve(z).then(_e,ge)}function B(P){return function(){var oe=this,ce=arguments;return new Promise(function(_e,ge){var fe=P.apply(oe,ce);function we(z){m(fe,_e,ge,we,q,"next",z)}function q(z){m(fe,_e,ge,we,q,"throw",z)}we(void 0)})}}L.d(ke,{Z:()=>B})}},ht=>{ht(ht.s=7296)}]);